"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/auth/[...nextauth]";
exports.ids = ["pages/api/auth/[...nextauth]"];
exports.modules = {

/***/ "base-64":
/*!**************************!*\
  !*** external "base-64" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("base-64");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/react":
/*!**********************************!*\
  !*** external "next-auth/react" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("next-auth/react");

/***/ }),

/***/ "nanoid":
/*!*************************!*\
  !*** external "nanoid" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("nanoid");;

/***/ }),

/***/ "(api)/./constants.ts":
/*!**********************!*\
  !*** ./constants.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DASHBOARD_DRAFTS_URL\": () => (/* binding */ DASHBOARD_DRAFTS_URL),\n/* harmony export */   \"DASHBOARD_GROUP_URL\": () => (/* binding */ DASHBOARD_GROUP_URL),\n/* harmony export */   \"DASHBOARD_URL\": () => (/* binding */ DASHBOARD_URL),\n/* harmony export */   \"DOCUMENT_URL\": () => (/* binding */ DOCUMENT_URL),\n/* harmony export */   \"MARKETING_URL\": () => (/* binding */ MARKETING_URL)\n/* harmony export */ });\nconst MARKETING_URL = \"/\";\nconst DASHBOARD_URL = \"/dashboard\";\nconst DASHBOARD_DRAFTS_URL = `${DASHBOARD_URL}/drafts`;\nconst DASHBOARD_GROUP_URL = (id)=>`${DASHBOARD_URL}/group/${id}`;\nconst DOCUMENT_URL = (type, id)=>`/${type}/${id}`;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb25zdGFudHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFTyxNQUFNQSxnQkFBZ0IsSUFBSTtBQUUxQixNQUFNQyxnQkFBZ0IsYUFBYTtBQUNuQyxNQUFNQyx1QkFBdUIsQ0FBQyxFQUFFRCxjQUFjLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZELE1BQU1FLHNCQUFzQixDQUFDQyxLQUNsQyxDQUFDLEVBQUVILGNBQWMsT0FBTyxFQUFFRyxHQUFHLENBQUMsQ0FBQztBQUUxQixNQUFNQyxlQUFlLENBQUNDLE1BQW9CRixLQUMvQyxDQUFDLENBQUMsRUFBRUUsS0FBSyxDQUFDLEVBQUVGLEdBQUcsQ0FBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vY29uc3RhbnRzLnRzP2RkNGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRUeXBlIH0gZnJvbSBcIi4vdHlwZXNcIjtcblxuZXhwb3J0IGNvbnN0IE1BUktFVElOR19VUkwgPSBcIi9cIjtcblxuZXhwb3J0IGNvbnN0IERBU0hCT0FSRF9VUkwgPSBcIi9kYXNoYm9hcmRcIjtcbmV4cG9ydCBjb25zdCBEQVNIQk9BUkRfRFJBRlRTX1VSTCA9IGAke0RBU0hCT0FSRF9VUkx9L2RyYWZ0c2A7XG5leHBvcnQgY29uc3QgREFTSEJPQVJEX0dST1VQX1VSTCA9IChpZDogc3RyaW5nKSA9PlxuICBgJHtEQVNIQk9BUkRfVVJMfS9ncm91cC8ke2lkfWA7XG5cbmV4cG9ydCBjb25zdCBET0NVTUVOVF9VUkwgPSAodHlwZTogRG9jdW1lbnRUeXBlLCBpZDogc3RyaW5nKSA9PlxuICBgLyR7dHlwZX0vJHtpZH1gO1xuIl0sIm5hbWVzIjpbIk1BUktFVElOR19VUkwiLCJEQVNIQk9BUkRfVVJMIiwiREFTSEJPQVJEX0RSQUZUU19VUkwiLCJEQVNIQk9BUkRfR1JPVVBfVVJMIiwiaWQiLCJET0NVTUVOVF9VUkwiLCJ0eXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./constants.ts\n");

/***/ }),

/***/ "(api)/./data/colors.ts":
/*!************************!*\
  !*** ./data/colors.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"colors\": () => (/* binding */ colors)\n/* harmony export */ });\n/**\n * Random colors used in the app.\n */ const colors = [\n    \"#07f\",\n    \"#0bf\",\n    \"#0c8\",\n    \"#8c1\",\n    \"#fb0\",\n    \"#f81\",\n    \"#e14\",\n    \"#e4b\",\n    \"#85f\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL2NvbG9ycy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7O0NBRUMsR0FDTSxNQUFNQSxTQUFTO0lBQ3BCO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtDQUNELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYXRhL2NvbG9ycy50cz83Yzk3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmFuZG9tIGNvbG9ycyB1c2VkIGluIHRoZSBhcHAuXG4gKi9cbmV4cG9ydCBjb25zdCBjb2xvcnMgPSBbXG4gIFwiIzA3ZlwiLFxuICBcIiMwYmZcIixcbiAgXCIjMGM4XCIsXG4gIFwiIzhjMVwiLFxuICBcIiNmYjBcIixcbiAgXCIjZjgxXCIsXG4gIFwiI2UxNFwiLFxuICBcIiNlNGJcIixcbiAgXCIjODVmXCIsXG5dO1xuIl0sIm5hbWVzIjpbImNvbG9ycyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./data/colors.ts\n");

/***/ }),

/***/ "(api)/./data/groups.ts":
/*!************************!*\
  !*** ./data/groups.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"groups\": () => (/* binding */ groups)\n/* harmony export */ });\n/**\n * This array simulates a database consisting of a list of groups.\n * Assign users to groups in /data/users.ts\n */ const groups = [\n    {\n        id: \"product\",\n        name: \"Product\"\n    },\n    {\n        id: \"engineering\",\n        name: \"Engineering\"\n    },\n    {\n        id: \"design\",\n        name: \"Design\"\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL2dyb3Vwcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBRUE7OztDQUdDLEdBQ00sTUFBTUEsU0FBa0I7SUFDN0I7UUFDRUMsSUFBSTtRQUNKQyxNQUFNO0lBQ1I7SUFDQTtRQUNFRCxJQUFJO1FBQ0pDLE1BQU07SUFDUjtJQUNBO1FBQ0VELElBQUk7UUFDSkMsTUFBTTtJQUNSO0NBQ0QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2RhdGEvZ3JvdXBzLnRzPzRmODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBUaGlzIGFycmF5IHNpbXVsYXRlcyBhIGRhdGFiYXNlIGNvbnNpc3Rpbmcgb2YgYSBsaXN0IG9mIGdyb3Vwcy5cbiAqIEFzc2lnbiB1c2VycyB0byBncm91cHMgaW4gL2RhdGEvdXNlcnMudHNcbiAqL1xuZXhwb3J0IGNvbnN0IGdyb3VwczogR3JvdXBbXSA9IFtcbiAge1xuICAgIGlkOiBcInByb2R1Y3RcIixcbiAgICBuYW1lOiBcIlByb2R1Y3RcIixcbiAgfSxcbiAge1xuICAgIGlkOiBcImVuZ2luZWVyaW5nXCIsXG4gICAgbmFtZTogXCJFbmdpbmVlcmluZ1wiLFxuICB9LFxuICB7XG4gICAgaWQ6IFwiZGVzaWduXCIsXG4gICAgbmFtZTogXCJEZXNpZ25cIixcbiAgfSxcbl07XG4iXSwibmFtZXMiOlsiZ3JvdXBzIiwiaWQiLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./data/groups.ts\n");

/***/ }),

/***/ "(api)/./data/users.ts":
/*!***********************!*\
  !*** ./data/users.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"users\": () => (/* binding */ users)\n/* harmony export */ });\n/**\n * This array simulates a database consisting of a list of users.\n * After signing up with your auth solution (e.g. GitHub, Auth0)\n * place your user info in an object, with the email address you used\n * as the id.\n * The groupIds are the names of the groups the user is part of.\n * Group info is in /data/groups.ts\n */ const users = [\n    /*\n  {\n    id: \"[YOUR EMAIL ADDRESS]\",\n    name: \"[YOUR DISPLAY NAME]\",\n    avatar: \"https://liveblocks.io/avatars/avatar-0.png\",\n    groupIds: [\"product\", \"engineering\", \"design\"],\n  },\n  */ {\n        id: \"charlie.layne@example.com\",\n        name: \"Charlie Layne\",\n        avatar: \"https://liveblocks.io/avatars/avatar-2.png\",\n        groupIds: [\n            \"product\",\n            \"engineering\",\n            \"design\"\n        ]\n    },\n    {\n        id: \"mislav.abha@example.com\",\n        name: \"Mislav Abha\",\n        avatar: \"https://liveblocks.io/avatars/avatar-3.png\",\n        groupIds: [\n            \"engineering\"\n        ]\n    },\n    {\n        id: \"tatum.paolo@example.com\",\n        name: \"Tatum Paolo\",\n        avatar: \"https://liveblocks.io/avatars/avatar-4.png\",\n        groupIds: [\n            \"engineering\",\n            \"design\"\n        ]\n    },\n    {\n        id: \"anjali.wanda@example.com\",\n        name: \"Anjali Wanda\",\n        avatar: \"https://liveblocks.io/avatars/avatar-5.png\",\n        groupIds: [\n            \"product\"\n        ]\n    },\n    {\n        id: \"emil.joyce@example.com\",\n        name: \"Emil Joyce\",\n        avatar: \"https://liveblocks.io/avatars/avatar-6.png\",\n        groupIds: [\n            \"product\",\n            \"design\"\n        ]\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9kYXRhL3VzZXJzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFFQTs7Ozs7OztDQU9DLEdBQ00sTUFBTUEsUUFBK0I7SUFDMUM7Ozs7Ozs7RUFPQSxHQUNBO1FBQ0VDLElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztZQUFXO1lBQWU7U0FBUztJQUNoRDtJQUNBO1FBQ0VILElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztTQUFjO0lBQzNCO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsVUFBVTtZQUFDO1lBQWU7U0FBUztJQUNyQztJQUNBO1FBQ0VILElBQUk7UUFDSkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFVBQVU7WUFBQztTQUFVO0lBQ3ZCO0lBQ0E7UUFDRUgsSUFBSTtRQUNKQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsVUFBVTtZQUFDO1lBQVc7U0FBUztJQUNqQztDQUNELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9kYXRhL3VzZXJzLnRzPzcwNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi90eXBlc1wiO1xuXG4vKipcbiAqIFRoaXMgYXJyYXkgc2ltdWxhdGVzIGEgZGF0YWJhc2UgY29uc2lzdGluZyBvZiBhIGxpc3Qgb2YgdXNlcnMuXG4gKiBBZnRlciBzaWduaW5nIHVwIHdpdGggeW91ciBhdXRoIHNvbHV0aW9uIChlLmcuIEdpdEh1YiwgQXV0aDApXG4gKiBwbGFjZSB5b3VyIHVzZXIgaW5mbyBpbiBhbiBvYmplY3QsIHdpdGggdGhlIGVtYWlsIGFkZHJlc3MgeW91IHVzZWRcbiAqIGFzIHRoZSBpZC5cbiAqIFRoZSBncm91cElkcyBhcmUgdGhlIG5hbWVzIG9mIHRoZSBncm91cHMgdGhlIHVzZXIgaXMgcGFydCBvZi5cbiAqIEdyb3VwIGluZm8gaXMgaW4gL2RhdGEvZ3JvdXBzLnRzXG4gKi9cbmV4cG9ydCBjb25zdCB1c2VyczogT21pdDxVc2VyLCBcImNvbG9yXCI+W10gPSBbXG4gIC8qXG4gIHtcbiAgICBpZDogXCJbWU9VUiBFTUFJTCBBRERSRVNTXVwiLFxuICAgIG5hbWU6IFwiW1lPVVIgRElTUExBWSBOQU1FXVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItMC5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiLCBcImVuZ2luZWVyaW5nXCIsIFwiZGVzaWduXCJdLFxuICB9LFxuICAqL1xuICB7XG4gICAgaWQ6IFwiY2hhcmxpZS5sYXluZUBleGFtcGxlLmNvbVwiLFxuICAgIG5hbWU6IFwiQ2hhcmxpZSBMYXluZVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItMi5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiLCBcImVuZ2luZWVyaW5nXCIsIFwiZGVzaWduXCJdLFxuICB9LFxuICB7XG4gICAgaWQ6IFwibWlzbGF2LmFiaGFAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIk1pc2xhdiBBYmhhXCIsXG4gICAgYXZhdGFyOiBcImh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9hdmF0YXJzL2F2YXRhci0zLnBuZ1wiLFxuICAgIGdyb3VwSWRzOiBbXCJlbmdpbmVlcmluZ1wiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcInRhdHVtLnBhb2xvQGV4YW1wbGUuY29tXCIsXG4gICAgbmFtZTogXCJUYXR1bSBQYW9sb1wiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNC5wbmdcIixcbiAgICBncm91cElkczogW1wiZW5naW5lZXJpbmdcIiwgXCJkZXNpZ25cIl0sXG4gIH0sXG4gIHtcbiAgICBpZDogXCJhbmphbGkud2FuZGFAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIkFuamFsaSBXYW5kYVwiLFxuICAgIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNS5wbmdcIixcbiAgICBncm91cElkczogW1wicHJvZHVjdFwiXSxcbiAgfSxcbiAge1xuICAgIGlkOiBcImVtaWwuam95Y2VAZXhhbXBsZS5jb21cIixcbiAgICBuYW1lOiBcIkVtaWwgSm95Y2VcIixcbiAgICBhdmF0YXI6IFwiaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2F2YXRhcnMvYXZhdGFyLTYucG5nXCIsXG4gICAgZ3JvdXBJZHM6IFtcInByb2R1Y3RcIiwgXCJkZXNpZ25cIl0sXG4gIH0sXG5dO1xuIl0sIm5hbWVzIjpbInVzZXJzIiwiaWQiLCJuYW1lIiwiYXZhdGFyIiwiZ3JvdXBJZHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./data/users.ts\n");

/***/ }),

/***/ "(api)/./lib/server/auth/getServerSession.ts":
/*!*********************************************!*\
  !*** ./lib/server/auth/getServerSession.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getServerSession\": () => (/* binding */ getServerSession)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../pages/api/auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__]);\n_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nfunction getServerSession(req, res) {\n    return (0,next_auth_next__WEBPACK_IMPORTED_MODULE_0__.unstable_getServerSession)(req, res, _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.authOptions);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2F1dGgvZ2V0U2VydmVyU2Vzc2lvbi50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQzJEO0FBQ1M7QUFFN0QsU0FBU0UsaUJBQ2RDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQztJQUNBLE9BQU9KLHlFQUF5QkEsQ0FBQ0csS0FBS0MsS0FBS0gsa0VBQVdBO0FBQ3hELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2F1dGgvZ2V0U2VydmVyU2Vzc2lvbi50cz9mOWYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQgeyB1bnN0YWJsZV9nZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIm5leHQtYXV0aC9uZXh0XCI7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gXCIuLi8uLi8uLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2ZXJTZXNzaW9uKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXVxuKSB7XG4gIHJldHVybiB1bnN0YWJsZV9nZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XG59XG4iXSwibmFtZXMiOlsidW5zdGFibGVfZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiZ2V0U2VydmVyU2Vzc2lvbiIsInJlcSIsInJlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/auth/getServerSession.ts\n");

/***/ }),

/***/ "(api)/./lib/server/auth/index.ts":
/*!**********************************!*\
  !*** ./lib/server/auth/index.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _getServerSession__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getServerSession */ \"(api)/./lib/server/auth/getServerSession.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_getServerSession__WEBPACK_IMPORTED_MODULE_0__]);\n_getServerSession__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getServerSession__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getServerSession__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2F1dGgvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBbUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2F1dGgvaW5kZXgudHM/NTZiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9nZXRTZXJ2ZXJTZXNzaW9uXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/auth/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getGroup.ts":
/*!*****************************************!*\
  !*** ./lib/server/database/getGroup.ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getGroup\": () => (/* binding */ getGroup)\n/* harmony export */ });\n/* harmony import */ var _data_groups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/groups */ \"(api)/./data/groups.ts\");\n\n/**\n * Get Group\n *\n * Simulates calling your database and returning a group\n *\n * @param id - The group's id\n */ async function getGroup(id) {\n    return _data_groups__WEBPACK_IMPORTED_MODULE_0__.groups.find((group)=>group.id === id) ?? null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3VwLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQThDO0FBRzlDOzs7Ozs7Q0FNQyxHQUNNLGVBQWVDLFNBQVNDLEVBQVUsRUFBeUI7SUFDaEUsT0FBT0YscURBQVcsQ0FBQyxDQUFDSSxRQUFVQSxNQUFNRixFQUFFLEtBQUtBLE9BQU8sSUFBSTtBQUN4RCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9nZXRHcm91cC50cz9iYTAxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdyb3VwcyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2dyb3Vwc1wiO1xuaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBHZXQgR3JvdXBcbiAqXG4gKiBTaW11bGF0ZXMgY2FsbGluZyB5b3VyIGRhdGFiYXNlIGFuZCByZXR1cm5pbmcgYSBncm91cFxuICpcbiAqIEBwYXJhbSBpZCAtIFRoZSBncm91cCdzIGlkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRHcm91cChpZDogc3RyaW5nKTogUHJvbWlzZTxHcm91cCB8IG51bGw+IHtcbiAgcmV0dXJuIGdyb3Vwcy5maW5kKChncm91cCkgPT4gZ3JvdXAuaWQgPT09IGlkKSA/PyBudWxsO1xufVxuIl0sIm5hbWVzIjpbImdyb3VwcyIsImdldEdyb3VwIiwiaWQiLCJmaW5kIiwiZ3JvdXAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getGroup.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getGroups.ts":
/*!******************************************!*\
  !*** ./lib/server/database/getGroups.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getGroups\": () => (/* binding */ getGroups)\n/* harmony export */ });\n/* harmony import */ var _data_groups__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/groups */ \"(api)/./data/groups.ts\");\n\n/**\n * Get Groups\n *\n * Simulates calling your database and returning a list of groups\n *\n * @param ids - The group ids\n */ async function getGroups(ids) {\n    return _data_groups__WEBPACK_IMPORTED_MODULE_0__.groups.filter((group)=>ids.includes(group.id));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3Vwcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUE4QztBQUc5Qzs7Ozs7O0NBTUMsR0FDTSxlQUFlQyxVQUFVQyxHQUFhLEVBQW9CO0lBQy9ELE9BQU9GLHVEQUFhLENBQUMsQ0FBQ0ksUUFBVUYsSUFBSUcsUUFBUSxDQUFDRCxNQUFNRSxFQUFFO0FBQ3ZELENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldEdyb3Vwcy50cz81NGViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdyb3VwcyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL2dyb3Vwc1wiO1xuaW1wb3J0IHsgR3JvdXAgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcblxuLyoqXG4gKiBHZXQgR3JvdXBzXG4gKlxuICogU2ltdWxhdGVzIGNhbGxpbmcgeW91ciBkYXRhYmFzZSBhbmQgcmV0dXJuaW5nIGEgbGlzdCBvZiBncm91cHNcbiAqXG4gKiBAcGFyYW0gaWRzIC0gVGhlIGdyb3VwIGlkc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0R3JvdXBzKGlkczogc3RyaW5nW10pOiBQcm9taXNlPEdyb3VwW10+IHtcbiAgcmV0dXJuIGdyb3Vwcy5maWx0ZXIoKGdyb3VwKSA9PiBpZHMuaW5jbHVkZXMoZ3JvdXAuaWQpKTtcbn1cbiJdLCJuYW1lcyI6WyJncm91cHMiLCJnZXRHcm91cHMiLCJpZHMiLCJmaWx0ZXIiLCJncm91cCIsImluY2x1ZGVzIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/getUser.ts":
/*!****************************************!*\
  !*** ./lib/server/database/getUser.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getUser\": () => (/* binding */ getUser)\n/* harmony export */ });\n/* harmony import */ var _data_colors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../data/colors */ \"(api)/./data/colors.ts\");\n/* harmony import */ var _data_users__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../data/users */ \"(api)/./data/users.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n\n\n/**\n * Get User\n *\n * Simulates calling your database and returning a user with a seeded random colour\n *\n * @param userId - The user's id\n */ async function getUser(userId) {\n    const user = _data_users__WEBPACK_IMPORTED_MODULE_1__.users.find((user)=>user.id === userId);\n    if (!user) {\n        console.warn(`\nERROR: User \"${userId}\" was not found. \n\nCheck that you've added the user to data/users.ts, for example:\n{\n  id: \"${userId}\",\n  name: \"Tchoka Ahoki\",\n  avatar: \"https://liveblocks.io/avatars/avatar-7.png\",\n  groupIds: [\"product\", \"engineering\", \"design\"],\n},\n \n`);\n        return null;\n    }\n    const color = (0,_utils__WEBPACK_IMPORTED_MODULE_2__.getRandom)(_data_colors__WEBPACK_IMPORTED_MODULE_0__.colors, userId);\n    return {\n        color,\n        ...user\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2dldFVzZXIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE4QztBQUNGO0FBRVA7QUFFckM7Ozs7OztDQU1DLEdBQ00sZUFBZUcsUUFBUUMsTUFBYyxFQUF3QjtJQUNsRSxNQUFNQyxPQUFPSixtREFBVSxDQUFDLENBQUNJLE9BQVNBLEtBQUtFLEVBQUUsS0FBS0g7SUFFOUMsSUFBSSxDQUFDQyxNQUFNO1FBQ1RHLFFBQVFDLElBQUksQ0FBQyxDQUFDO2FBQ0wsRUFBRUwsT0FBTzs7OztPQUlmLEVBQUVBLE9BQU87Ozs7OztBQU1oQixDQUFDO1FBQ0csT0FBTyxJQUFJO0lBQ2IsQ0FBQztJQUVELE1BQU1NLFFBQVFSLGlEQUFTQSxDQUFDRixnREFBTUEsRUFBRUk7SUFFaEMsT0FBTztRQUFFTTtRQUFPLEdBQUdMLElBQUk7SUFBQztBQUMxQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9nZXRVc2VyLnRzPzRhYTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY29sb3JzIH0gZnJvbSBcIi4uLy4uLy4uL2RhdGEvY29sb3JzXCI7XG5pbXBvcnQgeyB1c2VycyB9IGZyb20gXCIuLi8uLi8uLi9kYXRhL3VzZXJzXCI7XG5pbXBvcnQgeyBVc2VyIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRSYW5kb20gfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBHZXQgVXNlclxuICpcbiAqIFNpbXVsYXRlcyBjYWxsaW5nIHlvdXIgZGF0YWJhc2UgYW5kIHJldHVybmluZyBhIHVzZXIgd2l0aCBhIHNlZWRlZCByYW5kb20gY29sb3VyXG4gKlxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSB1c2VyJ3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFVzZXIodXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXIgfCBudWxsPiB7XG4gIGNvbnN0IHVzZXIgPSB1c2Vycy5maW5kKCh1c2VyKSA9PiB1c2VyLmlkID09PSB1c2VySWQpO1xuXG4gIGlmICghdXNlcikge1xuICAgIGNvbnNvbGUud2FybihgXG5FUlJPUjogVXNlciBcIiR7dXNlcklkfVwiIHdhcyBub3QgZm91bmQuIFxuXG5DaGVjayB0aGF0IHlvdSd2ZSBhZGRlZCB0aGUgdXNlciB0byBkYXRhL3VzZXJzLnRzLCBmb3IgZXhhbXBsZTpcbntcbiAgaWQ6IFwiJHt1c2VySWR9XCIsXG4gIG5hbWU6IFwiVGNob2thIEFob2tpXCIsXG4gIGF2YXRhcjogXCJodHRwczovL2xpdmVibG9ja3MuaW8vYXZhdGFycy9hdmF0YXItNy5wbmdcIixcbiAgZ3JvdXBJZHM6IFtcInByb2R1Y3RcIiwgXCJlbmdpbmVlcmluZ1wiLCBcImRlc2lnblwiXSxcbn0sXG4gXG5gKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IGNvbG9yID0gZ2V0UmFuZG9tKGNvbG9ycywgdXNlcklkKTtcblxuICByZXR1cm4geyBjb2xvciwgLi4udXNlciB9O1xufVxuIl0sIm5hbWVzIjpbImNvbG9ycyIsInVzZXJzIiwiZ2V0UmFuZG9tIiwiZ2V0VXNlciIsInVzZXJJZCIsInVzZXIiLCJmaW5kIiwiaWQiLCJjb25zb2xlIiwid2FybiIsImNvbG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/getUser.ts\n");

/***/ }),

/***/ "(api)/./lib/server/database/index.ts":
/*!**************************************!*\
  !*** ./lib/server/database/index.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _getGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getGroup */ \"(api)/./lib/server/database/getGroup.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getGroup__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getGroup__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getGroups */ \"(api)/./lib/server/database/getGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getGroups__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getGroups__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getUser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getUser */ \"(api)/./lib/server/database/getUser.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getUser__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getUser__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RhdGFiYXNlL2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBMkI7QUFDQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kYXRhYmFzZS9pbmRleC50cz82ZWM0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2dldEdyb3VwXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXRHcm91cHNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFVzZXJcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/database/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/createDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/createDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createDocument\": () => (/* binding */ createDocument)\n/* harmony export */ });\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! nanoid */ \"nanoid\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ */ \"(api)/./lib/server/index.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([nanoid__WEBPACK_IMPORTED_MODULE_0__, ___WEBPACK_IMPORTED_MODULE_1__]);\n([nanoid__WEBPACK_IMPORTED_MODULE_0__, ___WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n/**\n * Create Document\n *\n * Create a new document, with a specified name and type, from userId and groupId\n *\n * @param name - The name of the new document\n * @param type - The type of the new document e.g. \"canvas\"\n * @param userId - The user creating the document\n * @param [groupIds] - The new document's initial groups\n * @param [draft] - If the document is a draft (no public or group access, but can invite)\n * @param req\n * @param res\n */ async function createDocument(req, res, { name , type , userId , groupIds , draft  }) {\n    // Check user is logged in\n    const session = await (0,___WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res);\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to create a new document\"\n            }\n        };\n    }\n    const id = (0,nanoid__WEBPACK_IMPORTED_MODULE_0__.nanoid)();\n    // Custom metadata for our document\n    const metadata = {\n        name: name,\n        type: type,\n        owner: userId,\n        draft: draft ? \"yes\" : \"no\"\n    };\n    // Give creator of document full access\n    const usersAccesses = {\n        [userId]: [\n            _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n        ]\n    };\n    const groupsAccesses = {};\n    if (draft) {\n        // If draft, only add draft group access\n        groupsAccesses[(0,_utils__WEBPACK_IMPORTED_MODULE_3__.getDraftsGroupName)(userId)] = [\n            _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n        ];\n    } else if (groupIds) {\n        // If groupIds sent, limit access to these groups\n        groupIds.forEach((groupId)=>{\n            groupsAccesses[groupId] = [\n                _types__WEBPACK_IMPORTED_MODULE_2__.RoomAccess.RoomWrite\n            ];\n        });\n    }\n    // Calling Liveblocks API with required info\n    const { data , error  } = await (0,___WEBPACK_IMPORTED_MODULE_1__.createRoom)({\n        id,\n        metadata,\n        usersAccesses,\n        groupsAccesses\n    });\n    if (error || !data) {\n        return {\n            error\n        };\n    }\n    // Build createRoom result into our custom document format and return\n    const document = (0,___WEBPACK_IMPORTED_MODULE_1__.buildDocument)(data);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9jcmVhdGVEb2N1bWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFnQztBQUVrQztBQVExQztBQUNzQjtBQUU5Qzs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxlQUFlTSxlQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLEtBQUksRUFBRUMsS0FBSSxFQUFFQyxPQUFNLEVBQUVDLFNBQVEsRUFBRUMsTUFBSyxFQUF1QixFQUN6QjtJQUNuQywwQkFBMEI7SUFDMUIsTUFBTUMsVUFBVSxNQUFNWCxtREFBZ0JBLENBQUNJLEtBQUtDO0lBRTVDLElBQUksQ0FBQ00sU0FBUztRQUNaLE9BQU87WUFDTEMsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsTUFBTUMsS0FBS25CLDhDQUFNQTtJQUVqQixtQ0FBbUM7SUFDbkMsTUFBTW9CLFdBQWlDO1FBQ3JDWCxNQUFNQTtRQUNOQyxNQUFNQTtRQUNOVyxPQUFPVjtRQUNQRSxPQUFPQSxRQUFRLFFBQVEsSUFBSTtJQUM3QjtJQUVBLHVDQUF1QztJQUN2QyxNQUFNUyxnQkFBOEI7UUFDbEMsQ0FBQ1gsT0FBTyxFQUFFO1lBQUNQLHdEQUFvQjtTQUFDO0lBQ2xDO0lBRUEsTUFBTW9CLGlCQUErQixDQUFDO0lBRXRDLElBQUlYLE9BQU87UUFDVCx3Q0FBd0M7UUFDeENXLGNBQWMsQ0FBQ25CLDBEQUFrQkEsQ0FBQ00sUUFBUSxHQUFHO1lBQUNQLHdEQUFvQjtTQUFDO0lBQ3JFLE9BQU8sSUFBSVEsVUFBVTtRQUNuQixpREFBaUQ7UUFDakRBLFNBQVNhLE9BQU8sQ0FBQyxDQUFDQyxVQUFvQjtZQUNwQ0YsY0FBYyxDQUFDRSxRQUFRLEdBQUc7Z0JBQUN0Qix3REFBb0I7YUFBQztRQUNsRDtJQUNGLENBQUM7SUFFRCw0Q0FBNEM7SUFDNUMsTUFBTSxFQUFFdUIsS0FBSSxFQUFFWixNQUFLLEVBQUUsR0FBRyxNQUFNYiw2Q0FBVUEsQ0FBQztRQUN2Q2lCO1FBQ0FDO1FBQ0FFO1FBQ0FFO0lBQ0Y7SUFFQSxJQUFJVCxTQUFTLENBQUNZLE1BQU07UUFDbEIsT0FBTztZQUFFWjtRQUFNO0lBQ2pCLENBQUM7SUFFRCxxRUFBcUU7SUFDckUsTUFBTWEsV0FBcUIzQixnREFBYUEsQ0FBQzBCO0lBQ3pDLE9BQU87UUFBRUEsTUFBTUM7SUFBUztBQUMxQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvY3JlYXRlRG9jdW1lbnQudHM/NjNkYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5pbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIGNyZWF0ZVJvb20sIGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiLi4vXCI7XG5pbXBvcnQge1xuICBDcmVhdGVEb2N1bWVudFByb3BzLFxuICBEb2N1bWVudCxcbiAgRG9jdW1lbnRSb29tTWV0YWRhdGEsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzZXMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0RHJhZnRzR3JvdXBOYW1lIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogQ3JlYXRlIERvY3VtZW50XG4gKlxuICogQ3JlYXRlIGEgbmV3IGRvY3VtZW50LCB3aXRoIGEgc3BlY2lmaWVkIG5hbWUgYW5kIHR5cGUsIGZyb20gdXNlcklkIGFuZCBncm91cElkXG4gKlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgbmV3IGRvY3VtZW50XG4gKiBAcGFyYW0gdHlwZSAtIFRoZSB0eXBlIG9mIHRoZSBuZXcgZG9jdW1lbnQgZS5nLiBcImNhbnZhc1wiXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXIgY3JlYXRpbmcgdGhlIGRvY3VtZW50XG4gKiBAcGFyYW0gW2dyb3VwSWRzXSAtIFRoZSBuZXcgZG9jdW1lbnQncyBpbml0aWFsIGdyb3Vwc1xuICogQHBhcmFtIFtkcmFmdF0gLSBJZiB0aGUgZG9jdW1lbnQgaXMgYSBkcmFmdCAobm8gcHVibGljIG9yIGdyb3VwIGFjY2VzcywgYnV0IGNhbiBpbnZpdGUpXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVEb2N1bWVudChcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgbmFtZSwgdHlwZSwgdXNlcklkLCBncm91cElkcywgZHJhZnQgfTogQ3JlYXRlRG9jdW1lbnRQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudD4+IHtcbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpO1xuXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IHNpZ25lZCBpblwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlNpZ24gaW4gdG8gY3JlYXRlIGEgbmV3IGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICBjb25zdCBpZCA9IG5hbm9pZCgpO1xuXG4gIC8vIEN1c3RvbSBtZXRhZGF0YSBmb3Igb3VyIGRvY3VtZW50XG4gIGNvbnN0IG1ldGFkYXRhOiBEb2N1bWVudFJvb21NZXRhZGF0YSA9IHtcbiAgICBuYW1lOiBuYW1lLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgb3duZXI6IHVzZXJJZCxcbiAgICBkcmFmdDogZHJhZnQgPyBcInllc1wiIDogXCJub1wiLFxuICB9O1xuXG4gIC8vIEdpdmUgY3JlYXRvciBvZiBkb2N1bWVudCBmdWxsIGFjY2Vzc1xuICBjb25zdCB1c2Vyc0FjY2Vzc2VzOiBSb29tQWNjZXNzZXMgPSB7XG4gICAgW3VzZXJJZF06IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gIH07XG5cbiAgY29uc3QgZ3JvdXBzQWNjZXNzZXM6IFJvb21BY2Nlc3NlcyA9IHt9O1xuXG4gIGlmIChkcmFmdCkge1xuICAgIC8vIElmIGRyYWZ0LCBvbmx5IGFkZCBkcmFmdCBncm91cCBhY2Nlc3NcbiAgICBncm91cHNBY2Nlc3Nlc1tnZXREcmFmdHNHcm91cE5hbWUodXNlcklkKV0gPSBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdO1xuICB9IGVsc2UgaWYgKGdyb3VwSWRzKSB7XG4gICAgLy8gSWYgZ3JvdXBJZHMgc2VudCwgbGltaXQgYWNjZXNzIHRvIHRoZXNlIGdyb3Vwc1xuICAgIGdyb3VwSWRzLmZvckVhY2goKGdyb3VwSWQ6IHN0cmluZykgPT4ge1xuICAgICAgZ3JvdXBzQWNjZXNzZXNbZ3JvdXBJZF0gPSBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQ2FsbGluZyBMaXZlYmxvY2tzIEFQSSB3aXRoIHJlcXVpcmVkIGluZm9cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY3JlYXRlUm9vbSh7XG4gICAgaWQsXG4gICAgbWV0YWRhdGEsXG4gICAgdXNlcnNBY2Nlc3NlcyxcbiAgICBncm91cHNBY2Nlc3NlcyxcbiAgfSk7XG5cbiAgaWYgKGVycm9yIHx8ICFkYXRhKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIC8vIEJ1aWxkIGNyZWF0ZVJvb20gcmVzdWx0IGludG8gb3VyIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KGRhdGEpO1xuICByZXR1cm4geyBkYXRhOiBkb2N1bWVudCB9O1xufVxuIl0sIm5hbWVzIjpbIm5hbm9pZCIsImJ1aWxkRG9jdW1lbnQiLCJjcmVhdGVSb29tIiwiZ2V0U2VydmVyU2Vzc2lvbiIsIlJvb21BY2Nlc3MiLCJnZXREcmFmdHNHcm91cE5hbWUiLCJjcmVhdGVEb2N1bWVudCIsInJlcSIsInJlcyIsIm5hbWUiLCJ0eXBlIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJkcmFmdCIsInNlc3Npb24iLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImlkIiwibWV0YWRhdGEiLCJvd25lciIsInVzZXJzQWNjZXNzZXMiLCJSb29tV3JpdGUiLCJncm91cHNBY2Nlc3NlcyIsImZvckVhY2giLCJncm91cElkIiwiZGF0YSIsImRvY3VtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/createDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/deleteDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/deleteDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"deleteDocument\": () => (/* binding */ deleteDocument)\n/* harmony export */ });\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ */ \"(api)/./lib/server/index.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _liveblocks_deleteRoom__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks/deleteRoom */ \"(api)/./lib/server/liveblocks/deleteRoom.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([___WEBPACK_IMPORTED_MODULE_0__]);\n___WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Delete Document\n *\n * Delete a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param documentId - The document to delete\n * @param req\n * @param res\n */ async function deleteDocument(req, res, { documentId  }) {\n    const [session, room] = await Promise.all([\n        (0,___WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,___WEBPACK_IMPORTED_MODULE_0__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update document users\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,___WEBPACK_IMPORTED_MODULE_0__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    const { error: deleteRoomError  } = await (0,_liveblocks_deleteRoom__WEBPACK_IMPORTED_MODULE_2__.deleteRoom)({\n        roomId: documentId\n    });\n    if (deleteRoomError) {\n        return {\n            error: deleteRoomError\n        };\n    }\n    return {\n        data: documentId\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9kZWxldGVEb2N1bWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ21FO0FBTzNDO0FBQzhCO0FBRXREOzs7Ozs7Ozs7O0NBVUMsR0FDTSxlQUFlTSxlQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFdBQVUsRUFBdUIsRUFDTTtJQUN6QyxNQUFNLENBQUNDLFNBQVNDLEtBQUssR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDeENaLG1EQUFnQkEsQ0FBQ00sS0FBS0M7UUFDdEJSLDBDQUFPQSxDQUFDO1lBQUVjLFFBQVFMO1FBQVc7S0FDOUI7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDQyxTQUFTO1FBQ1osT0FBTztZQUNMSyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFQyxNQUFNQyxZQUFXLEVBQUVMLE1BQUssRUFBRSxHQUFHSjtJQUVyQyxJQUFJSSxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNLLGFBQWE7UUFDaEIsT0FBTztZQUNMTCxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCwyREFBMkQ7SUFDM0QsSUFDRSxDQUFDaEIsb0RBQWlCQSxDQUFDO1FBQ2pCbUIsaUJBQWlCO1lBQUNsQix3REFBb0I7U0FBQztRQUN2Q29CLG1CQUFtQjtZQUFDbkIseURBQXFCO1NBQUM7UUFDMUNxQixRQUFRZixRQUFRZ0IsSUFBSSxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFDNUJDLFVBQVVuQixRQUFRZ0IsSUFBSSxDQUFDQyxJQUFJLENBQUNFLFFBQVE7UUFDcENsQixNQUFNUztJQUNSLElBQ0E7UUFDQSxPQUFPO1lBQ0xMLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELE1BQU0sRUFBRUgsT0FBT2UsZ0JBQWUsRUFBRSxHQUFHLE1BQU16QixrRUFBVUEsQ0FBQztRQUFFUyxRQUFRTDtJQUFXO0lBRXpFLElBQUlxQixpQkFBaUI7UUFDbkIsT0FBTztZQUFFZixPQUFPZTtRQUFnQjtJQUNsQyxDQUFDO0lBRUQsT0FBTztRQUFFWCxNQUFNVjtJQUFXO0FBQzVCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RvY3VtZW50cy9kZWxldGVEb2N1bWVudC50cz9jZGRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgZ2V0Um9vbSwgZ2V0U2VydmVyU2Vzc2lvbiwgdXNlckFsbG93ZWRJblJvb20gfSBmcm9tIFwiLi4vXCI7XG5pbXBvcnQge1xuICBEZWxldGVEb2N1bWVudFByb3BzLFxuICBEb2N1bWVudCxcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIFJvb21BY2Nlc3MsXG4gIFJvb21BY2Nlc3NMZXZlbHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZGVsZXRlUm9vbSB9IGZyb20gXCIuLi9saXZlYmxvY2tzL2RlbGV0ZVJvb21cIjtcblxuLyoqXG4gKiBEZWxldGUgRG9jdW1lbnRcbiAqXG4gKiBEZWxldGUgYSBkb2N1bWVudFxuICogT25seSBhbGxvdyBpZiBhdXRob3JpemVkIHdpdGggTmV4dEF1dGggYW5kIGlzIGFkZGVkIGFzIGEgdXNlcklkIG9uIHVzZXJzQWNjZXNzZXNcbiAqIERvIG5vdCBhbGxvdyBpZiBwdWJsaWMgYWNjZXNzLCBvciBhY2Nlc3MgZ3JhbnRlZCB0aHJvdWdoIGdyb3VwSWRzXG4gKlxuICogQHBhcmFtIGRvY3VtZW50SWQgLSBUaGUgZG9jdW1lbnQgdG8gZGVsZXRlXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVEb2N1bWVudChcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgZG9jdW1lbnRJZCB9OiBEZWxldGVEb2N1bWVudFByb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50W1wiaWRcIl0+PiB7XG4gIGNvbnN0IFtzZXNzaW9uLCByb29tXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIHVwZGF0ZSBkb2N1bWVudCB1c2Vyc1wiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhlIHJvb20gYGRvY3VtZW50SWRgIGV4aXN0c1xuICBjb25zdCB7IGRhdGE6IGN1cnJlbnRSb29tLCBlcnJvciB9ID0gcm9vbTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFjdXJyZW50Um9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBlZGl0IGFjY2VzcyB0byB0aGUgcm9vbVxuICBpZiAoXG4gICAgIXVzZXJBbGxvd2VkSW5Sb29tKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZDogW1Jvb21BY2Nlc3MuUm9vbVdyaXRlXSxcbiAgICAgIGNoZWNrQWNjZXNzTGV2ZWxzOiBbUm9vbUFjY2Vzc0xldmVscy5VU0VSXSxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmluZm8uaWQsXG4gICAgICBncm91cElkczogc2Vzc2lvbi51c2VyLmluZm8uZ3JvdXBJZHMsXG4gICAgICByb29tOiBjdXJyZW50Um9vbSxcbiAgICB9KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBhbGxvd2VkIGFjY2Vzc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIGJlZW4gZ2l2ZW4gcGVybWlzc2lvbiB0byB0aGUgZG9jdW1lbnRcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHsgZXJyb3I6IGRlbGV0ZVJvb21FcnJvciB9ID0gYXdhaXQgZGVsZXRlUm9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KTtcblxuICBpZiAoZGVsZXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IGRlbGV0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YTogZG9jdW1lbnRJZCB9O1xufVxuIl0sIm5hbWVzIjpbImdldFJvb20iLCJnZXRTZXJ2ZXJTZXNzaW9uIiwidXNlckFsbG93ZWRJblJvb20iLCJSb29tQWNjZXNzIiwiUm9vbUFjY2Vzc0xldmVscyIsImRlbGV0ZVJvb20iLCJkZWxldGVEb2N1bWVudCIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJzZXNzaW9uIiwicm9vbSIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJjdXJyZW50Um9vbSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsImNoZWNrQWNjZXNzTGV2ZWxzIiwiVVNFUiIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsImRlbGV0ZVJvb21FcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/deleteDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocument.ts":
/*!*********************************************!*\
  !*** ./lib/server/documents/getDocument.ts ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDocument\": () => (/* binding */ getDocument)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * Get a document.\n * Only allow if user has access to room (including logged-out users and public rooms).\n *\n * @param req\n * @param res\n * @param documentId - The document id\n */ async function getDocument(req, res, { documentId  }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current user has access to the room (if not logged in, use empty values)\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead\n        ],\n        userId: session?.user.info.id ?? \"\",\n        groupIds: session?.user.info.groupIds ?? [],\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // Convert room into our custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(data);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU13QjtBQUNtQjtBQUNIO0FBQ29CO0FBRTVEOzs7Ozs7O0NBT0MsR0FDTSxlQUFlSyxZQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFdBQVUsRUFBb0IsRUFDRztJQUNuQyx1QkFBdUI7SUFDdkIsTUFBTSxDQUFDQyxTQUFTQyxLQUFLLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3hDWCx1REFBZ0JBLENBQUNLLEtBQUtDO1FBQ3RCTCxvREFBT0EsQ0FBQztZQUFFVyxRQUFRTDtRQUFXO0tBQzlCO0lBRUQsTUFBTSxFQUFFTSxLQUFJLEVBQUVDLE1BQUssRUFBRSxHQUFHTDtJQUV4QixJQUFJSyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNELE1BQU07UUFDVCxPQUFPO1lBQ0xDLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELGlGQUFpRjtJQUNqRixJQUNFLENBQUNkLHlEQUFpQkEsQ0FBQztRQUNqQmUsaUJBQWlCO1lBQUNuQix3REFBb0I7WUFBRUEsdURBQW1CO1NBQUM7UUFDNURzQixRQUFRYixTQUFTYyxLQUFLQyxJQUFJLENBQUNDLEVBQUUsSUFBSTtRQUNqQ0MsVUFBVWpCLFNBQVNjLEtBQUtDLElBQUksQ0FBQ0UsUUFBUSxJQUFJLEVBQUU7UUFDM0NoQixNQUFNSTtJQUNSLElBQ0E7UUFDQSxPQUFPO1lBQ0xDLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDBEQUEwRDtJQUMxRCxNQUFNUyxXQUFxQnhCLHFEQUFhQSxDQUFDVztJQUN6QyxPQUFPO1FBQUVBLE1BQU1hO0lBQVM7QUFDMUIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2dldERvY3VtZW50LnRzP2IzMWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudCxcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIEdldERvY3VtZW50UHJvcHMsXG4gIFJvb21BY2Nlc3MsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIHVzZXJBbGxvd2VkSW5Sb29tIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogR2V0IGEgZG9jdW1lbnQuXG4gKiBPbmx5IGFsbG93IGlmIHVzZXIgaGFzIGFjY2VzcyB0byByb29tIChpbmNsdWRpbmcgbG9nZ2VkLW91dCB1c2VycyBhbmQgcHVibGljIHJvb21zKS5cbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCBpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnQoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQgfTogR2V0RG9jdW1lbnRQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudD4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIHJvb21cbiAgY29uc3QgW3Nlc3Npb24sIHJvb21dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldFJvb20oeyByb29tSWQ6IGRvY3VtZW50SWQgfSksXG4gIF0pO1xuXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IHVzZXIgaGFzIGFjY2VzcyB0byB0aGUgcm9vbSAoaWYgbm90IGxvZ2dlZCBpbiwgdXNlIGVtcHR5IHZhbHVlcylcbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZSwgUm9vbUFjY2Vzcy5Sb29tUmVhZF0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXIuaW5mby5pZCA/PyBcIlwiLFxuICAgICAgZ3JvdXBJZHM6IHNlc3Npb24/LnVzZXIuaW5mby5ncm91cElkcyA/PyBbXSxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIHJvb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENvbnZlcnQgcm9vbSBpbnRvIG91ciBjdXN0b20gZG9jdW1lbnQgZm9ybWF0IGFuZCByZXR1cm5cbiAgY29uc3QgZG9jdW1lbnQ6IERvY3VtZW50ID0gYnVpbGREb2N1bWVudChkYXRhKTtcbiAgcmV0dXJuIHsgZGF0YTogZG9jdW1lbnQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFJvb20iLCJidWlsZERvY3VtZW50IiwidXNlckFsbG93ZWRJblJvb20iLCJnZXREb2N1bWVudCIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJzZXNzaW9uIiwicm9vbSIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJkYXRhIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJSb29tUmVhZCIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsImRvY3VtZW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocumentGroups.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/getDocumentGroups.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDocumentGroups\": () => (/* binding */ getDocumentGroups)\n/* harmony export */ });\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n\n/**\n * Get all groups attached to a given document.\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n */ async function getDocumentGroups(req, res, { documentId  }) {\n    // Get session and room\n    const room = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_0__.getRoom)({\n        roomId: documentId\n    });\n    // Get the room from documentId\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_1__.buildDocumentGroups)(data);\n    return {\n        data: result\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudEdyb3Vwcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFNd0M7QUFDTztBQUUvQzs7Ozs7O0NBTUMsR0FDTSxlQUFlRSxrQkFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxXQUFVLEVBQTBCLEVBQ0k7SUFDMUMsdUJBQXVCO0lBQ3ZCLE1BQU1DLE9BQU8sTUFBTU4sb0RBQU9BLENBQUM7UUFBRU8sUUFBUUY7SUFBVztJQUVoRCwrQkFBK0I7SUFDL0IsTUFBTSxFQUFFRyxLQUFJLEVBQUVDLE1BQUssRUFBRSxHQUFHSDtJQUV4QixJQUFJRyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNELE1BQU07UUFDVCxPQUFPO1lBQ0xDLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDJEQUEyRDtJQUMzRCxNQUFNQyxTQUEwQixNQUFNWiwyREFBbUJBLENBQUNPO0lBQzFELE9BQU87UUFBRUEsTUFBTUs7SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvZ2V0RG9jdW1lbnRHcm91cHMudHM/ZWQ5YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50R3JvdXAsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBHZXREb2N1bWVudEdyb3Vwc1Byb3BzLFxufSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldFJvb20gfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrc1wiO1xuaW1wb3J0IHsgYnVpbGREb2N1bWVudEdyb3VwcyB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEdldCBhbGwgZ3JvdXBzIGF0dGFjaGVkIHRvIGEgZ2l2ZW4gZG9jdW1lbnQuXG4gKlxuICogQHBhcmFtIHJlcVxuICogQHBhcmFtIHJlc1xuICogQHBhcmFtIGRvY3VtZW50SWQgLSBUaGUgZG9jdW1lbnQncyBpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RG9jdW1lbnRHcm91cHMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQgfTogR2V0RG9jdW1lbnRHcm91cHNQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudEdyb3VwW10+PiB7XG4gIC8vIEdldCBzZXNzaW9uIGFuZCByb29tXG4gIGNvbnN0IHJvb20gPSBhd2FpdCBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pO1xuXG4gIC8vIEdldCB0aGUgcm9vbSBmcm9tIGRvY3VtZW50SWRcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcm9vbTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHN1Y2Nlc3NmdWwsIGNvbnZlcnQgcm9vbSB0byBhIGxpc3Qgb2YgZ3JvdXBzIGFuZCBzZW5kXG4gIGNvbnN0IHJlc3VsdDogRG9jdW1lbnRHcm91cFtdID0gYXdhaXQgYnVpbGREb2N1bWVudEdyb3VwcyhkYXRhKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiZ2V0Um9vbSIsImJ1aWxkRG9jdW1lbnRHcm91cHMiLCJnZXREb2N1bWVudEdyb3VwcyIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJyb29tIiwicm9vbUlkIiwiZGF0YSIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocumentGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocumentUsers.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/getDocumentUsers.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDocumentUsers\": () => (/* binding */ getDocumentUsers)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__]);\n_auth__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n/**\n * Get all collaborators in a given document.\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n */ async function getDocumentUsers(req, res, { documentId  }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_1__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Get the room from documentId\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // If successful, convert room to a list of collaborators and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_2__.buildDocumentUsers)(data, session?.user.info.id ?? \"\");\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudFVzZXJzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFNMkM7QUFDSDtBQUNNO0FBRTlDOzs7Ozs7Q0FNQyxHQUNNLGVBQWVHLGlCQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFdBQVUsRUFBeUIsRUFDSTtJQUN6Qyx1QkFBdUI7SUFDdkIsTUFBTSxDQUFDQyxTQUFTQyxLQUFLLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3hDVix1REFBZ0JBLENBQUNJLEtBQUtDO1FBQ3RCSixvREFBT0EsQ0FBQztZQUFFVSxRQUFRTDtRQUFXO0tBQzlCO0lBRUQsK0JBQStCO0lBQy9CLE1BQU0sRUFBRU0sS0FBSSxFQUFFQyxNQUFLLEVBQUUsR0FBR0w7SUFFeEIsSUFBSUssT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQixDQUFDO0lBRUQsSUFBSSxDQUFDRCxNQUFNO1FBQ1QsT0FBTztZQUNMQyxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxrRUFBa0U7SUFDbEUsTUFBTUMsU0FBeUIsTUFBTWYsMERBQWtCQSxDQUNyRFUsTUFDQUwsU0FBU1csS0FBS0MsSUFBSSxDQUFDQyxFQUFFLElBQUk7SUFFM0IsT0FBTztRQUFFUixNQUFNSztJQUFPO0FBQ3hCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudFVzZXJzLnRzPzg0MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudFVzZXIsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBHZXREb2N1bWVudFVzZXJzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRVc2VycyB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEdldCBhbGwgY29sbGFib3JhdG9ycyBpbiBhIGdpdmVuIGRvY3VtZW50LlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50VXNlcnMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQgfTogR2V0RG9jdW1lbnRVc2Vyc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50VXNlcltdPj4ge1xuICAvLyBHZXQgc2Vzc2lvbiBhbmQgcm9vbVxuICBjb25zdCBbc2Vzc2lvbiwgcm9vbV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgXSk7XG5cbiAgLy8gR2V0IHRoZSByb29tIGZyb20gZG9jdW1lbnRJZFxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY29udmVydCByb29tIHRvIGEgbGlzdCBvZiBjb2xsYWJvcmF0b3JzIGFuZCBzZW5kXG4gIGNvbnN0IHJlc3VsdDogRG9jdW1lbnRVc2VyW10gPSBhd2FpdCBidWlsZERvY3VtZW50VXNlcnMoXG4gICAgZGF0YSxcbiAgICBzZXNzaW9uPy51c2VyLmluZm8uaWQgPz8gXCJcIlxuICApO1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0Um9vbSIsImJ1aWxkRG9jdW1lbnRVc2VycyIsImdldERvY3VtZW50VXNlcnMiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwic2Vzc2lvbiIsInJvb20iLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZGF0YSIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwicmVzdWx0IiwidXNlciIsImluZm8iLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocumentUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getDocuments.ts":
/*!**********************************************!*\
  !*** ./lib/server/documents/getDocuments.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getDocuments\": () => (/* binding */ getDocuments)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Get a list of documents.\n * Filter by sending userId, groupIds, or metadata in the query, otherwise return all.\n * Only allow if authorized with NextAuth and user has access to each room.\n *\n * @param req\n * @param res\n * @param [userId] - Optional, filter to rooms with this userAccess set\n * @param [groupIds] - Optional, filter to rooms with these groupIds set (comma separated)\n * @param [documentType] - Optional, filter for this type of document e.g. \"canvas\"\n * @param [drafts] - Optional, retrieve only draft documents\n * @param [limit] - Optional, the amount of documents to retrieve\n */ async function getDocuments(req, res, { userId =\"\" , groupIds =[] , documentType , drafts , limit  }) {\n    // Build getRooms arguments\n    const metadata = {};\n    if (documentType) {\n        metadata[\"type\"] = documentType;\n    }\n    let getRoomsOptions = {\n        limit,\n        metadata\n    };\n    const draftGroupName = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.getDraftsGroupName)(userId);\n    if (drafts) {\n        // Drafts are stored as a group that uses the userId\n        getRoomsOptions = {\n            ...getRoomsOptions,\n            groupIds: [\n                draftGroupName\n            ]\n        };\n    } else {\n        // Not a draft, use other info\n        getRoomsOptions = {\n            ...getRoomsOptions,\n            groupIds: groupIds.filter((id)=>id !== draftGroupName),\n            userId: userId\n        };\n    }\n    // Get session and rooms\n    const [session, rooms] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRooms)(getRoomsOptions)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get documents\"\n            }\n        };\n    }\n    // Call Liveblocks API and get rooms\n    const { data , error  } = rooms;\n    if (error || !data) {\n        return {\n            error\n        };\n    }\n    // Check current logged-in user has access to each room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRooms)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead\n        ],\n        userId: session.user.info.id,\n        groupIds: groupIds,\n        rooms: data.data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Convert rooms to custom document format\n    const documents = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocuments)(data.data ?? []);\n    const result = {\n        documents: documents,\n        nextPage: data.nextPage\n    };\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXREb2N1bWVudHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFNd0I7QUFDbUI7QUFDRjtBQUNxQjtBQUNoQjtBQUU5Qzs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxlQUFlTSxhQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFFBQVMsR0FBRSxFQUFFQyxVQUFXLEVBQUUsR0FBRUMsYUFBWSxFQUFFQyxPQUFNLEVBQUVDLE1BQUssRUFBcUIsRUFDOUU7SUFDQSwyQkFBMkI7SUFDM0IsTUFBTUMsV0FBeUIsQ0FBQztJQUVoQyxJQUFJSCxjQUFjO1FBQ2hCRyxRQUFRLENBQUMsT0FBTyxHQUFHSDtJQUNyQixDQUFDO0lBRUQsSUFBSUksa0JBQWtEO1FBQ3BERjtRQUNBQztJQUNGO0lBRUEsTUFBTUUsaUJBQWlCWCwwREFBa0JBLENBQUNJO0lBRTFDLElBQUlHLFFBQVE7UUFDVixvREFBb0Q7UUFDcERHLGtCQUFrQjtZQUNoQixHQUFHQSxlQUFlO1lBQ2xCTCxVQUFVO2dCQUFDTTthQUFlO1FBQzVCO0lBQ0YsT0FBTztRQUNMLDhCQUE4QjtRQUM5QkQsa0JBQWtCO1lBQ2hCLEdBQUdBLGVBQWU7WUFDbEJMLFVBQVVBLFNBQVNPLE1BQU0sQ0FBQyxDQUFDQyxLQUFPQSxPQUFPRjtZQUN6Q1AsUUFBUUE7UUFDVjtJQUNGLENBQUM7SUFFRCx3QkFBd0I7SUFDeEIsTUFBTSxDQUFDVSxTQUFTQyxNQUFNLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3pDckIsdURBQWdCQSxDQUFDTSxLQUFLQztRQUN0Qk4scURBQVFBLENBQUNhO0tBQ1Y7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDSSxTQUFTO1FBQ1osT0FBTztZQUNMSSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxvQ0FBb0M7SUFDcEMsTUFBTSxFQUFFQyxLQUFJLEVBQUVKLE1BQUssRUFBRSxHQUFHSDtJQUV4QixJQUFJRyxTQUFTLENBQUNJLE1BQU07UUFDbEIsT0FBTztZQUFFSjtRQUFNO0lBQ2pCLENBQUM7SUFFRCx1REFBdUQ7SUFDdkQsSUFDRSxDQUFDbkIsMERBQWtCQSxDQUFDO1FBQ2xCd0IsaUJBQWlCO1lBQUM1Qix3REFBb0I7WUFBRUEsdURBQW1CO1NBQUM7UUFDNURTLFFBQVFVLFFBQVFZLElBQUksQ0FBQ0MsSUFBSSxDQUFDZCxFQUFFO1FBQzVCUixVQUFVQTtRQUNWVSxPQUFPTyxLQUFLQSxJQUFJO0lBQ2xCLElBQ0E7UUFDQSxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDBDQUEwQztJQUMxQyxNQUFNTyxZQUFZOUIsc0RBQWNBLENBQUN3QixLQUFLQSxJQUFJLElBQUksRUFBRTtJQUVoRCxNQUFNTyxTQUErQjtRQUNuQ0QsV0FBV0E7UUFDWEUsVUFBVVIsS0FBS1EsUUFBUTtJQUN6QjtJQUVBLE9BQU87UUFBRVIsTUFBTU87SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvZ2V0RG9jdW1lbnRzLnRzPzM3MDQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBHZXREb2N1bWVudHNQcm9wcyxcbiAgR2V0RG9jdW1lbnRzUmVzcG9uc2UsXG4gIFJvb21BY2Nlc3MsXG4gIFJvb21NZXRhZGF0YSxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldFJvb21zIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRzLCB1c2VyQWxsb3dlZEluUm9vbXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7IGdldERyYWZ0c0dyb3VwTmFtZSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2YgZG9jdW1lbnRzLlxuICogRmlsdGVyIGJ5IHNlbmRpbmcgdXNlcklkLCBncm91cElkcywgb3IgbWV0YWRhdGEgaW4gdGhlIHF1ZXJ5LCBvdGhlcndpc2UgcmV0dXJuIGFsbC5cbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoIGFuZCB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tLlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBbdXNlcklkXSAtIE9wdGlvbmFsLCBmaWx0ZXIgdG8gcm9vbXMgd2l0aCB0aGlzIHVzZXJBY2Nlc3Mgc2V0XG4gKiBAcGFyYW0gW2dyb3VwSWRzXSAtIE9wdGlvbmFsLCBmaWx0ZXIgdG8gcm9vbXMgd2l0aCB0aGVzZSBncm91cElkcyBzZXQgKGNvbW1hIHNlcGFyYXRlZClcbiAqIEBwYXJhbSBbZG9jdW1lbnRUeXBlXSAtIE9wdGlvbmFsLCBmaWx0ZXIgZm9yIHRoaXMgdHlwZSBvZiBkb2N1bWVudCBlLmcuIFwiY2FudmFzXCJcbiAqIEBwYXJhbSBbZHJhZnRzXSAtIE9wdGlvbmFsLCByZXRyaWV2ZSBvbmx5IGRyYWZ0IGRvY3VtZW50c1xuICogQHBhcmFtIFtsaW1pdF0gLSBPcHRpb25hbCwgdGhlIGFtb3VudCBvZiBkb2N1bWVudHMgdG8gcmV0cmlldmVcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERvY3VtZW50cyhcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgdXNlcklkID0gXCJcIiwgZ3JvdXBJZHMgPSBbXSwgZG9jdW1lbnRUeXBlLCBkcmFmdHMsIGxpbWl0IH06IEdldERvY3VtZW50c1Byb3BzXG4pIHtcbiAgLy8gQnVpbGQgZ2V0Um9vbXMgYXJndW1lbnRzXG4gIGNvbnN0IG1ldGFkYXRhOiBSb29tTWV0YWRhdGEgPSB7fTtcblxuICBpZiAoZG9jdW1lbnRUeXBlKSB7XG4gICAgbWV0YWRhdGFbXCJ0eXBlXCJdID0gZG9jdW1lbnRUeXBlO1xuICB9XG5cbiAgbGV0IGdldFJvb21zT3B0aW9uczogUGFyYW1ldGVyczx0eXBlb2YgZ2V0Um9vbXM+WzBdID0ge1xuICAgIGxpbWl0LFxuICAgIG1ldGFkYXRhLFxuICB9O1xuXG4gIGNvbnN0IGRyYWZ0R3JvdXBOYW1lID0gZ2V0RHJhZnRzR3JvdXBOYW1lKHVzZXJJZCk7XG5cbiAgaWYgKGRyYWZ0cykge1xuICAgIC8vIERyYWZ0cyBhcmUgc3RvcmVkIGFzIGEgZ3JvdXAgdGhhdCB1c2VzIHRoZSB1c2VySWRcbiAgICBnZXRSb29tc09wdGlvbnMgPSB7XG4gICAgICAuLi5nZXRSb29tc09wdGlvbnMsXG4gICAgICBncm91cElkczogW2RyYWZ0R3JvdXBOYW1lXSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIE5vdCBhIGRyYWZ0LCB1c2Ugb3RoZXIgaW5mb1xuICAgIGdldFJvb21zT3B0aW9ucyA9IHtcbiAgICAgIC4uLmdldFJvb21zT3B0aW9ucyxcbiAgICAgIGdyb3VwSWRzOiBncm91cElkcy5maWx0ZXIoKGlkKSA9PiBpZCAhPT0gZHJhZnRHcm91cE5hbWUpLFxuICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdldCBzZXNzaW9uIGFuZCByb29tc1xuICBjb25zdCBbc2Vzc2lvbiwgcm9vbXNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldFJvb21zKGdldFJvb21zT3B0aW9ucyksXG4gIF0pO1xuXG4gIC8vIENoZWNrIHVzZXIgaXMgbG9nZ2VkIGluXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IHNpZ25lZCBpblwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlNpZ24gaW4gdG8gZ2V0IGRvY3VtZW50c1wiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsbCBMaXZlYmxvY2tzIEFQSSBhbmQgZ2V0IHJvb21zXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb21zO1xuXG4gIGlmIChlcnJvciB8fCAhZGF0YSkge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb21zKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZDogW1Jvb21BY2Nlc3MuUm9vbVdyaXRlLCBSb29tQWNjZXNzLlJvb21SZWFkXSxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmluZm8uaWQsXG4gICAgICBncm91cElkczogZ3JvdXBJZHMsXG4gICAgICByb29tczogZGF0YS5kYXRhLFxuICAgIH0pXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDMsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGFsbG93ZWQgYWNjZXNzXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHRoZSBkb2N1bWVudFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ29udmVydCByb29tcyB0byBjdXN0b20gZG9jdW1lbnQgZm9ybWF0XG4gIGNvbnN0IGRvY3VtZW50cyA9IGJ1aWxkRG9jdW1lbnRzKGRhdGEuZGF0YSA/PyBbXSk7XG5cbiAgY29uc3QgcmVzdWx0OiBHZXREb2N1bWVudHNSZXNwb25zZSA9IHtcbiAgICBkb2N1bWVudHM6IGRvY3VtZW50cyxcbiAgICBuZXh0UGFnZTogZGF0YS5uZXh0UGFnZSxcbiAgfTtcblxuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFJvb21zIiwiYnVpbGREb2N1bWVudHMiLCJ1c2VyQWxsb3dlZEluUm9vbXMiLCJnZXREcmFmdHNHcm91cE5hbWUiLCJnZXREb2N1bWVudHMiLCJyZXEiLCJyZXMiLCJ1c2VySWQiLCJncm91cElkcyIsImRvY3VtZW50VHlwZSIsImRyYWZ0cyIsImxpbWl0IiwibWV0YWRhdGEiLCJnZXRSb29tc09wdGlvbnMiLCJkcmFmdEdyb3VwTmFtZSIsImZpbHRlciIsImlkIiwic2Vzc2lvbiIsInJvb21zIiwiUHJvbWlzZSIsImFsbCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsIlJvb21SZWFkIiwidXNlciIsImluZm8iLCJkb2N1bWVudHMiLCJyZXN1bHQiLCJuZXh0UGFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getLiveUsers.ts":
/*!**********************************************!*\
  !*** ./lib/server/documents/getLiveUsers.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getLiveUsers\": () => (/* binding */ getLiveUsers)\n/* harmony export */ });\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__]);\n_auth__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n/**\n * Retrieve the current live users in documents\n * Select documents by posting an array of documentIds in the body\n * Only allow if authorized with NextAuth\n *\n * @param req\n * @param res\n * @param documentIds - A list of document ids to select\n */ async function getLiveUsers(req, res, { documentIds  }) {\n    // Get session and active users\n    const [session, activeUsers] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_0__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_1__.getActiveUsersInRooms)({\n            roomIds: documentIds\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to access active users\"\n            }\n        };\n    }\n    // Check active users returned successfully\n    const { data , error  } = activeUsers;\n    if (error) {\n        return {\n            error\n        };\n    }\n    // If you'd like to filter which data about users is sent, do so here\n    // Example - only name is sent as live user data:\n    // data.forEach(room => room.users = room.users.map(\n    //   (user: ActiveUser) => ({ name: user.info.name })\n    // ))\n    return {\n        data\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXRMaXZlVXNlcnMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTTJDO0FBQ1c7QUFFdEQ7Ozs7Ozs7O0NBUUMsR0FDTSxlQUFlRSxhQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFlBQVcsRUFBcUIsRUFDWTtJQUM5QywrQkFBK0I7SUFDL0IsTUFBTSxDQUFDQyxTQUFTQyxZQUFZLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQy9DVCx1REFBZ0JBLENBQUNHLEtBQUtDO1FBQ3RCSCxrRUFBcUJBLENBQUM7WUFBRVMsU0FBU0w7UUFBWTtLQUM5QztJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNDLFNBQVM7UUFDWixPQUFPO1lBQ0xLLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDJDQUEyQztJQUMzQyxNQUFNLEVBQUVDLEtBQUksRUFBRUosTUFBSyxFQUFFLEdBQUdKO0lBRXhCLElBQUlJLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakIsQ0FBQztJQUVELHFFQUFxRTtJQUNyRSxpREFBaUQ7SUFDakQsb0RBQW9EO0lBQ3BELHFEQUFxRDtJQUNyRCxLQUFLO0lBRUwsT0FBTztRQUFFSTtJQUFLO0FBQ2hCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXRMaXZlVXNlcnMudHM/YWFjZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIEZldGNoQXBpUmVzdWx0LFxuICBHZXRMaXZlVXNlcnNQcm9wcyxcbiAgTGl2ZVVzZXJzUmVzcG9uc2UsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRBY3RpdmVVc2Vyc0luUm9vbXMgfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrc1wiO1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpdmUgdXNlcnMgaW4gZG9jdW1lbnRzXG4gKiBTZWxlY3QgZG9jdW1lbnRzIGJ5IHBvc3RpbmcgYW4gYXJyYXkgb2YgZG9jdW1lbnRJZHMgaW4gdGhlIGJvZHlcbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoXG4gKlxuICogQHBhcmFtIHJlcVxuICogQHBhcmFtIHJlc1xuICogQHBhcmFtIGRvY3VtZW50SWRzIC0gQSBsaXN0IG9mIGRvY3VtZW50IGlkcyB0byBzZWxlY3RcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExpdmVVc2VycyhcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgZG9jdW1lbnRJZHMgfTogR2V0TGl2ZVVzZXJzUHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8TGl2ZVVzZXJzUmVzcG9uc2VbXT4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIGFjdGl2ZSB1c2Vyc1xuICBjb25zdCBbc2Vzc2lvbiwgYWN0aXZlVXNlcnNdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldEFjdGl2ZVVzZXJzSW5Sb29tcyh7IHJvb21JZHM6IGRvY3VtZW50SWRzIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGFjY2VzcyBhY3RpdmUgdXNlcnNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGFjdGl2ZSB1c2VycyByZXR1cm5lZCBzdWNjZXNzZnVsbHlcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYWN0aXZlVXNlcnM7XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIC8vIElmIHlvdSdkIGxpa2UgdG8gZmlsdGVyIHdoaWNoIGRhdGEgYWJvdXQgdXNlcnMgaXMgc2VudCwgZG8gc28gaGVyZVxuICAvLyBFeGFtcGxlIC0gb25seSBuYW1lIGlzIHNlbnQgYXMgbGl2ZSB1c2VyIGRhdGE6XG4gIC8vIGRhdGEuZm9yRWFjaChyb29tID0+IHJvb20udXNlcnMgPSByb29tLnVzZXJzLm1hcChcbiAgLy8gICAodXNlcjogQWN0aXZlVXNlcikgPT4gKHsgbmFtZTogdXNlci5pbmZvLm5hbWUgfSlcbiAgLy8gKSlcblxuICByZXR1cm4geyBkYXRhIH07XG59XG4iXSwibmFtZXMiOlsiZ2V0U2VydmVyU2Vzc2lvbiIsImdldEFjdGl2ZVVzZXJzSW5Sb29tcyIsImdldExpdmVVc2VycyIsInJlcSIsInJlcyIsImRvY3VtZW50SWRzIiwic2Vzc2lvbiIsImFjdGl2ZVVzZXJzIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZHMiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getLiveUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/getNextDocuments.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/getNextDocuments.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getNextDocuments\": () => (/* binding */ getNextDocuments)\n/* harmony export */ });\n/* harmony import */ var base_64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! base-64 */ \"base-64\");\n/* harmony import */ var base_64__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(base_64__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_2__]);\n_auth__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Get the next rooms from the next param\n * The `next` param is retrieved from /pages/api/documents/index.ts\n * That API is called on the client within /lib/client/getDocumentsByGroup.ts\n * Only allow if authorized with NextAuth and user has access to each room.\n *\n * @param req\n * @param res\n * @param nextPage - String containing a URL to get the next set of rooms, returned from Liveblocks API\n */ async function getNextDocuments(req, res, { nextPage  }) {\n    // Get session and next rooms\n    const [session, nextRooms] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getNextRoom)({\n            next: (0,base_64__WEBPACK_IMPORTED_MODULE_0__.decode)(nextPage)\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get documents\"\n            }\n        };\n    }\n    // Get list of next rooms\n    const { data , error  } = nextRooms;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"No more rooms found\",\n                suggestion: \"No more rooms to paginate\"\n            }\n        };\n    }\n    // Check current logged-in user has access to each room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRooms)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite,\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomRead\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        rooms: data.data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Convert to our document format and return\n    const documents = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocuments)(data.data);\n    const result = {\n        documents: documents,\n        nextPage: data.nextPage\n    };\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9nZXROZXh0RG9jdW1lbnRzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFPVDtBQUNtQjtBQUNDO0FBQ2tCO0FBRTlEOzs7Ozs7Ozs7Q0FTQyxHQUNNLGVBQWVNLGlCQUNwQkMsR0FBcUMsRUFDckNDLEdBQXFDLEVBQ3JDLEVBQUVDLFNBQVEsRUFBeUIsRUFDWTtJQUMvQyw2QkFBNkI7SUFDN0IsTUFBTSxDQUFDQyxTQUFTQyxVQUFVLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQzdDWCx1REFBZ0JBLENBQUNLLEtBQUtDO1FBQ3RCTCx3REFBV0EsQ0FBQztZQUFFVyxNQUFNZCwrQ0FBTUEsQ0FBQ1M7UUFBVTtLQUN0QztJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNDLFNBQVM7UUFDWixPQUFPO1lBQ0xLLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELHlCQUF5QjtJQUN6QixNQUFNLEVBQUVDLEtBQUksRUFBRUosTUFBSyxFQUFFLEdBQUdKO0lBRXhCLElBQUlJLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakIsQ0FBQztJQUVELElBQUksQ0FBQ0ksTUFBTTtRQUNULE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsdURBQXVEO0lBQ3ZELElBQ0UsQ0FBQ2IsMERBQWtCQSxDQUFDO1FBQ2xCZSxpQkFBaUI7WUFBQ25CLHdEQUFvQjtZQUFFQSx1REFBbUI7U0FBQztRQUM1RHNCLFFBQVFiLFFBQVFjLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVakIsUUFBUWMsSUFBSSxDQUFDQyxJQUFJLENBQUNFLFFBQVE7UUFDcENDLE9BQU9ULEtBQUtBLElBQUk7SUFDbEIsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsNENBQTRDO0lBQzVDLE1BQU1XLFlBQVl6QixzREFBY0EsQ0FBQ2UsS0FBS0EsSUFBSTtJQUUxQyxNQUFNVyxTQUErQjtRQUNuQ0QsV0FBV0E7UUFDWHBCLFVBQVVVLEtBQUtWLFFBQVE7SUFDekI7SUFDQSxPQUFPO1FBQUVVLE1BQU1XO0lBQU87QUFDeEIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2dldE5leHREb2N1bWVudHMudHM/NzdlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwiYmFzZS02NFwiO1xuaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgR2V0RG9jdW1lbnRzUmVzcG9uc2UsXG4gIEdldE5leHREb2N1bWVudHNQcm9wcyxcbiAgUm9vbUFjY2Vzcyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldE5leHRSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnRzLCB1c2VyQWxsb3dlZEluUm9vbXMgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBHZXQgdGhlIG5leHQgcm9vbXMgZnJvbSB0aGUgbmV4dCBwYXJhbVxuICogVGhlIGBuZXh0YCBwYXJhbSBpcyByZXRyaWV2ZWQgZnJvbSAvcGFnZXMvYXBpL2RvY3VtZW50cy9pbmRleC50c1xuICogVGhhdCBBUEkgaXMgY2FsbGVkIG9uIHRoZSBjbGllbnQgd2l0aGluIC9saWIvY2xpZW50L2dldERvY3VtZW50c0J5R3JvdXAudHNcbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoIGFuZCB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tLlxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBuZXh0UGFnZSAtIFN0cmluZyBjb250YWluaW5nIGEgVVJMIHRvIGdldCB0aGUgbmV4dCBzZXQgb2Ygcm9vbXMsIHJldHVybmVkIGZyb20gTGl2ZWJsb2NrcyBBUElcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE5leHREb2N1bWVudHMoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IG5leHRQYWdlIH06IEdldE5leHREb2N1bWVudHNQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXREb2N1bWVudHNSZXNwb25zZT4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIG5leHQgcm9vbXNcbiAgY29uc3QgW3Nlc3Npb24sIG5leHRSb29tc10gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0TmV4dFJvb20oeyBuZXh0OiBkZWNvZGUobmV4dFBhZ2UpIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGdldCBkb2N1bWVudHNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIEdldCBsaXN0IG9mIG5leHQgcm9vbXNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gbmV4dFJvb21zO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIk5vIG1vcmUgcm9vbXMgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJObyBtb3JlIHJvb21zIHRvIHBhZ2luYXRlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBhY2Nlc3MgdG8gZWFjaCByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb21zKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZDogW1Jvb21BY2Nlc3MuUm9vbVdyaXRlLCBSb29tQWNjZXNzLlJvb21SZWFkXSxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmluZm8uaWQsXG4gICAgICBncm91cElkczogc2Vzc2lvbi51c2VyLmluZm8uZ3JvdXBJZHMsXG4gICAgICByb29tczogZGF0YS5kYXRhLFxuICAgIH0pXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDMsXG4gICAgICAgIG1lc3NhZ2U6IFwiTm90IGFsbG93ZWQgYWNjZXNzXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHRoZSBkb2N1bWVudFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ29udmVydCB0byBvdXIgZG9jdW1lbnQgZm9ybWF0IGFuZCByZXR1cm5cbiAgY29uc3QgZG9jdW1lbnRzID0gYnVpbGREb2N1bWVudHMoZGF0YS5kYXRhKTtcblxuICBjb25zdCByZXN1bHQ6IEdldERvY3VtZW50c1Jlc3BvbnNlID0ge1xuICAgIGRvY3VtZW50czogZG9jdW1lbnRzLFxuICAgIG5leHRQYWdlOiBkYXRhLm5leHRQYWdlLFxuICB9O1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJkZWNvZGUiLCJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldE5leHRSb29tIiwiYnVpbGREb2N1bWVudHMiLCJ1c2VyQWxsb3dlZEluUm9vbXMiLCJnZXROZXh0RG9jdW1lbnRzIiwicmVxIiwicmVzIiwibmV4dFBhZ2UiLCJzZXNzaW9uIiwibmV4dFJvb21zIiwiUHJvbWlzZSIsImFsbCIsIm5leHQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJSb29tUmVhZCIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInJvb21zIiwiZG9jdW1lbnRzIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/getNextDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/index.ts":
/*!***************************************!*\
  !*** ./lib/server/documents/index.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _createDocument__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./createDocument */ \"(api)/./lib/server/documents/createDocument.ts\");\n/* harmony import */ var _deleteDocument__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./deleteDocument */ \"(api)/./lib/server/documents/deleteDocument.ts\");\n/* harmony import */ var _getDocument__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./getDocument */ \"(api)/./lib/server/documents/getDocument.ts\");\n/* harmony import */ var _getDocuments__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getDocuments */ \"(api)/./lib/server/documents/getDocuments.ts\");\n/* harmony import */ var _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getDocumentGroups */ \"(api)/./lib/server/documents/getDocumentGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocumentGroups__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getDocumentUsers */ \"(api)/./lib/server/documents/getDocumentUsers.ts\");\n/* harmony import */ var _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getLiveUsers */ \"(api)/./lib/server/documents/getLiveUsers.ts\");\n/* harmony import */ var _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getNextDocuments */ \"(api)/./lib/server/documents/getNextDocuments.ts\");\n/* harmony import */ var _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./removeGroupAccess */ \"(api)/./lib/server/documents/removeGroupAccess.ts\");\n/* harmony import */ var _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./removeUserAccess */ \"(api)/./lib/server/documents/removeUserAccess.ts\");\n/* harmony import */ var _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./updateDefaultAccess */ \"(api)/./lib/server/documents/updateDefaultAccess.ts\");\n/* harmony import */ var _updateDocument__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./updateDocument */ \"(api)/./lib/server/documents/updateDocument.ts\");\n/* harmony import */ var _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./updateGroupAccess */ \"(api)/./lib/server/documents/updateGroupAccess.ts\");\n/* harmony import */ var _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./updateUserAccess */ \"(api)/./lib/server/documents/updateUserAccess.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_createDocument__WEBPACK_IMPORTED_MODULE_0__, _deleteDocument__WEBPACK_IMPORTED_MODULE_1__, _getDocument__WEBPACK_IMPORTED_MODULE_2__, _getDocuments__WEBPACK_IMPORTED_MODULE_3__, _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__, _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__, _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__, _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__, _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__, _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__, _updateDocument__WEBPACK_IMPORTED_MODULE_11__, _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__, _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__]);\n([_createDocument__WEBPACK_IMPORTED_MODULE_0__, _deleteDocument__WEBPACK_IMPORTED_MODULE_1__, _getDocument__WEBPACK_IMPORTED_MODULE_2__, _getDocuments__WEBPACK_IMPORTED_MODULE_3__, _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__, _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__, _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__, _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__, _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__, _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__, _updateDocument__WEBPACK_IMPORTED_MODULE_11__, _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__, _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _createDocument__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _createDocument__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deleteDocument__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deleteDocument__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocument__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocument__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocuments__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocuments__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDocumentUsers__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getLiveUsers__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getNextDocuments__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _removeGroupAccess__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _removeUserAccess__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateDefaultAccess__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateDocument__WEBPACK_IMPORTED_MODULE_11__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateDocument__WEBPACK_IMPORTED_MODULE_11__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateGroupAccess__WEBPACK_IMPORTED_MODULE_12__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateUserAccess__WEBPACK_IMPORTED_MODULE_13__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDQTtBQUNIO0FBQ0M7QUFDSztBQUNEO0FBQ0o7QUFDSTtBQUNDO0FBQ0Q7QUFDRztBQUNMO0FBQ0c7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL2luZGV4LnRzPzZhOGEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vY3JlYXRlRG9jdW1lbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RlbGV0ZURvY3VtZW50XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREb2N1bWVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0RG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREb2N1bWVudEdyb3Vwc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0RG9jdW1lbnRVc2Vyc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0TGl2ZVVzZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXROZXh0RG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9yZW1vdmVHcm91cEFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcmVtb3ZlVXNlckFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXBkYXRlRGVmYXVsdEFjY2Vzc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdXBkYXRlRG9jdW1lbnRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3VwZGF0ZUdyb3VwQWNjZXNzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91cGRhdGVVc2VyQWNjZXNzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/removeGroupAccess.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/removeGroupAccess.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"removeGroupAccess\": () => (/* binding */ removeGroupAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Remove a group from a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param groupId - The removed group's id\n */ async function removeGroupAccess(req, res, { documentId , groupId  }) {\n    // Get session, room, and group\n    const [session, room, group] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getGroup)(groupId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to delete groups\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user is set as a user with id, ignoring groupIds and default access\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: [],\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to remove groups from the room\"\n            }\n        };\n    }\n    // Check group exists in system\n    if (!group) {\n        return {\n            error: {\n                code: 400,\n                message: \"Group does not exist\",\n                suggestion: `Check that that group ${groupId} exists in the system`\n            }\n        };\n    }\n    // If room exists, create groupsAccess element for removing the current group\n    const groupsAccesses = {\n        [groupId]: null\n    };\n    // Update the room with the new group\n    const { data: updatedRoom , error: updateRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        groupsAccesses: groupsAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated group not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentGroups)(updatedRoom);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9yZW1vdmVHcm91cEFjY2Vzcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFPd0I7QUFDbUI7QUFDSjtBQUNhO0FBQ2M7QUFFbEU7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZVEsa0JBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsV0FBVSxFQUFFQyxRQUFPLEVBQTBCLEVBQ0w7SUFDMUMsK0JBQStCO0lBQy9CLE1BQU0sQ0FBQ0MsU0FBU0MsTUFBTUMsTUFBTSxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUMvQ2YsdURBQWdCQSxDQUFDTyxLQUFLQztRQUN0Qk4sb0RBQU9BLENBQUM7WUFBRWMsUUFBUVA7UUFBVztRQUM3QlIsbURBQVFBLENBQUNTO0tBQ1Y7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDQyxTQUFTO1FBQ1osT0FBTztZQUNMTSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFQyxLQUFJLEVBQUVKLE1BQUssRUFBRSxHQUFHTDtJQUV4QixJQUFJSyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNJLE1BQU07UUFDVCxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDhGQUE4RjtJQUM5RixJQUNFLENBQUNmLHlEQUFpQkEsQ0FBQztRQUNqQmlCLGlCQUFpQjtZQUFDeEIsd0RBQW9CO1NBQUM7UUFDdkMwQixtQkFBbUI7WUFBQ3pCLHlEQUFxQjtTQUFDO1FBQzFDMkIsUUFBUWYsUUFBUWdCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVLEVBQUU7UUFDWmxCLE1BQU1TO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFDRTtZQUNKO1FBQ0Y7SUFDRixDQUFDO0lBRUQsK0JBQStCO0lBQy9CLElBQUksQ0FBQ1AsT0FBTztRQUNWLE9BQU87WUFDTEksT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWSxDQUFDLHNCQUFzQixFQUFFVixRQUFRLHFCQUFxQixDQUFDO1lBQ3JFO1FBQ0Y7SUFDRixDQUFDO0lBRUQsNkVBQTZFO0lBQzdFLE1BQU1xQixpQkFBaUI7UUFDckIsQ0FBQ3JCLFFBQVEsRUFBRSxJQUFJO0lBQ2pCO0lBRUEscUNBQXFDO0lBQ3JDLE1BQU0sRUFBRVcsTUFBTVcsWUFBVyxFQUFFZixPQUFPZ0IsZ0JBQWUsRUFBRSxHQUFHLE1BQU05Qix1REFBVUEsQ0FBQztRQUNyRWEsUUFBUVA7UUFDUnNCLGdCQUFnQkE7SUFDbEI7SUFFQSxJQUFJRSxpQkFBaUI7UUFDbkIsT0FBTztZQUFFaEIsT0FBT2dCO1FBQWdCO0lBQ2xDLENBQUM7SUFFRCxJQUFJLENBQUNELGFBQWE7UUFDaEIsT0FBTztZQUNMZixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCwyREFBMkQ7SUFDM0QsTUFBTWMsU0FBMEIsTUFBTTlCLDJEQUFtQkEsQ0FBQzRCO0lBQzFELE9BQU87UUFBRVgsTUFBTWE7SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvcmVtb3ZlR3JvdXBBY2Nlc3MudHM/MTA1MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50R3JvdXAsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSZW1vdmVHcm91cEFjY2Vzc1Byb3BzLFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzTGV2ZWxzLFxufSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiLi4vYXV0aFwiO1xuaW1wb3J0IHsgZ2V0R3JvdXAgfSBmcm9tIFwiLi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldFJvb20sIHVwZGF0ZVJvb20gfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrc1wiO1xuaW1wb3J0IHsgYnVpbGREb2N1bWVudEdyb3VwcywgdXNlckFsbG93ZWRJblJvb20gfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBSZW1vdmUgYSBncm91cCBmcm9tIGEgZG9jdW1lbnRcbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoIGFuZCBpcyBhZGRlZCBhcyBhIHVzZXJJZCBvbiB1c2Vyc0FjY2Vzc2VzXG4gKiBEbyBub3QgYWxsb3cgaWYgcHVibGljIGFjY2Vzcywgb3IgYWNjZXNzIGdyYW50ZWQgdGhyb3VnaCBncm91cElkc1xuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqIEBwYXJhbSBncm91cElkIC0gVGhlIHJlbW92ZWQgZ3JvdXAncyBpZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlR3JvdXBBY2Nlc3MoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQsIGdyb3VwSWQgfTogUmVtb3ZlR3JvdXBBY2Nlc3NQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudEdyb3VwW10+PiB7XG4gIC8vIEdldCBzZXNzaW9uLCByb29tLCBhbmQgZ3JvdXBcbiAgY29uc3QgW3Nlc3Npb24sIHJvb20sIGdyb3VwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICAgIGdldEdyb3VwKGdyb3VwSWQpLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGRlbGV0ZSBncm91cHNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoZSByb29tIGBkb2N1bWVudElkYCBleGlzdHNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcm9vbTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaXMgc2V0IGFzIGEgdXNlciB3aXRoIGlkLCBpZ25vcmluZyBncm91cElkcyBhbmQgZGVmYXVsdCBhY2Nlc3NcbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gICAgICBjaGVja0FjY2Vzc0xldmVsczogW1Jvb21BY2Nlc3NMZXZlbHMuVVNFUl0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pbmZvLmlkLFxuICAgICAgZ3JvdXBJZHM6IFtdLFxuICAgICAgcm9vbTogZGF0YSxcbiAgICB9KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBhbGxvd2VkIGFjY2Vzc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOlxuICAgICAgICAgIFwiQ2hlY2sgdGhhdCB5b3UndmUgYmVlbiBnaXZlbiBwZXJtaXNzaW9uIHRvIHJlbW92ZSBncm91cHMgZnJvbSB0aGUgcm9vbVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgZ3JvdXAgZXhpc3RzIGluIHN5c3RlbVxuICBpZiAoIWdyb3VwKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMCxcbiAgICAgICAgbWVzc2FnZTogXCJHcm91cCBkb2VzIG5vdCBleGlzdFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBgQ2hlY2sgdGhhdCB0aGF0IGdyb3VwICR7Z3JvdXBJZH0gZXhpc3RzIGluIHRoZSBzeXN0ZW1gLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgcm9vbSBleGlzdHMsIGNyZWF0ZSBncm91cHNBY2Nlc3MgZWxlbWVudCBmb3IgcmVtb3ZpbmcgdGhlIGN1cnJlbnQgZ3JvdXBcbiAgY29uc3QgZ3JvdXBzQWNjZXNzZXMgPSB7XG4gICAgW2dyb3VwSWRdOiBudWxsLFxuICB9O1xuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgZ3JvdXBcbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUm9vbSwgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgcm9vbUlkOiBkb2N1bWVudElkLFxuICAgIGdyb3Vwc0FjY2Vzc2VzOiBncm91cHNBY2Nlc3NlcyxcbiAgfSk7XG5cbiAgaWYgKHVwZGF0ZVJvb21FcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yOiB1cGRhdGVSb29tRXJyb3IgfTtcbiAgfVxuXG4gIGlmICghdXBkYXRlZFJvb20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlVwZGF0ZWQgZ3JvdXAgbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ29udGFjdCBhbiBhZG1pbmlzdHJhdG9yXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiBzdWNjZXNzZnVsLCBjb252ZXJ0IHJvb20gdG8gYSBsaXN0IG9mIGdyb3VwcyBhbmQgc2VuZFxuICBjb25zdCByZXN1bHQ6IERvY3VtZW50R3JvdXBbXSA9IGF3YWl0IGJ1aWxkRG9jdW1lbnRHcm91cHModXBkYXRlZFJvb20pO1xuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiUm9vbUFjY2Vzc0xldmVscyIsImdldFNlcnZlclNlc3Npb24iLCJnZXRHcm91cCIsImdldFJvb20iLCJ1cGRhdGVSb29tIiwiYnVpbGREb2N1bWVudEdyb3VwcyIsInVzZXJBbGxvd2VkSW5Sb29tIiwicmVtb3ZlR3JvdXBBY2Nlc3MiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwiZ3JvdXBJZCIsInNlc3Npb24iLCJyb29tIiwiZ3JvdXAiLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwiY2hlY2tBY2Nlc3NMZXZlbHMiLCJVU0VSIiwidXNlcklkIiwidXNlciIsImluZm8iLCJpZCIsImdyb3VwSWRzIiwiZ3JvdXBzQWNjZXNzZXMiLCJ1cGRhdGVkUm9vbSIsInVwZGF0ZVJvb21FcnJvciIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/removeGroupAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/removeUserAccess.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/removeUserAccess.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"removeUserAccess\": () => (/* binding */ removeUserAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Remove a collaborator from a document\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param userId - The removed user's id\n */ async function removeUserAccess(req, res, { documentId , userId  }) {\n    // Get session, room, and user\n    const [session, room, user] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getUser)(userId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to remove a user\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user is set as a user with id, ignoring groupIds and default access\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: [],\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Check user exists in system\n    if (!user) {\n        return {\n            error: {\n                code: 400,\n                message: \"User not found\",\n                suggestion: \"Check that you've used the correct user id\"\n            }\n        };\n    }\n    // If user exists, check that they are not the owner\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_4__.isUserDocumentOwner)({\n        room: currentRoom,\n        userId: userId\n    })) {\n        return {\n            error: {\n                code: 400,\n                message: \"User is owner\",\n                suggestion: `User ${userId} is the document owner and cannot be edited`\n            }\n        };\n    }\n    // If room exists, create userAccess element for removing the current collaborator\n    const usersAccesses = {\n        [userId]: null\n    };\n    // Update the room with the new collaborators\n    const { data: updatedRoom , error: updateRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        usersAccesses: usersAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentUsers)(updatedRoom, session.user.info.id);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy9yZW1vdmVVc2VyQWNjZXNzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQU93QjtBQUNtQjtBQUNMO0FBQ2M7QUFLbEM7QUFFbEI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZVMsaUJBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsV0FBVSxFQUFFQyxPQUFNLEVBQXlCLEVBQ0o7SUFDekMsOEJBQThCO0lBQzlCLE1BQU0sQ0FBQ0MsU0FBU0MsTUFBTUMsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUM5Q2hCLHVEQUFnQkEsQ0FBQ1EsS0FBS0M7UUFDdEJQLG9EQUFPQSxDQUFDO1lBQUVlLFFBQVFQO1FBQVc7UUFDN0JULGtEQUFPQSxDQUFDVTtLQUNUO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0MsU0FBUztRQUNaLE9BQU87WUFDTE0sT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU0sRUFBRUMsTUFBTUMsWUFBVyxFQUFFTCxNQUFLLEVBQUUsR0FBR0w7SUFFckMsSUFBSUssT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQixDQUFDO0lBRUQsSUFBSSxDQUFDSyxhQUFhO1FBQ2hCLE9BQU87WUFDTEwsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsOEZBQThGO0lBQzlGLElBQ0UsQ0FBQ2YseURBQWlCQSxDQUFDO1FBQ2pCa0IsaUJBQWlCO1lBQUMxQix3REFBb0I7U0FBQztRQUN2QzRCLG1CQUFtQjtZQUFDM0IseURBQXFCO1NBQUM7UUFDMUNZLFFBQVFDLFFBQVFFLElBQUksQ0FBQ2MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVLEVBQUU7UUFDWmpCLE1BQU1VO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEwsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsOEJBQThCO0lBQzlCLElBQUksQ0FBQ1AsTUFBTTtRQUNULE9BQU87WUFDTEksT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsb0RBQW9EO0lBQ3BELElBQUloQiwyREFBbUJBLENBQUM7UUFBRVEsTUFBTVU7UUFBYVosUUFBUUE7SUFBTyxJQUFJO1FBQzlELE9BQU87WUFDTE8sT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWSxDQUFDLEtBQUssRUFBRVYsT0FBTywyQ0FBMkMsQ0FBQztZQUN6RTtRQUNGO0lBQ0YsQ0FBQztJQUVELGtGQUFrRjtJQUNsRixNQUFNb0IsZ0JBQWdCO1FBQ3BCLENBQUNwQixPQUFPLEVBQUUsSUFBSTtJQUNoQjtJQUVBLDZDQUE2QztJQUM3QyxNQUFNLEVBQUVXLE1BQU1VLFlBQVcsRUFBRWQsT0FBT2UsZ0JBQWUsRUFBRSxHQUFHLE1BQU05Qix1REFBVUEsQ0FBQztRQUNyRWMsUUFBUVA7UUFDUnFCLGVBQWVBO0lBQ2pCO0lBRUEsSUFBSUUsaUJBQWlCO1FBQ25CLE9BQU87WUFBRWYsT0FBT2U7UUFBZ0I7SUFDbEMsQ0FBQztJQUVELElBQUksQ0FBQ0QsYUFBYTtRQUNoQixPQUFPO1lBQ0xkLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELE1BQU1hLFNBQXlCLE1BQU05QiwwREFBa0JBLENBQ3JENEIsYUFDQXBCLFFBQVFFLElBQUksQ0FBQ2MsSUFBSSxDQUFDQyxFQUFFO0lBRXRCLE9BQU87UUFBRVAsTUFBTVk7SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvcmVtb3ZlVXNlckFjY2Vzcy50cz83YmYyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnRVc2VyLFxuICBGZXRjaEFwaVJlc3VsdCxcbiAgUmVtb3ZlVXNlckFjY2Vzc1Byb3BzLFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzTGV2ZWxzLFxufSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwiLi4vYXV0aFwiO1xuaW1wb3J0IHsgZ2V0VXNlciB9IGZyb20gXCIuLi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgZ2V0Um9vbSwgdXBkYXRlUm9vbSB9IGZyb20gXCIuLi9saXZlYmxvY2tzXCI7XG5pbXBvcnQge1xuICBidWlsZERvY3VtZW50VXNlcnMsXG4gIGlzVXNlckRvY3VtZW50T3duZXIsXG4gIHVzZXJBbGxvd2VkSW5Sb29tLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBSZW1vdmUgYSBjb2xsYWJvcmF0b3IgZnJvbSBhIGRvY3VtZW50XG4gKiBPbmx5IGFsbG93IGlmIGF1dGhvcml6ZWQgd2l0aCBOZXh0QXV0aCBhbmQgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCdzIGlkXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHJlbW92ZWQgdXNlcidzIGlkXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVVc2VyQWNjZXNzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkLCB1c2VySWQgfTogUmVtb3ZlVXNlckFjY2Vzc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50VXNlcltdPj4ge1xuICAvLyBHZXQgc2Vzc2lvbiwgcm9vbSwgYW5kIHVzZXJcbiAgY29uc3QgW3Nlc3Npb24sIHJvb20sIHVzZXJdID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMpLFxuICAgIGdldFJvb20oeyByb29tSWQ6IGRvY3VtZW50SWQgfSksXG4gICAgZ2V0VXNlcih1c2VySWQpLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIHJlbW92ZSBhIHVzZXJcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoZSByb29tIGBkb2N1bWVudElkYCBleGlzdHNcbiAgY29uc3QgeyBkYXRhOiBjdXJyZW50Um9vbSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghY3VycmVudFJvb20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgY3VycmVudCBsb2dnZWQtaW4gdXNlciBpcyBzZXQgYXMgYSB1c2VyIHdpdGggaWQsIGlnbm9yaW5nIGdyb3VwSWRzIGFuZCBkZWZhdWx0IGFjY2Vzc1xuICBpZiAoXG4gICAgIXVzZXJBbGxvd2VkSW5Sb29tKHtcbiAgICAgIGFjY2Vzc2VzQWxsb3dlZDogW1Jvb21BY2Nlc3MuUm9vbVdyaXRlXSxcbiAgICAgIGNoZWNrQWNjZXNzTGV2ZWxzOiBbUm9vbUFjY2Vzc0xldmVscy5VU0VSXSxcbiAgICAgIHVzZXJJZDogc2Vzc2lvbi51c2VyLmluZm8uaWQsXG4gICAgICBncm91cElkczogW10sXG4gICAgICByb29tOiBjdXJyZW50Um9vbSxcbiAgICB9KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBhbGxvd2VkIGFjY2Vzc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIGJlZW4gZ2l2ZW4gcGVybWlzc2lvbiB0byB0aGUgZG9jdW1lbnRcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHVzZXIgZXhpc3RzIGluIHN5c3RlbVxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAwLFxuICAgICAgICBtZXNzYWdlOiBcIlVzZXIgbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UndmUgdXNlZCB0aGUgY29ycmVjdCB1c2VyIGlkXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiB1c2VyIGV4aXN0cywgY2hlY2sgdGhhdCB0aGV5IGFyZSBub3QgdGhlIG93bmVyXG4gIGlmIChpc1VzZXJEb2N1bWVudE93bmVyKHsgcm9vbTogY3VycmVudFJvb20sIHVzZXJJZDogdXNlcklkIH0pKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMCxcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIGlzIG93bmVyXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IGBVc2VyICR7dXNlcklkfSBpcyB0aGUgZG9jdW1lbnQgb3duZXIgYW5kIGNhbm5vdCBiZSBlZGl0ZWRgLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgcm9vbSBleGlzdHMsIGNyZWF0ZSB1c2VyQWNjZXNzIGVsZW1lbnQgZm9yIHJlbW92aW5nIHRoZSBjdXJyZW50IGNvbGxhYm9yYXRvclxuICBjb25zdCB1c2Vyc0FjY2Vzc2VzID0ge1xuICAgIFt1c2VySWRdOiBudWxsLFxuICB9O1xuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgY29sbGFib3JhdG9yc1xuICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRSb29tLCBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH0gPSBhd2FpdCB1cGRhdGVSb29tKHtcbiAgICByb29tSWQ6IGRvY3VtZW50SWQsXG4gICAgdXNlcnNBY2Nlc3NlczogdXNlcnNBY2Nlc3NlcyxcbiAgfSk7XG5cbiAgaWYgKHVwZGF0ZVJvb21FcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yOiB1cGRhdGVSb29tRXJyb3IgfTtcbiAgfVxuXG4gIGlmICghdXBkYXRlZFJvb20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlVwZGF0ZWQgcm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDb250YWN0IGFuIGFkbWluaXN0cmF0b3JcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHJlc3VsdDogRG9jdW1lbnRVc2VyW10gPSBhd2FpdCBidWlsZERvY3VtZW50VXNlcnMoXG4gICAgdXBkYXRlZFJvb20sXG4gICAgc2Vzc2lvbi51c2VyLmluZm8uaWRcbiAgKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsIlJvb21BY2Nlc3NMZXZlbHMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0VXNlciIsImdldFJvb20iLCJ1cGRhdGVSb29tIiwiYnVpbGREb2N1bWVudFVzZXJzIiwiaXNVc2VyRG9jdW1lbnRPd25lciIsInVzZXJBbGxvd2VkSW5Sb29tIiwicmVtb3ZlVXNlckFjY2VzcyIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJ1c2VySWQiLCJzZXNzaW9uIiwicm9vbSIsInVzZXIiLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiY3VycmVudFJvb20iLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJjaGVja0FjY2Vzc0xldmVscyIsIlVTRVIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInVzZXJzQWNjZXNzZXMiLCJ1cGRhdGVkUm9vbSIsInVwZGF0ZVJvb21FcnJvciIsInJlc3VsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/removeUserAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateDefaultAccess.ts":
/*!*****************************************************!*\
  !*** ./lib/server/documents/updateDefaultAccess.ts ***!
  \*****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateDefaultAccess\": () => (/* binding */ updateDefaultAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * POST Default access - used in /lib/client/updateDocumentScope.ts\n *\n * Update the default access for a document to public or private\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param access - The new default access: \"public\" or \"private\"\n */ async function updateDefaultAccess(req, res, { documentId , access  }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update public access level\"\n            }\n        };\n    }\n    // Check the room exists\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // If room exists, create default access parameter for room\n    const defaultAccesses = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.documentAccessToRoomAccesses)(access);\n    // Update the room with the new default access\n    const { data: updatedRoom , error: updateRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.updateRoom)({\n        roomId: documentId,\n        defaultAccesses: defaultAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, covert to custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(updatedRoom);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVEZWZhdWx0QWNjZXNzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBTXdCO0FBQ21CO0FBQ1M7QUFLbEM7QUFFbEI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZU8sb0JBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsV0FBVSxFQUFFQyxPQUFNLEVBQTRCLEVBQ2I7SUFDbkMsdUJBQXVCO0lBQ3ZCLE1BQU0sQ0FBQ0MsU0FBU0MsS0FBSyxHQUFHLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQztRQUN4Q2QsdURBQWdCQSxDQUFDTyxLQUFLQztRQUN0QlAsb0RBQU9BLENBQUM7WUFBRWMsUUFBUU47UUFBVztLQUM5QjtJQUVELDBCQUEwQjtJQUMxQixJQUFJLENBQUNFLFNBQVM7UUFDWixPQUFPO1lBQ0xLLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELHdCQUF3QjtJQUN4QixNQUFNLEVBQUVDLEtBQUksRUFBRUosTUFBSyxFQUFFLEdBQUdKO0lBRXhCLElBQUlJLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakIsQ0FBQztJQUVELElBQUksQ0FBQ0ksTUFBTTtRQUNULE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsc0RBQXNEO0lBQ3RELElBQ0UsQ0FBQ2QseURBQWlCQSxDQUFDO1FBQ2pCZ0IsaUJBQWlCO1lBQUN0Qix3REFBb0I7U0FBQztRQUN2Q3dCLFFBQVFaLFFBQVFhLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO1FBQzVCQyxVQUFVaEIsUUFBUWEsSUFBSSxDQUFDQyxJQUFJLENBQUNFLFFBQVE7UUFDcENmLE1BQU1RO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsMkRBQTJEO0lBQzNELE1BQU1TLGtCQUFrQnhCLG9FQUE0QkEsQ0FBQ007SUFFckQsOENBQThDO0lBQzlDLE1BQU0sRUFBRVUsTUFBTVMsWUFBVyxFQUFFYixPQUFPYyxnQkFBZSxFQUFFLEdBQUcsTUFBTTVCLHVEQUFVQSxDQUFDO1FBQ3JFYSxRQUFRTjtRQUNSbUIsaUJBQWlCQTtJQUNuQjtJQUVBLElBQUlFLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVkLE9BQU9jO1FBQWdCO0lBQ2xDLENBQUM7SUFFRCxJQUFJLENBQUNELGFBQWE7UUFDaEIsT0FBTztZQUNMYixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCw2REFBNkQ7SUFDN0QsTUFBTVksV0FBcUI1QixxREFBYUEsQ0FBQzBCO0lBQ3pDLE9BQU87UUFBRVQsTUFBTVc7SUFBUztBQUMxQixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvdXBkYXRlRGVmYXVsdEFjY2Vzcy50cz9jZTcxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnQsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBVcGRhdGVEZWZhdWx0QWNjZXNzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7XG4gIGJ1aWxkRG9jdW1lbnQsXG4gIGRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMsXG4gIHVzZXJBbGxvd2VkSW5Sb29tLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBQT1NUIERlZmF1bHQgYWNjZXNzIC0gdXNlZCBpbiAvbGliL2NsaWVudC91cGRhdGVEb2N1bWVudFNjb3BlLnRzXG4gKlxuICogVXBkYXRlIHRoZSBkZWZhdWx0IGFjY2VzcyBmb3IgYSBkb2N1bWVudCB0byBwdWJsaWMgb3IgcHJpdmF0ZVxuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqIEBwYXJhbSBhY2Nlc3MgLSBUaGUgbmV3IGRlZmF1bHQgYWNjZXNzOiBcInB1YmxpY1wiIG9yIFwicHJpdmF0ZVwiXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEZWZhdWx0QWNjZXNzKFxuICByZXE6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXFcIl0sXG4gIHJlczogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlc1wiXSxcbiAgeyBkb2N1bWVudElkLCBhY2Nlc3MgfTogVXBkYXRlRGVmYXVsdEFjY2Vzc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50Pj4ge1xuICAvLyBHZXQgc2Vzc2lvbiBhbmQgcm9vbVxuICBjb25zdCBbc2Vzc2lvbiwgcm9vbV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgZ2V0U2VydmVyU2Vzc2lvbihyZXEsIHJlcyksXG4gICAgZ2V0Um9vbSh7IHJvb21JZDogZG9jdW1lbnRJZCB9KSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byB1cGRhdGUgcHVibGljIGFjY2VzcyBsZXZlbFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgdGhlIHJvb20gZXhpc3RzXG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiUm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSdyZSBvbiB0aGUgY29ycmVjdCBwYWdlXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayBjdXJyZW50IGxvZ2dlZC1pbiB1c2VyIGhhcyBhY2Nlc3MgdG8gdGhlIHJvb21cbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pbmZvLmlkLFxuICAgICAgZ3JvdXBJZHM6IHNlc3Npb24udXNlci5pbmZvLmdyb3VwSWRzLFxuICAgICAgcm9vbTogZGF0YSxcbiAgICB9KVxuICApIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBhbGxvd2VkIGFjY2Vzc1wiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIGJlZW4gZ2l2ZW4gcGVybWlzc2lvbiB0byB0aGUgcm9vbVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgcm9vbSBleGlzdHMsIGNyZWF0ZSBkZWZhdWx0IGFjY2VzcyBwYXJhbWV0ZXIgZm9yIHJvb21cbiAgY29uc3QgZGVmYXVsdEFjY2Vzc2VzID0gZG9jdW1lbnRBY2Nlc3NUb1Jvb21BY2Nlc3NlcyhhY2Nlc3MpO1xuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgZGVmYXVsdCBhY2Nlc3NcbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUm9vbSwgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgcm9vbUlkOiBkb2N1bWVudElkLFxuICAgIGRlZmF1bHRBY2Nlc3NlczogZGVmYXVsdEFjY2Vzc2VzLFxuICB9KTtcblxuICBpZiAodXBkYXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXBkYXRlZCByb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY292ZXJ0IHRvIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KHVwZGF0ZWRSb29tKTtcbiAgcmV0dXJuIHsgZGF0YTogZG9jdW1lbnQgfTtcbn1cbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImdldFJvb20iLCJ1cGRhdGVSb29tIiwiYnVpbGREb2N1bWVudCIsImRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInVwZGF0ZURlZmF1bHRBY2Nlc3MiLCJyZXEiLCJyZXMiLCJkb2N1bWVudElkIiwiYWNjZXNzIiwic2Vzc2lvbiIsInJvb20iLCJQcm9taXNlIiwiYWxsIiwicm9vbUlkIiwiZXJyb3IiLCJjb2RlIiwibWVzc2FnZSIsInN1Z2dlc3Rpb24iLCJkYXRhIiwiYWNjZXNzZXNBbGxvd2VkIiwiUm9vbVdyaXRlIiwidXNlcklkIiwidXNlciIsImluZm8iLCJpZCIsImdyb3VwSWRzIiwiZGVmYXVsdEFjY2Vzc2VzIiwidXBkYXRlZFJvb20iLCJ1cGRhdGVSb29tRXJyb3IiLCJkb2N1bWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateDefaultAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateDocument.ts":
/*!************************************************!*\
  !*** ./lib/server/documents/updateDocument.ts ***!
  \************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateDocument\": () => (/* binding */ updateDocument)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n/**\n * Update a document with new data\n * Only allow if user has access to room (including logged-out users and public rooms).\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document id\n * @param documentData - Data to update in the document\n */ async function updateDocument(req, res, { documentId , documentData  }) {\n    // Get session and room\n    const [session, room] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.getRoom)({\n            roomId: documentId\n        })\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to get rooms information\"\n            }\n        };\n    }\n    // Get the room to update\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_3__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // If successful, update room with new data\n    const { data: updatedRoomData , error: updatedRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_2__.updateRoom)({\n        ...documentData,\n        roomId: documentId\n    });\n    if (updatedRoomError) {\n        return {\n            error: updatedRoomError\n        };\n    }\n    if (!updatedRoomData) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If update successful, convert to custom document format and return\n    const document = (0,_utils__WEBPACK_IMPORTED_MODULE_3__.buildDocument)(updatedRoomData);\n    return {\n        data: document\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVEb2N1bWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQU13QjtBQUNtQjtBQUNTO0FBQ1E7QUFFNUQ7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZU0sZUFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxXQUFVLEVBQUVDLGFBQVksRUFBdUIsRUFDZDtJQUNuQyx1QkFBdUI7SUFDdkIsTUFBTSxDQUFDQyxTQUFTQyxLQUFLLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQ3hDYix1REFBZ0JBLENBQUNNLEtBQUtDO1FBQ3RCTixvREFBT0EsQ0FBQztZQUFFYSxRQUFRTjtRQUFXO0tBQzlCO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0UsU0FBUztRQUNaLE9BQU87WUFDTEssT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQseUJBQXlCO0lBQ3pCLE1BQU0sRUFBRUMsS0FBSSxFQUFFSixNQUFLLEVBQUUsR0FBR0o7SUFFeEIsSUFBSUksT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQixDQUFDO0lBRUQsSUFBSSxDQUFDSSxNQUFNO1FBQ1QsT0FBTztZQUNMSixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxzREFBc0Q7SUFDdEQsSUFDRSxDQUFDZCx5REFBaUJBLENBQUM7UUFDakJnQixpQkFBaUI7WUFBQ3JCLHdEQUFvQjtTQUFDO1FBQ3ZDdUIsUUFBUVosUUFBUWEsSUFBSSxDQUFDQyxJQUFJLENBQUNDLEVBQUU7UUFDNUJDLFVBQVVoQixRQUFRYSxJQUFJLENBQUNDLElBQUksQ0FBQ0UsUUFBUTtRQUNwQ2YsTUFBTVE7SUFDUixJQUNBO1FBQ0EsT0FBTztZQUNMSixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCwyQ0FBMkM7SUFDM0MsTUFBTSxFQUFFQyxNQUFNUSxnQkFBZSxFQUFFWixPQUFPYSxpQkFBZ0IsRUFBRSxHQUFHLE1BQU0xQix1REFBVUEsQ0FBQztRQUMxRSxHQUFHTyxZQUFZO1FBQ2ZLLFFBQVFOO0lBQ1Y7SUFFQSxJQUFJb0Isa0JBQWtCO1FBQ3BCLE9BQU87WUFBRWIsT0FBT2E7UUFBaUI7SUFDbkMsQ0FBQztJQUVELElBQUksQ0FBQ0QsaUJBQWlCO1FBQ3BCLE9BQU87WUFDTFosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQscUVBQXFFO0lBQ3JFLE1BQU1XLFdBQXFCMUIscURBQWFBLENBQUN3QjtJQUN6QyxPQUFPO1FBQUVSLE1BQU1VO0lBQVM7QUFDMUIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvZG9jdW1lbnRzL3VwZGF0ZURvY3VtZW50LnRzP2RkNzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dCB9IGZyb20gXCJuZXh0XCI7XG5pbXBvcnQge1xuICBEb2N1bWVudCxcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIFJvb21BY2Nlc3MsXG4gIFVwZGF0ZURvY3VtZW50UHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRSb29tLCB1cGRhdGVSb29tIH0gZnJvbSBcIi4uL2xpdmVibG9ja3NcIjtcbmltcG9ydCB7IGJ1aWxkRG9jdW1lbnQsIHVzZXJBbGxvd2VkSW5Sb29tIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogVXBkYXRlIGEgZG9jdW1lbnQgd2l0aCBuZXcgZGF0YVxuICogT25seSBhbGxvdyBpZiB1c2VyIGhhcyBhY2Nlc3MgdG8gcm9vbSAoaW5jbHVkaW5nIGxvZ2dlZC1vdXQgdXNlcnMgYW5kIHB1YmxpYyByb29tcykuXG4gKiBEbyBub3QgYWxsb3cgaWYgcHVibGljIGFjY2Vzcywgb3IgYWNjZXNzIGdyYW50ZWQgdGhyb3VnaCBncm91cElkc1xuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50IGlkXG4gKiBAcGFyYW0gZG9jdW1lbnREYXRhIC0gRGF0YSB0byB1cGRhdGUgaW4gdGhlIGRvY3VtZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVEb2N1bWVudChcbiAgcmVxOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVxXCJdLFxuICByZXM6IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHRbXCJyZXNcIl0sXG4gIHsgZG9jdW1lbnRJZCwgZG9jdW1lbnREYXRhIH06IFVwZGF0ZURvY3VtZW50UHJvcHNcbik6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8RG9jdW1lbnQ+PiB7XG4gIC8vIEdldCBzZXNzaW9uIGFuZCByb29tXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIGdldCByb29tcyBpbmZvcm1hdGlvblwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gR2V0IHRoZSByb29tIHRvIHVwZGF0ZVxuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSByb29tO1xuXG4gIGlmIChlcnJvcikge1xuICAgIHJldHVybiB7IGVycm9yIH07XG4gIH1cblxuICBpZiAoIWRhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgY3VycmVudCBsb2dnZWQtaW4gdXNlciBoYXMgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBJZiBzdWNjZXNzZnVsLCB1cGRhdGUgcm9vbSB3aXRoIG5ldyBkYXRhXG4gIGNvbnN0IHsgZGF0YTogdXBkYXRlZFJvb21EYXRhLCBlcnJvcjogdXBkYXRlZFJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgLi4uZG9jdW1lbnREYXRhLFxuICAgIHJvb21JZDogZG9jdW1lbnRJZCxcbiAgfSk7XG5cbiAgaWYgKHVwZGF0ZWRSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdXBkYXRlZFJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbURhdGEpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlVwZGF0ZWQgcm9vbSBub3QgZm91bmRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDb250YWN0IGFuIGFkbWluaXN0cmF0b3JcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHVwZGF0ZSBzdWNjZXNzZnVsLCBjb252ZXJ0IHRvIGN1c3RvbSBkb2N1bWVudCBmb3JtYXQgYW5kIHJldHVyblxuICBjb25zdCBkb2N1bWVudDogRG9jdW1lbnQgPSBidWlsZERvY3VtZW50KHVwZGF0ZWRSb29tRGF0YSk7XG4gIHJldHVybiB7IGRhdGE6IGRvY3VtZW50IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsImdldFNlcnZlclNlc3Npb24iLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnQiLCJ1c2VyQWxsb3dlZEluUm9vbSIsInVwZGF0ZURvY3VtZW50IiwicmVxIiwicmVzIiwiZG9jdW1lbnRJZCIsImRvY3VtZW50RGF0YSIsInNlc3Npb24iLCJyb29tIiwiUHJvbWlzZSIsImFsbCIsInJvb21JZCIsImVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzdWdnZXN0aW9uIiwiZGF0YSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsInVzZXJJZCIsInVzZXIiLCJpbmZvIiwiaWQiLCJncm91cElkcyIsInVwZGF0ZWRSb29tRGF0YSIsInVwZGF0ZWRSb29tRXJyb3IiLCJkb2N1bWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateDocument.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateGroupAccess.ts":
/*!***************************************************!*\
  !*** ./lib/server/documents/updateGroupAccess.ts ***!
  \***************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateGroupAccess\": () => (/* binding */ updateGroupAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_1__]);\n_auth__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n/**\n * Add a new group to a document, or edit an old group's permissions\n * Only allow if authorized with NextAuth and if user is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param groupId - The edit group's id\n * @param access - The invited user's new document access\n */ async function updateGroupAccess(req, res, { documentId , groupId , access  }) {\n    // Get session and room\n    const [session, room, group] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_2__.getGroup)(groupId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update groups\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!data) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_4__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: data\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the room\"\n            }\n        };\n    }\n    // Check group exists in system\n    if (!group) {\n        return {\n            error: {\n                code: 400,\n                message: \"Group does not exist\",\n                suggestion: `Check that that group ${groupId} exists in the system`\n            }\n        };\n    }\n    // If room exists, create userAccesses element for new collaborator with passed access level\n    const groupsAccesses = {\n        [groupId]: (0,_utils__WEBPACK_IMPORTED_MODULE_4__.documentAccessToRoomAccesses)(access)\n    };\n    // If draft and adding a group, remove drafts group\n    const draftGroupId = (0,_utils__WEBPACK_IMPORTED_MODULE_4__.getDraftsGroupName)(session.user.info.id);\n    if (groupId !== draftGroupId && draftGroupId in data.groupsAccesses) {\n        groupsAccesses[draftGroupId] = null;\n    }\n    // Update the room with the new collaborators\n    const { data: updatedRoom , error: updateRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_3__.updateRoom)({\n        roomId: documentId,\n        groupsAccesses: groupsAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // If successful, convert room to a list of groups and send\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_4__.buildDocumentGroups)(updatedRoom);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVHcm91cEFjY2Vzcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFRd0I7QUFDbUI7QUFDSjtBQUNhO0FBTWxDO0FBRWxCOzs7Ozs7Ozs7O0NBVUMsR0FDTSxlQUFlVSxrQkFDcEJDLEdBQXFDLEVBQ3JDQyxHQUFxQyxFQUNyQyxFQUFFQyxXQUFVLEVBQUVDLFFBQU8sRUFBRUMsT0FBTSxFQUEwQixFQUNiO0lBQzFDLHVCQUF1QjtJQUN2QixNQUFNLENBQUNDLFNBQVNDLE1BQU1DLE1BQU0sR0FBRyxNQUFNQyxRQUFRQyxHQUFHLENBQUM7UUFDL0NsQix1REFBZ0JBLENBQUNTLEtBQUtDO1FBQ3RCUixvREFBT0EsQ0FBQztZQUFFaUIsUUFBUVI7UUFBVztRQUM3QlYsbURBQVFBLENBQUNXO0tBQ1Y7SUFFRCwwQkFBMEI7SUFDMUIsSUFBSSxDQUFDRSxTQUFTO1FBQ1osT0FBTztZQUNMTSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxxQ0FBcUM7SUFDckMsTUFBTSxFQUFFQyxLQUFJLEVBQUVKLE1BQUssRUFBRSxHQUFHTDtJQUV4QixJQUFJSyxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxJQUFJLENBQUNJLE1BQU07UUFDVCxPQUFPO1lBQ0xKLE9BQU87Z0JBQ0xDLE1BQU07Z0JBQ05DLFNBQVM7Z0JBQ1RDLFlBQVk7WUFDZDtRQUNGO0lBQ0YsQ0FBQztJQUVELDJEQUEyRDtJQUMzRCxJQUNFLENBQUNoQix5REFBaUJBLENBQUM7UUFDakJrQixpQkFBaUI7WUFBQzNCLHdEQUFvQjtTQUFDO1FBQ3ZDNkIsbUJBQW1CO1lBQUM1Qix5REFBcUI7U0FBQztRQUMxQzhCLFFBQVFmLFFBQVFnQixJQUFJLENBQUNDLElBQUksQ0FBQ0MsRUFBRTtRQUM1QkMsVUFBVW5CLFFBQVFnQixJQUFJLENBQUNDLElBQUksQ0FBQ0UsUUFBUTtRQUNwQ2xCLE1BQU1TO0lBQ1IsSUFDQTtRQUNBLE9BQU87WUFDTEosT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsK0JBQStCO0lBQy9CLElBQUksQ0FBQ1AsT0FBTztRQUNWLE9BQU87WUFDTEksT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWSxDQUFDLHNCQUFzQixFQUFFWCxRQUFRLHFCQUFxQixDQUFDO1lBQ3JFO1FBQ0Y7SUFDRixDQUFDO0lBRUQsNEZBQTRGO0lBQzVGLE1BQU1zQixpQkFBK0I7UUFDbkMsQ0FBQ3RCLFFBQVEsRUFBRVAsb0VBQTRCQSxDQUFDUTtJQUMxQztJQUVBLG1EQUFtRDtJQUNuRCxNQUFNc0IsZUFBZTdCLDBEQUFrQkEsQ0FBQ1EsUUFBUWdCLElBQUksQ0FBQ0MsSUFBSSxDQUFDQyxFQUFFO0lBQzVELElBQUlwQixZQUFZdUIsZ0JBQWdCQSxnQkFBZ0JYLEtBQUtVLGNBQWMsRUFBRTtRQUNuRUEsY0FBYyxDQUFDQyxhQUFhLEdBQUcsSUFBSTtJQUNyQyxDQUFDO0lBRUQsNkNBQTZDO0lBQzdDLE1BQU0sRUFBRVgsTUFBTVksWUFBVyxFQUFFaEIsT0FBT2lCLGdCQUFlLEVBQUUsR0FBRyxNQUFNbEMsdURBQVVBLENBQUM7UUFDckVnQixRQUFRUjtRQUNSdUIsZ0JBQWdCQTtJQUNsQjtJQUVBLElBQUlHLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVqQixPQUFPaUI7UUFBZ0I7SUFDbEMsQ0FBQztJQUVELElBQUksQ0FBQ0QsYUFBYTtRQUNoQixPQUFPO1lBQ0xoQixPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCwyREFBMkQ7SUFDM0QsTUFBTWUsU0FBMEIsTUFBTWxDLDJEQUFtQkEsQ0FBQ2dDO0lBQzFELE9BQU87UUFBRVosTUFBTWM7SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvdXBkYXRlR3JvdXBBY2Nlc3MudHM/NmFhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0IH0gZnJvbSBcIm5leHRcIjtcbmltcG9ydCB7XG4gIERvY3VtZW50R3JvdXAsXG4gIEZldGNoQXBpUmVzdWx0LFxuICBSb29tQWNjZXNzLFxuICBSb29tQWNjZXNzZXMsXG4gIFJvb21BY2Nlc3NMZXZlbHMsXG4gIFVwZGF0ZUdyb3VwQWNjZXNzUHJvcHMsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0U2VydmVyU2Vzc2lvbiB9IGZyb20gXCIuLi9hdXRoXCI7XG5pbXBvcnQgeyBnZXRHcm91cCB9IGZyb20gXCIuLi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgZ2V0Um9vbSwgdXBkYXRlUm9vbSB9IGZyb20gXCIuLi9saXZlYmxvY2tzXCI7XG5pbXBvcnQge1xuICBidWlsZERvY3VtZW50R3JvdXBzLFxuICBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzLFxuICBnZXREcmFmdHNHcm91cE5hbWUsXG4gIHVzZXJBbGxvd2VkSW5Sb29tLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuLyoqXG4gKiBBZGQgYSBuZXcgZ3JvdXAgdG8gYSBkb2N1bWVudCwgb3IgZWRpdCBhbiBvbGQgZ3JvdXAncyBwZXJtaXNzaW9uc1xuICogT25seSBhbGxvdyBpZiBhdXRob3JpemVkIHdpdGggTmV4dEF1dGggYW5kIGlmIHVzZXIgaXMgYWRkZWQgYXMgYSB1c2VySWQgb24gdXNlcnNBY2Nlc3Nlc1xuICogRG8gbm90IGFsbG93IGlmIHB1YmxpYyBhY2Nlc3MsIG9yIGFjY2VzcyBncmFudGVkIHRocm91Z2ggZ3JvdXBJZHNcbiAqXG4gKiBAcGFyYW0gcmVxXG4gKiBAcGFyYW0gcmVzXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCAtIFRoZSBkb2N1bWVudCdzIGlkXG4gKiBAcGFyYW0gZ3JvdXBJZCAtIFRoZSBlZGl0IGdyb3VwJ3MgaWRcbiAqIEBwYXJhbSBhY2Nlc3MgLSBUaGUgaW52aXRlZCB1c2VyJ3MgbmV3IGRvY3VtZW50IGFjY2Vzc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlR3JvdXBBY2Nlc3MoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQsIGdyb3VwSWQsIGFjY2VzcyB9OiBVcGRhdGVHcm91cEFjY2Vzc1Byb3BzXG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PERvY3VtZW50R3JvdXBbXT4+IHtcbiAgLy8gR2V0IHNlc3Npb24gYW5kIHJvb21cbiAgY29uc3QgW3Nlc3Npb24sIHJvb20sIGdyb3VwXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICAgIGdldEdyb3VwKGdyb3VwSWQpLFxuICBdKTtcblxuICAvLyBDaGVjayB1c2VyIGlzIGxvZ2dlZCBpblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAxLFxuICAgICAgICBtZXNzYWdlOiBcIk5vdCBzaWduZWQgaW5cIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJTaWduIGluIHRvIHVwZGF0ZSBncm91cHNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoZSByb29tIGBkb2N1bWVudElkYCBleGlzdHNcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gcm9vbTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJSb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3JlIG9uIHRoZSBjb3JyZWN0IHBhZ2VcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGN1cnJlbnQgbG9nZ2VkLWluIHVzZXIgaGFzIGVkaXQgYWNjZXNzIHRvIHRoZSByb29tXG4gIGlmIChcbiAgICAhdXNlckFsbG93ZWRJblJvb20oe1xuICAgICAgYWNjZXNzZXNBbGxvd2VkOiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdLFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHM6IFtSb29tQWNjZXNzTGV2ZWxzLlVTRVJdLFxuICAgICAgdXNlcklkOiBzZXNzaW9uLnVzZXIuaW5mby5pZCxcbiAgICAgIGdyb3VwSWRzOiBzZXNzaW9uLnVzZXIuaW5mby5ncm91cElkcyxcbiAgICAgIHJvb206IGRhdGEsXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIHJvb21cIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIGdyb3VwIGV4aXN0cyBpbiBzeXN0ZW1cbiAgaWYgKCFncm91cCkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiR3JvdXAgZG9lcyBub3QgZXhpc3RcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogYENoZWNrIHRoYXQgdGhhdCBncm91cCAke2dyb3VwSWR9IGV4aXN0cyBpbiB0aGUgc3lzdGVtYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHJvb20gZXhpc3RzLCBjcmVhdGUgdXNlckFjY2Vzc2VzIGVsZW1lbnQgZm9yIG5ldyBjb2xsYWJvcmF0b3Igd2l0aCBwYXNzZWQgYWNjZXNzIGxldmVsXG4gIGNvbnN0IGdyb3Vwc0FjY2Vzc2VzOiBSb29tQWNjZXNzZXMgPSB7XG4gICAgW2dyb3VwSWRdOiBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzKGFjY2VzcyksXG4gIH07XG5cbiAgLy8gSWYgZHJhZnQgYW5kIGFkZGluZyBhIGdyb3VwLCByZW1vdmUgZHJhZnRzIGdyb3VwXG4gIGNvbnN0IGRyYWZ0R3JvdXBJZCA9IGdldERyYWZ0c0dyb3VwTmFtZShzZXNzaW9uLnVzZXIuaW5mby5pZCk7XG4gIGlmIChncm91cElkICE9PSBkcmFmdEdyb3VwSWQgJiYgZHJhZnRHcm91cElkIGluIGRhdGEuZ3JvdXBzQWNjZXNzZXMpIHtcbiAgICBncm91cHNBY2Nlc3Nlc1tkcmFmdEdyb3VwSWRdID0gbnVsbDtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgcm9vbSB3aXRoIHRoZSBuZXcgY29sbGFib3JhdG9yc1xuICBjb25zdCB7IGRhdGE6IHVwZGF0ZWRSb29tLCBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH0gPSBhd2FpdCB1cGRhdGVSb29tKHtcbiAgICByb29tSWQ6IGRvY3VtZW50SWQsXG4gICAgZ3JvdXBzQWNjZXNzZXM6IGdyb3Vwc0FjY2Vzc2VzLFxuICB9KTtcblxuICBpZiAodXBkYXRlUm9vbUVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9O1xuICB9XG5cbiAgaWYgKCF1cGRhdGVkUm9vbSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDQsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXBkYXRlZCByb29tIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNvbnRhY3QgYW4gYWRtaW5pc3RyYXRvclwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgc3VjY2Vzc2Z1bCwgY29udmVydCByb29tIHRvIGEgbGlzdCBvZiBncm91cHMgYW5kIHNlbmRcbiAgY29uc3QgcmVzdWx0OiBEb2N1bWVudEdyb3VwW10gPSBhd2FpdCBidWlsZERvY3VtZW50R3JvdXBzKHVwZGF0ZWRSb29tKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiUm9vbUFjY2VzcyIsIlJvb21BY2Nlc3NMZXZlbHMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0R3JvdXAiLCJnZXRSb29tIiwidXBkYXRlUm9vbSIsImJ1aWxkRG9jdW1lbnRHcm91cHMiLCJkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzIiwiZ2V0RHJhZnRzR3JvdXBOYW1lIiwidXNlckFsbG93ZWRJblJvb20iLCJ1cGRhdGVHcm91cEFjY2VzcyIsInJlcSIsInJlcyIsImRvY3VtZW50SWQiLCJncm91cElkIiwiYWNjZXNzIiwic2Vzc2lvbiIsInJvb20iLCJncm91cCIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJhY2Nlc3Nlc0FsbG93ZWQiLCJSb29tV3JpdGUiLCJjaGVja0FjY2Vzc0xldmVscyIsIlVTRVIiLCJ1c2VySWQiLCJ1c2VyIiwiaW5mbyIsImlkIiwiZ3JvdXBJZHMiLCJncm91cHNBY2Nlc3NlcyIsImRyYWZ0R3JvdXBJZCIsInVwZGF0ZWRSb29tIiwidXBkYXRlUm9vbUVycm9yIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateGroupAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/documents/updateUserAccess.ts":
/*!**************************************************!*\
  !*** ./lib/server/documents/updateUserAccess.ts ***!
  \**************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateUserAccess\": () => (/* binding */ updateUserAccess)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../constants */ \"(api)/./constants.ts\");\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../notify */ \"(api)/./lib/server/notify/index.ts\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_2__]);\n_auth__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\n\n\n/**\n * Add a new collaborator to a document, or edit an old collaborator\n * Only allow if authorized with NextAuth and is added as a userId on usersAccesses\n * Do not allow if public access, or access granted through groupIds\n *\n * @param req\n * @param res\n * @param documentId - The document's id\n * @param userId - The id of the user we're updating\n * @param access - The user's new document access level\n */ async function updateUserAccess(req, res, { documentId , userId , access  }) {\n    // Get session, room, and user\n    const [session, room, user] = await Promise.all([\n        (0,_auth__WEBPACK_IMPORTED_MODULE_2__.getServerSession)(req, res),\n        (0,_liveblocks__WEBPACK_IMPORTED_MODULE_4__.getRoom)({\n            roomId: documentId\n        }),\n        (0,_database__WEBPACK_IMPORTED_MODULE_3__.getUser)(userId)\n    ]);\n    // Check user is logged in\n    if (!session) {\n        return {\n            error: {\n                code: 401,\n                message: \"Not signed in\",\n                suggestion: \"Sign in to update document users\"\n            }\n        };\n    }\n    // Check the room `documentId` exists\n    const { data: currentRoom , error  } = room;\n    if (error) {\n        return {\n            error\n        };\n    }\n    if (!currentRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Room not found\",\n                suggestion: \"Check that you're on the correct page\"\n            }\n        };\n    }\n    // Check current logged-in user has edit access to the room\n    if (!(0,_utils__WEBPACK_IMPORTED_MODULE_6__.userAllowedInRoom)({\n        accessesAllowed: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccess.RoomWrite\n        ],\n        checkAccessLevels: [\n            _types__WEBPACK_IMPORTED_MODULE_1__.RoomAccessLevels.USER\n        ],\n        userId: session.user.info.id,\n        groupIds: session.user.info.groupIds,\n        room: currentRoom\n    })) {\n        return {\n            error: {\n                code: 403,\n                message: \"Not allowed access\",\n                suggestion: \"Check that you've been given permission to the document\"\n            }\n        };\n    }\n    // Check user exists in system\n    if (!user) {\n        return {\n            error: {\n                code: 200,\n                message: \"User not found\",\n                suggestion: \"Check that you've used the correct user id\"\n            }\n        };\n    }\n    // If user exists, check that they are not the owner\n    if ((0,_utils__WEBPACK_IMPORTED_MODULE_6__.isUserDocumentOwner)({\n        room: currentRoom,\n        userId: userId\n    })) {\n        return {\n            error: {\n                code: 400,\n                message: \"User is owner\",\n                suggestion: `User ${userId} is the document owner and cannot be edited`\n            }\n        };\n    }\n    // If room exists, create userAccesses element for new collaborator with passed access level\n    const usersAccesses = {\n        [userId]: (0,_utils__WEBPACK_IMPORTED_MODULE_6__.documentAccessToRoomAccesses)(access)\n    };\n    // Update the room with the new collaborators\n    const { data: updatedRoom , error: updateRoomError  } = await (0,_liveblocks__WEBPACK_IMPORTED_MODULE_4__.updateRoom)({\n        roomId: documentId,\n        usersAccesses: usersAccesses\n    });\n    if (updateRoomError) {\n        return {\n            error: updateRoomError\n        };\n    }\n    if (!updatedRoom) {\n        return {\n            error: {\n                code: 404,\n                message: \"Updated room not found\",\n                suggestion: \"Contact an administrator\"\n            }\n        };\n    }\n    // Send email to user notifying that they've been added or their permission has been changed\n    const updatedDocument = (0,_utils__WEBPACK_IMPORTED_MODULE_6__.buildDocument)(updatedRoom);\n    const documentUrl = `${req.headers.origin}${(0,_constants__WEBPACK_IMPORTED_MODULE_0__.DOCUMENT_URL)(updatedDocument.type, updatedDocument.id)}`;\n    (0,_notify__WEBPACK_IMPORTED_MODULE_5__.notify)({\n        to: userId,\n        subject: `Permission changed in document ${updatedDocument.name}`,\n        html: `In <a href=\"${documentUrl}\">${updatedDocument.name}</a> your permission level has changed to <strong>${access}</strong>.`\n    });\n    // If update successful, return the new list of collaborators\n    const result = await (0,_utils__WEBPACK_IMPORTED_MODULE_6__.buildDocumentUsers)(updatedRoom, session.user.info.id);\n    return {\n        data: result\n    };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2RvY3VtZW50cy91cGRhdGVVc2VyQWNjZXNzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQ2tEO0FBUTFCO0FBQ21CO0FBQ0w7QUFDYztBQUNqQjtBQU9qQjtBQUVsQjs7Ozs7Ozs7OztDQVVDLEdBQ00sZUFBZWEsaUJBQ3BCQyxHQUFxQyxFQUNyQ0MsR0FBcUMsRUFDckMsRUFBRUMsV0FBVSxFQUFFQyxPQUFNLEVBQUVDLE9BQU0sRUFBeUIsRUFDWjtJQUN6Qyw4QkFBOEI7SUFDOUIsTUFBTSxDQUFDQyxTQUFTQyxNQUFNQyxLQUFLLEdBQUcsTUFBTUMsUUFBUUMsR0FBRyxDQUFDO1FBQzlDcEIsdURBQWdCQSxDQUFDVyxLQUFLQztRQUN0QlYsb0RBQU9BLENBQUM7WUFBRW1CLFFBQVFSO1FBQVc7UUFDN0JaLGtEQUFPQSxDQUFDYTtLQUNUO0lBRUQsMEJBQTBCO0lBQzFCLElBQUksQ0FBQ0UsU0FBUztRQUNaLE9BQU87WUFDTE0sT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQscUNBQXFDO0lBQ3JDLE1BQU0sRUFBRUMsTUFBTUMsWUFBVyxFQUFFTCxNQUFLLEVBQUUsR0FBR0w7SUFFckMsSUFBSUssT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQixDQUFDO0lBRUQsSUFBSSxDQUFDSyxhQUFhO1FBQ2hCLE9BQU87WUFDTEwsT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFBWTtZQUNkO1FBQ0Y7SUFDRixDQUFDO0lBRUQsMkRBQTJEO0lBQzNELElBQ0UsQ0FBQ2hCLHlEQUFpQkEsQ0FBQztRQUNqQm1CLGlCQUFpQjtZQUFDOUIsd0RBQW9CO1NBQUM7UUFDdkNnQyxtQkFBbUI7WUFBQy9CLHlEQUFxQjtTQUFDO1FBQzFDZSxRQUFRRSxRQUFRRSxJQUFJLENBQUNjLElBQUksQ0FBQ0MsRUFBRTtRQUM1QkMsVUFBVWxCLFFBQVFFLElBQUksQ0FBQ2MsSUFBSSxDQUFDRSxRQUFRO1FBQ3BDakIsTUFBTVU7SUFDUixJQUNBO1FBQ0EsT0FBTztZQUNMTCxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCw4QkFBOEI7SUFDOUIsSUFBSSxDQUFDUCxNQUFNO1FBQ1QsT0FBTztZQUNMSSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCxvREFBb0Q7SUFDcEQsSUFBSWpCLDJEQUFtQkEsQ0FBQztRQUFFUyxNQUFNVTtRQUFhYixRQUFRQTtJQUFPLElBQUk7UUFDOUQsT0FBTztZQUNMUSxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZLENBQUMsS0FBSyxFQUFFWCxPQUFPLDJDQUEyQyxDQUFDO1lBQ3pFO1FBQ0Y7SUFDRixDQUFDO0lBRUQsNEZBQTRGO0lBQzVGLE1BQU1xQixnQkFBZ0I7UUFDcEIsQ0FBQ3JCLE9BQU8sRUFBRVAsb0VBQTRCQSxDQUFDUTtJQUN6QztJQUVBLDZDQUE2QztJQUM3QyxNQUFNLEVBQUVXLE1BQU1VLFlBQVcsRUFBRWQsT0FBT2UsZ0JBQWUsRUFBRSxHQUFHLE1BQU1sQyx1REFBVUEsQ0FBQztRQUNyRWtCLFFBQVFSO1FBQ1JzQixlQUFlQTtJQUNqQjtJQUVBLElBQUlFLGlCQUFpQjtRQUNuQixPQUFPO1lBQUVmLE9BQU9lO1FBQWdCO0lBQ2xDLENBQUM7SUFFRCxJQUFJLENBQUNELGFBQWE7UUFDaEIsT0FBTztZQUNMZCxPQUFPO2dCQUNMQyxNQUFNO2dCQUNOQyxTQUFTO2dCQUNUQyxZQUFZO1lBQ2Q7UUFDRjtJQUNGLENBQUM7SUFFRCw0RkFBNEY7SUFDNUYsTUFBTWEsa0JBQTRCakMscURBQWFBLENBQUMrQjtJQUNoRCxNQUFNRyxjQUFjLENBQUMsRUFBRTVCLElBQUk2QixPQUFPLENBQUNDLE1BQU0sQ0FBQyxFQUFFNUMsd0RBQVlBLENBQ3REeUMsZ0JBQWdCSSxJQUFJLEVBQ3BCSixnQkFBZ0JMLEVBQUUsRUFDbEIsQ0FBQztJQUNIN0IsK0NBQU1BLENBQUM7UUFDTHVDLElBQUk3QjtRQUNKOEIsU0FBUyxDQUFDLCtCQUErQixFQUFFTixnQkFBZ0JPLElBQUksQ0FBQyxDQUFDO1FBQ2pFQyxNQUFNLENBQUMsWUFBWSxFQUFFUCxZQUFZLEVBQUUsRUFBRUQsZ0JBQWdCTyxJQUFJLENBQUMsa0RBQWtELEVBQUU5QixPQUFPLFVBQVUsQ0FBQztJQUNsSTtJQUVBLDZEQUE2RDtJQUM3RCxNQUFNZ0MsU0FBeUIsTUFBTXpDLDBEQUFrQkEsQ0FDckQ4QixhQUNBcEIsUUFBUUUsSUFBSSxDQUFDYyxJQUFJLENBQUNDLEVBQUU7SUFFdEIsT0FBTztRQUFFUCxNQUFNcUI7SUFBTztBQUN4QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9kb2N1bWVudHMvdXBkYXRlVXNlckFjY2Vzcy50cz80Mzc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wc0NvbnRleHQgfSBmcm9tIFwibmV4dFwiO1xuaW1wb3J0IHsgRE9DVU1FTlRfVVJMIH0gZnJvbSBcIi4uLy4uLy4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtcbiAgRG9jdW1lbnQsXG4gIERvY3VtZW50VXNlcixcbiAgRmV0Y2hBcGlSZXN1bHQsXG4gIFJvb21BY2Nlc3MsXG4gIFJvb21BY2Nlc3NMZXZlbHMsXG4gIFVwZGF0ZVVzZXJBY2Nlc3NQcm9wcyxcbn0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRTZXJ2ZXJTZXNzaW9uIH0gZnJvbSBcIi4uL2F1dGhcIjtcbmltcG9ydCB7IGdldFVzZXIgfSBmcm9tIFwiLi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IGdldFJvb20sIHVwZGF0ZVJvb20gfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrc1wiO1xuaW1wb3J0IHsgbm90aWZ5IH0gZnJvbSBcIi4uL25vdGlmeVwiO1xuaW1wb3J0IHtcbiAgYnVpbGREb2N1bWVudCxcbiAgYnVpbGREb2N1bWVudFVzZXJzLFxuICBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzLFxuICBpc1VzZXJEb2N1bWVudE93bmVyLFxuICB1c2VyQWxsb3dlZEluUm9vbSxcbn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbi8qKlxuICogQWRkIGEgbmV3IGNvbGxhYm9yYXRvciB0byBhIGRvY3VtZW50LCBvciBlZGl0IGFuIG9sZCBjb2xsYWJvcmF0b3JcbiAqIE9ubHkgYWxsb3cgaWYgYXV0aG9yaXplZCB3aXRoIE5leHRBdXRoIGFuZCBpcyBhZGRlZCBhcyBhIHVzZXJJZCBvbiB1c2Vyc0FjY2Vzc2VzXG4gKiBEbyBub3QgYWxsb3cgaWYgcHVibGljIGFjY2Vzcywgb3IgYWNjZXNzIGdyYW50ZWQgdGhyb3VnaCBncm91cElkc1xuICpcbiAqIEBwYXJhbSByZXFcbiAqIEBwYXJhbSByZXNcbiAqIEBwYXJhbSBkb2N1bWVudElkIC0gVGhlIGRvY3VtZW50J3MgaWRcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgd2UncmUgdXBkYXRpbmdcbiAqIEBwYXJhbSBhY2Nlc3MgLSBUaGUgdXNlcidzIG5ldyBkb2N1bWVudCBhY2Nlc3MgbGV2ZWxcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVVzZXJBY2Nlc3MoXG4gIHJlcTogR2V0U2VydmVyU2lkZVByb3BzQ29udGV4dFtcInJlcVwiXSxcbiAgcmVzOiBHZXRTZXJ2ZXJTaWRlUHJvcHNDb250ZXh0W1wicmVzXCJdLFxuICB7IGRvY3VtZW50SWQsIHVzZXJJZCwgYWNjZXNzIH06IFVwZGF0ZVVzZXJBY2Nlc3NQcm9wc1xuKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxEb2N1bWVudFVzZXJbXT4+IHtcbiAgLy8gR2V0IHNlc3Npb24sIHJvb20sIGFuZCB1c2VyXG4gIGNvbnN0IFtzZXNzaW9uLCByb29tLCB1c2VyXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzKSxcbiAgICBnZXRSb29tKHsgcm9vbUlkOiBkb2N1bWVudElkIH0pLFxuICAgIGdldFVzZXIodXNlcklkKSxcbiAgXSk7XG5cbiAgLy8gQ2hlY2sgdXNlciBpcyBsb2dnZWQgaW5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMSxcbiAgICAgICAgbWVzc2FnZTogXCJOb3Qgc2lnbmVkIGluXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiU2lnbiBpbiB0byB1cGRhdGUgZG9jdW1lbnQgdXNlcnNcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIENoZWNrIHRoZSByb29tIGBkb2N1bWVudElkYCBleGlzdHNcbiAgY29uc3QgeyBkYXRhOiBjdXJyZW50Um9vbSwgZXJyb3IgfSA9IHJvb207XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgfVxuXG4gIGlmICghY3VycmVudFJvb20pIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDA0LFxuICAgICAgICBtZXNzYWdlOiBcIlJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ2hlY2sgdGhhdCB5b3UncmUgb24gdGhlIGNvcnJlY3QgcGFnZVwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2hlY2sgY3VycmVudCBsb2dnZWQtaW4gdXNlciBoYXMgZWRpdCBhY2Nlc3MgdG8gdGhlIHJvb21cbiAgaWYgKFxuICAgICF1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQ6IFtSb29tQWNjZXNzLlJvb21Xcml0ZV0sXG4gICAgICBjaGVja0FjY2Vzc0xldmVsczogW1Jvb21BY2Nlc3NMZXZlbHMuVVNFUl0sXG4gICAgICB1c2VySWQ6IHNlc3Npb24udXNlci5pbmZvLmlkLFxuICAgICAgZ3JvdXBJZHM6IHNlc3Npb24udXNlci5pbmZvLmdyb3VwSWRzLFxuICAgICAgcm9vbTogY3VycmVudFJvb20sXG4gICAgfSlcbiAgKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwMyxcbiAgICAgICAgbWVzc2FnZTogXCJOb3QgYWxsb3dlZCBhY2Nlc3NcIixcbiAgICAgICAgc3VnZ2VzdGlvbjogXCJDaGVjayB0aGF0IHlvdSd2ZSBiZWVuIGdpdmVuIHBlcm1pc3Npb24gdG8gdGhlIGRvY3VtZW50XCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBDaGVjayB1c2VyIGV4aXN0cyBpbiBzeXN0ZW1cbiAgaWYgKCF1c2VyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDIwMCxcbiAgICAgICAgbWVzc2FnZTogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIkNoZWNrIHRoYXQgeW91J3ZlIHVzZWQgdGhlIGNvcnJlY3QgdXNlciBpZFwiLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgLy8gSWYgdXNlciBleGlzdHMsIGNoZWNrIHRoYXQgdGhleSBhcmUgbm90IHRoZSBvd25lclxuICBpZiAoaXNVc2VyRG9jdW1lbnRPd25lcih7IHJvb206IGN1cnJlbnRSb29tLCB1c2VySWQ6IHVzZXJJZCB9KSkge1xuICAgIHJldHVybiB7XG4gICAgICBlcnJvcjoge1xuICAgICAgICBjb2RlOiA0MDAsXG4gICAgICAgIG1lc3NhZ2U6IFwiVXNlciBpcyBvd25lclwiLFxuICAgICAgICBzdWdnZXN0aW9uOiBgVXNlciAke3VzZXJJZH0gaXMgdGhlIGRvY3VtZW50IG93bmVyIGFuZCBjYW5ub3QgYmUgZWRpdGVkYCxcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIElmIHJvb20gZXhpc3RzLCBjcmVhdGUgdXNlckFjY2Vzc2VzIGVsZW1lbnQgZm9yIG5ldyBjb2xsYWJvcmF0b3Igd2l0aCBwYXNzZWQgYWNjZXNzIGxldmVsXG4gIGNvbnN0IHVzZXJzQWNjZXNzZXMgPSB7XG4gICAgW3VzZXJJZF06IGRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMoYWNjZXNzKSxcbiAgfTtcblxuICAvLyBVcGRhdGUgdGhlIHJvb20gd2l0aCB0aGUgbmV3IGNvbGxhYm9yYXRvcnNcbiAgY29uc3QgeyBkYXRhOiB1cGRhdGVkUm9vbSwgZXJyb3I6IHVwZGF0ZVJvb21FcnJvciB9ID0gYXdhaXQgdXBkYXRlUm9vbSh7XG4gICAgcm9vbUlkOiBkb2N1bWVudElkLFxuICAgIHVzZXJzQWNjZXNzZXM6IHVzZXJzQWNjZXNzZXMsXG4gIH0pO1xuXG4gIGlmICh1cGRhdGVSb29tRXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvcjogdXBkYXRlUm9vbUVycm9yIH07XG4gIH1cblxuICBpZiAoIXVwZGF0ZWRSb29tKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGNvZGU6IDQwNCxcbiAgICAgICAgbWVzc2FnZTogXCJVcGRhdGVkIHJvb20gbm90IGZvdW5kXCIsXG4gICAgICAgIHN1Z2dlc3Rpb246IFwiQ29udGFjdCBhbiBhZG1pbmlzdHJhdG9yXCIsXG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICAvLyBTZW5kIGVtYWlsIHRvIHVzZXIgbm90aWZ5aW5nIHRoYXQgdGhleSd2ZSBiZWVuIGFkZGVkIG9yIHRoZWlyIHBlcm1pc3Npb24gaGFzIGJlZW4gY2hhbmdlZFxuICBjb25zdCB1cGRhdGVkRG9jdW1lbnQ6IERvY3VtZW50ID0gYnVpbGREb2N1bWVudCh1cGRhdGVkUm9vbSk7XG4gIGNvbnN0IGRvY3VtZW50VXJsID0gYCR7cmVxLmhlYWRlcnMub3JpZ2lufSR7RE9DVU1FTlRfVVJMKFxuICAgIHVwZGF0ZWREb2N1bWVudC50eXBlLFxuICAgIHVwZGF0ZWREb2N1bWVudC5pZFxuICApfWA7XG4gIG5vdGlmeSh7XG4gICAgdG86IHVzZXJJZCxcbiAgICBzdWJqZWN0OiBgUGVybWlzc2lvbiBjaGFuZ2VkIGluIGRvY3VtZW50ICR7dXBkYXRlZERvY3VtZW50Lm5hbWV9YCxcbiAgICBodG1sOiBgSW4gPGEgaHJlZj1cIiR7ZG9jdW1lbnRVcmx9XCI+JHt1cGRhdGVkRG9jdW1lbnQubmFtZX08L2E+IHlvdXIgcGVybWlzc2lvbiBsZXZlbCBoYXMgY2hhbmdlZCB0byA8c3Ryb25nPiR7YWNjZXNzfTwvc3Ryb25nPi5gLFxuICB9KTtcblxuICAvLyBJZiB1cGRhdGUgc3VjY2Vzc2Z1bCwgcmV0dXJuIHRoZSBuZXcgbGlzdCBvZiBjb2xsYWJvcmF0b3JzXG4gIGNvbnN0IHJlc3VsdDogRG9jdW1lbnRVc2VyW10gPSBhd2FpdCBidWlsZERvY3VtZW50VXNlcnMoXG4gICAgdXBkYXRlZFJvb20sXG4gICAgc2Vzc2lvbi51c2VyLmluZm8uaWRcbiAgKTtcbiAgcmV0dXJuIHsgZGF0YTogcmVzdWx0IH07XG59XG4iXSwibmFtZXMiOlsiRE9DVU1FTlRfVVJMIiwiUm9vbUFjY2VzcyIsIlJvb21BY2Nlc3NMZXZlbHMiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiZ2V0VXNlciIsImdldFJvb20iLCJ1cGRhdGVSb29tIiwibm90aWZ5IiwiYnVpbGREb2N1bWVudCIsImJ1aWxkRG9jdW1lbnRVc2VycyIsImRvY3VtZW50QWNjZXNzVG9Sb29tQWNjZXNzZXMiLCJpc1VzZXJEb2N1bWVudE93bmVyIiwidXNlckFsbG93ZWRJblJvb20iLCJ1cGRhdGVVc2VyQWNjZXNzIiwicmVxIiwicmVzIiwiZG9jdW1lbnRJZCIsInVzZXJJZCIsImFjY2VzcyIsInNlc3Npb24iLCJyb29tIiwidXNlciIsIlByb21pc2UiLCJhbGwiLCJyb29tSWQiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsImRhdGEiLCJjdXJyZW50Um9vbSIsImFjY2Vzc2VzQWxsb3dlZCIsIlJvb21Xcml0ZSIsImNoZWNrQWNjZXNzTGV2ZWxzIiwiVVNFUiIsImluZm8iLCJpZCIsImdyb3VwSWRzIiwidXNlcnNBY2Nlc3NlcyIsInVwZGF0ZWRSb29tIiwidXBkYXRlUm9vbUVycm9yIiwidXBkYXRlZERvY3VtZW50IiwiZG9jdW1lbnRVcmwiLCJoZWFkZXJzIiwib3JpZ2luIiwidHlwZSIsInRvIiwic3ViamVjdCIsIm5hbWUiLCJodG1sIiwicmVzdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/documents/updateUserAccess.ts\n");

/***/ }),

/***/ "(api)/./lib/server/index.ts":
/*!*****************************!*\
  !*** ./lib/server/index.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./auth */ \"(api)/./lib/server/auth/index.ts\");\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _database__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _database__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _documents__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./documents */ \"(api)/./lib/server/documents/index.ts\");\n/* harmony import */ var _liveblocks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./liveblocks */ \"(api)/./lib/server/liveblocks/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _liveblocks__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _liveblocks__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./notify */ \"(api)/./lib/server/notify/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _notify__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _notify__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils */ \"(api)/./lib/server/utils/index.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _utils__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _utils__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_auth__WEBPACK_IMPORTED_MODULE_0__, _documents__WEBPACK_IMPORTED_MODULE_2__]);\n([_auth__WEBPACK_IMPORTED_MODULE_0__, _documents__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _auth__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _auth__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _documents__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _documents__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n// ============================================================================\nif (false) {}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBdUI7QUFDSTtBQUNDO0FBQ0M7QUFDSjtBQUNEO0FBRXhCLCtFQUErRTtBQUMvRSxJQUFJLEtBQTZCLEVBQUUsRUFPbEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2luZGV4LnRzPzY0YjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYXV0aFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZGF0YWJhc2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RvY3VtZW50c1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGl2ZWJsb2Nrc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbm90aWZ5XCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlsc1wiO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICBjb25zb2xlLmxvZygpO1xuICBjb25zb2xlLmVycm9yKFxuICAgIFwiREFOR0VSOiBZb3UncmUgdXNpbmcgYSBmdW5jdGlvbiBmcm9tIC9saWIvc2VydmVyIG9uIHRoZSBjbGllbnRcIlxuICApO1xuICBjb25zb2xlLmVycm9yKFwiVGhpcyBtYXkgZXhwb3NlIHlvdXIgc2VjcmV0IGtleShzKVwiKTtcbiAgY29uc29sZS5sb2coKTtcbn1cbiJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/authorize.ts":
/*!********************************************!*\
  !*** ./lib/server/liveblocks/authorize.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authorize\": () => (/* binding */ authorize)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Authorize\n *\n * Authorize a user in your Liveblocks app. Used within liveblocks.config.ts\n * Uses Liveblocks API\n *\n * Similar to using `authorize` from `@liveblocks/node`:\n * https://liveblocks.io/docs/api-reference/liveblocks-node#authorize\n *\n * @param roomId - The current room's id\n * @param userId - The current user's id\n * @param groupIds - The current user's group ids\n * @param userInfo - The current user's user info\n */ async function authorize({ roomId , userId , groupIds , userInfo  }) {\n    const url = `/v2/rooms/${roomId}/authorize`;\n    const payload = JSON.stringify({\n        roomId,\n        userId,\n        groupIds,\n        userInfo\n    });\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvYXV0aG9yaXplLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBRThDO0FBUzlDOzs7Ozs7Ozs7Ozs7O0NBYUMsR0FDTSxlQUFlQyxVQUFVLEVBQzlCQyxPQUFNLEVBQ05DLE9BQU0sRUFDTkMsU0FBUSxFQUNSQyxTQUFRLEVBQ0YsRUFBOEM7SUFDcEQsTUFBTUMsTUFBTSxDQUFDLFVBQVUsRUFBRUosT0FBTyxVQUFVLENBQUM7SUFFM0MsTUFBTUssVUFBVUMsS0FBS0MsU0FBUyxDQUFDO1FBQzdCUDtRQUNBQztRQUNBQztRQUNBQztJQUNGO0lBRUEsT0FBT0wsMERBQWtCQSxDQUFvQk0sS0FBSztRQUNoREksUUFBUTtRQUNSQyxNQUFNSjtJQUNSO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9hdXRob3JpemUudHM/ZTRlMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VySW5mbyB9IGZyb20gXCIuLi8uLi8uLi9saXZlYmxvY2tzLmNvbmZpZ1wiO1xuaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBncm91cElkcz86IHN0cmluZ1tdO1xuICByb29tSWQ6IFJvb21bXCJpZFwiXTtcbiAgdXNlcklkPzogc3RyaW5nO1xuICB1c2VySW5mbz86IFVzZXJJbmZvO1xufVxuXG4vKipcbiAqIEF1dGhvcml6ZVxuICpcbiAqIEF1dGhvcml6ZSBhIHVzZXIgaW4geW91ciBMaXZlYmxvY2tzIGFwcC4gVXNlZCB3aXRoaW4gbGl2ZWJsb2Nrcy5jb25maWcudHNcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBTaW1pbGFyIHRvIHVzaW5nIGBhdXRob3JpemVgIGZyb20gYEBsaXZlYmxvY2tzL25vZGVgOlxuICogaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvYXBpLXJlZmVyZW5jZS9saXZlYmxvY2tzLW5vZGUjYXV0aG9yaXplXG4gKlxuICogQHBhcmFtIHJvb21JZCAtIFRoZSBjdXJyZW50IHJvb20ncyBpZFxuICogQHBhcmFtIHVzZXJJZCAtIFRoZSBjdXJyZW50IHVzZXIncyBpZFxuICogQHBhcmFtIGdyb3VwSWRzIC0gVGhlIGN1cnJlbnQgdXNlcidzIGdyb3VwIGlkc1xuICogQHBhcmFtIHVzZXJJbmZvIC0gVGhlIGN1cnJlbnQgdXNlcidzIHVzZXIgaW5mb1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXV0aG9yaXplKHtcbiAgcm9vbUlkLFxuICB1c2VySWQsXG4gIGdyb3VwSWRzLFxuICB1c2VySW5mbyxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDx7IHRva2VuOiBzdHJpbmcgfT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH0vYXV0aG9yaXplYDtcblxuICBjb25zdCBwYXlsb2FkID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgIHJvb21JZCxcbiAgICB1c2VySWQsXG4gICAgZ3JvdXBJZHMsXG4gICAgdXNlckluZm8sXG4gIH0pO1xuXG4gIHJldHVybiBmZXRjaExpdmVibG9ja3NBcGk8eyB0b2tlbjogc3RyaW5nIH0+KHVybCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgYm9keTogcGF5bG9hZCxcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiYXV0aG9yaXplIiwicm9vbUlkIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJ1c2VySW5mbyIsInVybCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0aG9kIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/authorize.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/createRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/createRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createRoom\": () => (/* binding */ createRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Create Room\n *\n * Create a new room with a number of params.\n * Uses Liveblocks API\n *\n * @param id - The id of the room\n * @param metadata - The room's metadata\n * @param usersAccesses - Which users are allowed in the room\n * @param groupsAccesses - Which groups are allowed in the room\n * @param defaultAccesses - Default accesses for room\n */ async function createRoom({ id , metadata , usersAccesses , groupsAccesses , defaultAccesses =[]  }) {\n    const url = \"/v2/rooms\";\n    const payload = JSON.stringify({\n        id,\n        metadata,\n        usersAccesses,\n        groupsAccesses,\n        defaultAccesses\n    });\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvY3JlYXRlUm9vbS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQU04QztBQVU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLEdBQUUsRUFDRkMsU0FBUSxFQUNSQyxjQUFhLEVBQ2JDLGVBQWMsRUFDZEMsaUJBQWtCLEVBQUUsR0FDZCxFQUFpQztJQUN2QyxNQUFNQyxNQUFNO0lBRVosTUFBTUMsVUFBVUMsS0FBS0MsU0FBUyxDQUFDO1FBQzdCUjtRQUNBQztRQUNBQztRQUNBQztRQUNBQztJQUNGO0lBRUEsT0FBT04sMERBQWtCQSxDQUFPTyxLQUFLO1FBQ25DSSxRQUFRO1FBQ1JDLE1BQU1KO0lBQ1I7QUFDRixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2NyZWF0ZVJvb20udHM/ODhiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgUm9vbSxcbiAgUm9vbUFjY2Vzc2VzLFxuICBSb29tTWV0YWRhdGEsXG59IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZmV0Y2hMaXZlYmxvY2tzQXBpIH0gZnJvbSBcIi4uL3V0aWxzXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGRlZmF1bHRBY2Nlc3Nlcz86IHN0cmluZ1tdO1xuICBncm91cHNBY2Nlc3Nlcz86IFJvb21BY2Nlc3NlcztcbiAgaWQ6IHN0cmluZztcbiAgbWV0YWRhdGE/OiBSb29tTWV0YWRhdGE7XG4gIHVzZXJzQWNjZXNzZXM/OiBSb29tQWNjZXNzZXM7XG59XG5cbi8qKlxuICogQ3JlYXRlIFJvb21cbiAqXG4gKiBDcmVhdGUgYSBuZXcgcm9vbSB3aXRoIGEgbnVtYmVyIG9mIHBhcmFtcy5cbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gaWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqIEBwYXJhbSBtZXRhZGF0YSAtIFRoZSByb29tJ3MgbWV0YWRhdGFcbiAqIEBwYXJhbSB1c2Vyc0FjY2Vzc2VzIC0gV2hpY2ggdXNlcnMgYXJlIGFsbG93ZWQgaW4gdGhlIHJvb21cbiAqIEBwYXJhbSBncm91cHNBY2Nlc3NlcyAtIFdoaWNoIGdyb3VwcyBhcmUgYWxsb3dlZCBpbiB0aGUgcm9vbVxuICogQHBhcmFtIGRlZmF1bHRBY2Nlc3NlcyAtIERlZmF1bHQgYWNjZXNzZXMgZm9yIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVJvb20oe1xuICBpZCxcbiAgbWV0YWRhdGEsXG4gIHVzZXJzQWNjZXNzZXMsXG4gIGdyb3Vwc0FjY2Vzc2VzLFxuICBkZWZhdWx0QWNjZXNzZXMgPSBbXSxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBcIi92Mi9yb29tc1wiO1xuXG4gIGNvbnN0IHBheWxvYWQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgaWQsXG4gICAgbWV0YWRhdGEsXG4gICAgdXNlcnNBY2Nlc3NlcyxcbiAgICBncm91cHNBY2Nlc3NlcyxcbiAgICBkZWZhdWx0QWNjZXNzZXMsXG4gIH0pO1xuXG4gIHJldHVybiBmZXRjaExpdmVibG9ja3NBcGk8Um9vbT4odXJsLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBwYXlsb2FkLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJjcmVhdGVSb29tIiwiaWQiLCJtZXRhZGF0YSIsInVzZXJzQWNjZXNzZXMiLCJncm91cHNBY2Nlc3NlcyIsImRlZmF1bHRBY2Nlc3NlcyIsInVybCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwibWV0aG9kIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/createRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/deleteRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/deleteRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"deleteRoom\": () => (/* binding */ deleteRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Delete Room\n *\n * Delete the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function deleteRoom({ roomId  }) {\n    const url = `/v2/rooms/${roomId}`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"DELETE\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlUm9vbS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsV0FBVyxFQUMvQkMsT0FBTSxFQUNBLEVBQWlDO0lBQ3ZDLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVELE9BQU8sQ0FBQztJQUNqQyxPQUFPRiwwREFBa0JBLENBQU9HLEtBQUs7UUFDbkNDLFFBQVE7SUFDVjtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlUm9vbS50cz9hMGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBSb29tIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGVsZXRlIFJvb21cbiAqXG4gKiBEZWxldGUgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVJvb20oe1xuICByb29tSWQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8Um9vbT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH1gO1xuICByZXR1cm4gZmV0Y2hMaXZlYmxvY2tzQXBpPFJvb20+KHVybCwge1xuICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgfSk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiZGVsZXRlUm9vbSIsInJvb21JZCIsInVybCIsIm1ldGhvZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/deleteRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/deleteStorage.ts":
/*!************************************************!*\
  !*** ./lib/server/liveblocks/deleteStorage.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"deleteStorage\": () => (/* binding */ deleteStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Delete Storage\n *\n * Delete the storage by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function deleteStorage({ roomId  }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"DELETE\"\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZGVsZXRlU3RvcmFnZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsY0FBYyxFQUNsQ0MsT0FBTSxFQUNBLEVBQWlDO0lBQ3ZDLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVELE9BQU8sUUFBUSxDQUFDO0lBQ3pDLE9BQU9GLDBEQUFrQkEsQ0FBT0csS0FBSztRQUNuQ0MsUUFBUTtJQUNWO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9kZWxldGVTdG9yYWdlLnRzP2VkMzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBEZWxldGUgU3RvcmFnZVxuICpcbiAqIERlbGV0ZSB0aGUgc3RvcmFnZSBieSB0aGUgcm9vbSdzIGlkXG4gKiBVc2VzIExpdmVibG9ja3MgQVBJXG4gKlxuICogQHBhcmFtIHJvb21JZCAtIFRoZSBpZCBvZiB0aGUgcm9vbVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU3RvcmFnZSh7XG4gIHJvb21JZCxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBgL3YyL3Jvb21zLyR7cm9vbUlkfS9zdG9yYWdlYDtcbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxSb29tPih1cmwsIHtcbiAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImRlbGV0ZVN0b3JhZ2UiLCJyb29tSWQiLCJ1cmwiLCJtZXRob2QiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/deleteStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getActiveUsers.ts":
/*!*************************************************!*\
  !*** ./lib/server/liveblocks/getActiveUsers.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getActiveUsers\": () => (/* binding */ getActiveUsers)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Active Users\n *\n * Get the active users in a room, given a roomId\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getActiveUsers({ roomId  }) {\n    const url = `/v2/rooms/${roomId}/active_users`;\n    const { data , error  } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data?.data ?? []\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFNOUM7Ozs7Ozs7Q0FPQyxHQUNNLGVBQWVDLGVBQWUsRUFDbkNDLE9BQU0sRUFDQSxFQUE2QztJQUNuRCxNQUFNQyxNQUFNLENBQUMsVUFBVSxFQUFFRCxPQUFPLGFBQWEsQ0FBQztJQUU5QyxNQUFNLEVBQUVFLEtBQUksRUFBRUMsTUFBSyxFQUFFLEdBQUcsTUFBTUwsMERBQWtCQSxDQUM5Q0c7SUFHRixJQUFJRSxPQUFPO1FBQ1QsT0FBTztZQUFFQTtRQUFNO0lBQ2pCLENBQUM7SUFFRCxPQUFPO1FBQUVELE1BQU1BLE1BQU1BLFFBQVEsRUFBRTtJQUFDO0FBQ2xDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnMudHM/YTBlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaEFwaVJlc3VsdCwgUm9vbUFjdGl2ZVVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICByb29tSWQ6IHN0cmluZztcbn1cblxuLyoqXG4gKiBHZXQgQWN0aXZlIFVzZXJzXG4gKlxuICogR2V0IHRoZSBhY3RpdmUgdXNlcnMgaW4gYSByb29tLCBnaXZlbiBhIHJvb21JZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFjdGl2ZVVzZXJzKHtcbiAgcm9vbUlkLFxufTogUHJvcHMpOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PFJvb21BY3RpdmVVc2VyW10+PiB7XG4gIGNvbnN0IHVybCA9IGAvdjIvcm9vbXMvJHtyb29tSWR9L2FjdGl2ZV91c2Vyc2A7XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgZmV0Y2hMaXZlYmxvY2tzQXBpPHsgZGF0YTogUm9vbUFjdGl2ZVVzZXJbXSB9PihcbiAgICB1cmxcbiAgKTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YTogZGF0YT8uZGF0YSA/PyBbXSB9O1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImdldEFjdGl2ZVVzZXJzIiwicm9vbUlkIiwidXJsIiwiZGF0YSIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getActiveUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts":
/*!********************************************************!*\
  !*** ./lib/server/liveblocks/getActiveUsersInRooms.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getActiveUsersInRooms\": () => (/* binding */ getActiveUsersInRooms)\n/* harmony export */ });\n/* harmony import */ var _getActiveUsers__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./getActiveUsers */ \"(api)/./lib/server/liveblocks/getActiveUsers.ts\");\n\n/**\n * Get Active Users in Rooms\n *\n * Get the active users in a list of rooms, given roomIds\n * Uses Liveblocks API\n *\n * @param roomId - The ids of the rooms\n */ async function getActiveUsersInRooms({ roomIds  }) {\n    const promises = [];\n    // Call Liveblocks API for each room\n    for (const roomId of roomIds){\n        promises.push((0,_getActiveUsers__WEBPACK_IMPORTED_MODULE_0__.getActiveUsers)({\n            roomId: roomId\n        }));\n    }\n    const currentActiveUsers = await Promise.all(promises);\n    const result = [];\n    // Add active user info to list ready to return\n    for (const [i, roomId1] of roomIds.entries()){\n        const { data , error  } = currentActiveUsers[i];\n        if (error) {\n            return {\n                error\n            };\n        }\n        const users = data ?? [];\n        result.push({\n            documentId: roomId1,\n            users: users\n        });\n    }\n    return {\n        data: result\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0QWN0aXZlVXNlcnNJblJvb21zLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBS2tEO0FBTWxEOzs7Ozs7O0NBT0MsR0FDTSxlQUFlQyxzQkFBc0IsRUFDMUNDLFFBQU8sRUFDRCxFQUFnRDtJQUN0RCxNQUFNQyxXQUF3RCxFQUFFO0lBRWhFLG9DQUFvQztJQUNwQyxLQUFLLE1BQU1DLFVBQVVGLFFBQVM7UUFDNUJDLFNBQVNFLElBQUksQ0FBQ0wsK0RBQWNBLENBQUM7WUFBRUksUUFBUUE7UUFBTztJQUNoRDtJQUVBLE1BQU1FLHFCQUFxQixNQUFNQyxRQUFRQyxHQUFHLENBQUNMO0lBQzdDLE1BQU1NLFNBQThCLEVBQUU7SUFFdEMsK0NBQStDO0lBQy9DLEtBQUssTUFBTSxDQUFDQyxHQUFHTixRQUFPLElBQUlGLFFBQVFTLE9BQU8sR0FBSTtRQUMzQyxNQUFNLEVBQUVDLEtBQUksRUFBRUMsTUFBSyxFQUFFLEdBQUdQLGtCQUFrQixDQUFDSSxFQUFFO1FBRTdDLElBQUlHLE9BQU87WUFDVCxPQUFPO2dCQUFFQTtZQUFNO1FBQ2pCLENBQUM7UUFFRCxNQUFNQyxRQUFRRixRQUFRLEVBQUU7UUFFeEJILE9BQU9KLElBQUksQ0FBQztZQUNWVSxZQUFZWDtZQUNaVSxPQUFPQTtRQUNUO0lBQ0Y7SUFFQSxPQUFPO1FBQUVGLE1BQU1IO0lBQU87QUFDeEIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9nZXRBY3RpdmVVc2Vyc0luUm9vbXMudHM/NGM4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBGZXRjaEFwaVJlc3VsdCxcbiAgTGl2ZVVzZXJzUmVzcG9uc2UsXG4gIFJvb21BY3RpdmVVc2VyLFxufSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGdldEFjdGl2ZVVzZXJzIH0gZnJvbSBcIi4vZ2V0QWN0aXZlVXNlcnNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkczogc3RyaW5nW107XG59XG5cbi8qKlxuICogR2V0IEFjdGl2ZSBVc2VycyBpbiBSb29tc1xuICpcbiAqIEdldCB0aGUgYWN0aXZlIHVzZXJzIGluIGEgbGlzdCBvZiByb29tcywgZ2l2ZW4gcm9vbUlkc1xuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWRzIG9mIHRoZSByb29tc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWN0aXZlVXNlcnNJblJvb21zKHtcbiAgcm9vbUlkcyxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxMaXZlVXNlcnNSZXNwb25zZVtdPj4ge1xuICBjb25zdCBwcm9taXNlczogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tQWN0aXZlVXNlcltdPj5bXSA9IFtdO1xuXG4gIC8vIENhbGwgTGl2ZWJsb2NrcyBBUEkgZm9yIGVhY2ggcm9vbVxuICBmb3IgKGNvbnN0IHJvb21JZCBvZiByb29tSWRzKSB7XG4gICAgcHJvbWlzZXMucHVzaChnZXRBY3RpdmVVc2Vycyh7IHJvb21JZDogcm9vbUlkIH0pKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRBY3RpdmVVc2VycyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgY29uc3QgcmVzdWx0OiBMaXZlVXNlcnNSZXNwb25zZVtdID0gW107XG5cbiAgLy8gQWRkIGFjdGl2ZSB1c2VyIGluZm8gdG8gbGlzdCByZWFkeSB0byByZXR1cm5cbiAgZm9yIChjb25zdCBbaSwgcm9vbUlkXSBvZiByb29tSWRzLmVudHJpZXMoKSkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGN1cnJlbnRBY3RpdmVVc2Vyc1tpXTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VycyA9IGRhdGEgPz8gW107XG5cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBkb2N1bWVudElkOiByb29tSWQsXG4gICAgICB1c2VyczogdXNlcnMsXG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4geyBkYXRhOiByZXN1bHQgfTtcbn1cbiJdLCJuYW1lcyI6WyJnZXRBY3RpdmVVc2VycyIsImdldEFjdGl2ZVVzZXJzSW5Sb29tcyIsInJvb21JZHMiLCJwcm9taXNlcyIsInJvb21JZCIsInB1c2giLCJjdXJyZW50QWN0aXZlVXNlcnMiLCJQcm9taXNlIiwiYWxsIiwicmVzdWx0IiwiaSIsImVudHJpZXMiLCJkYXRhIiwiZXJyb3IiLCJ1c2VycyIsImRvY3VtZW50SWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getNextRooms.ts":
/*!***********************************************!*\
  !*** ./lib/server/liveblocks/getNextRooms.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getNextRoom\": () => (/* binding */ getNextRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Next Rooms\n *\n * Get the next rooms from the next param\n * The `next` param is retrieved from /pages/api/documents/index.ts\n * That API is called on the client within /lib/client/getDocumentsByGroup.ts\n * Uses Liveblocks API\n *\n * @param next - String containing a URL to get the next set of rooms, returned from Liveblocks API\n */ async function getNextRoom({ next  }) {\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(next);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0TmV4dFJvb21zLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzhDO0FBTTlDOzs7Ozs7Ozs7Q0FTQyxHQUNNLGVBQWVDLFlBQVksRUFDaENDLEtBQUksRUFDRSxFQUE2QztJQUNuRCxPQUFPRiwwREFBa0JBLENBQW1CRTtBQUM5QyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2dldE5leHRSb29tcy50cz9kMTlhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBHZXRSb29tc1Jlc3BvbnNlIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgbmV4dDogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldCBOZXh0IFJvb21zXG4gKlxuICogR2V0IHRoZSBuZXh0IHJvb21zIGZyb20gdGhlIG5leHQgcGFyYW1cbiAqIFRoZSBgbmV4dGAgcGFyYW0gaXMgcmV0cmlldmVkIGZyb20gL3BhZ2VzL2FwaS9kb2N1bWVudHMvaW5kZXgudHNcbiAqIFRoYXQgQVBJIGlzIGNhbGxlZCBvbiB0aGUgY2xpZW50IHdpdGhpbiAvbGliL2NsaWVudC9nZXREb2N1bWVudHNCeUdyb3VwLnRzXG4gKiBVc2VzIExpdmVibG9ja3MgQVBJXG4gKlxuICogQHBhcmFtIG5leHQgLSBTdHJpbmcgY29udGFpbmluZyBhIFVSTCB0byBnZXQgdGhlIG5leHQgc2V0IG9mIHJvb21zLCByZXR1cm5lZCBmcm9tIExpdmVibG9ja3MgQVBJXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXROZXh0Um9vbSh7XG4gIG5leHQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8R2V0Um9vbXNSZXNwb25zZT4+IHtcbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxHZXRSb29tc1Jlc3BvbnNlPihuZXh0KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJnZXROZXh0Um9vbSIsIm5leHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getNextRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getRoom.ts":
/*!******************************************!*\
  !*** ./lib/server/liveblocks/getRoom.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getRoom\": () => (/* binding */ getRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Room\n *\n * Get the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getRoom({ roomId  }) {\n    const url = `/v2/rooms/${roomId}`;\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7OztDQU9DLEdBQ00sZUFBZUMsUUFBUSxFQUM1QkMsT0FBTSxFQUNBLEVBQWlDO0lBQ3ZDLE1BQU1DLE1BQU0sQ0FBQyxVQUFVLEVBQUVELE9BQU8sQ0FBQztJQUNqQyxPQUFPRiwwREFBa0JBLENBQU9HO0FBQ2xDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbS50cz8xMDEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBSb29tIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IFJvb21cbiAqXG4gKiBHZXQgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQgb2YgdGhlIHJvb21cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJvb20oe1xuICByb29tSWQsXG59OiBQcm9wcyk6IFByb21pc2U8RmV0Y2hBcGlSZXN1bHQ8Um9vbT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH1gO1xuICByZXR1cm4gZmV0Y2hMaXZlYmxvY2tzQXBpPFJvb20+KHVybCk7XG59XG4iXSwibmFtZXMiOlsiZmV0Y2hMaXZlYmxvY2tzQXBpIiwiZ2V0Um9vbSIsInJvb21JZCIsInVybCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getRooms.ts":
/*!*******************************************!*\
  !*** ./lib/server/liveblocks/getRooms.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getRooms\": () => (/* binding */ getRooms)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Rooms\n *\n * Get a list of rooms\n * Uses Liveblocks API\n *\n * @param limit - The amount of rooms to load, between 1 and 100, defaults to 20\n * @param startingAfter - A cursor used for pagination, get the value from the response of the previous page\n * @param userId - The id of the user to filter\n * @param groupIds - The group to filter\n * @param metadata - The metadata to filter\n */ async function getRooms({ limit , startingAfter , userId , groupIds , metadata  }) {\n    let url = `/v2/rooms?`;\n    if (limit) {\n        url += `&limit=${limit}`;\n    }\n    if (startingAfter) {\n        url += `&startingAfter=${startingAfter}`;\n    }\n    if (userId) {\n        url += `&userId=${userId}`;\n    }\n    if (groupIds && groupIds.length > 0) {\n        url += `&groupIds=${groupIds}`;\n    }\n    if (metadata) {\n        Object.entries(metadata).forEach(([key, val])=>{\n            url += `&metadata.${key}=${val}`;\n        });\n    }\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbXMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFVOUM7Ozs7Ozs7Ozs7O0NBV0MsR0FDTSxlQUFlQyxTQUFTLEVBQzdCQyxNQUFLLEVBQ0xDLGNBQWEsRUFDYkMsT0FBTSxFQUNOQyxTQUFRLEVBQ1JDLFNBQVEsRUFDRixFQUE2QztJQUNuRCxJQUFJQyxNQUFNLENBQUMsVUFBVSxDQUFDO0lBRXRCLElBQUlMLE9BQU87UUFDVEssT0FBTyxDQUFDLE9BQU8sRUFBRUwsTUFBTSxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJQyxlQUFlO1FBQ2pCSSxPQUFPLENBQUMsZUFBZSxFQUFFSixjQUFjLENBQUM7SUFDMUMsQ0FBQztJQUVELElBQUlDLFFBQVE7UUFDVkcsT0FBTyxDQUFDLFFBQVEsRUFBRUgsT0FBTyxDQUFDO0lBQzVCLENBQUM7SUFFRCxJQUFJQyxZQUFZQSxTQUFTRyxNQUFNLEdBQUcsR0FBRztRQUNuQ0QsT0FBTyxDQUFDLFVBQVUsRUFBRUYsU0FBUyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJQyxVQUFVO1FBQ1pHLE9BQU9DLE9BQU8sQ0FBQ0osVUFBVUssT0FBTyxDQUFDLENBQUMsQ0FBQ0MsS0FBS0MsSUFBSSxHQUFLO1lBQy9DTixPQUFPLENBQUMsVUFBVSxFQUFFSyxJQUFJLENBQUMsRUFBRUMsSUFBSSxDQUFDO1FBQ2xDO0lBQ0YsQ0FBQztJQUVELE9BQU9iLDBEQUFrQkEsQ0FBbUJPO0FBQzlDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0Um9vbXMudHM/YzU3MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaEFwaVJlc3VsdCwgR2V0Um9vbXNSZXNwb25zZSwgUm9vbU1ldGFkYXRhIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZ3JvdXBJZHM/OiBzdHJpbmdbXSB8IHN0cmluZztcbiAgbGltaXQ/OiBudW1iZXI7XG4gIG1ldGFkYXRhPzogUm9vbU1ldGFkYXRhO1xuICBzdGFydGluZ0FmdGVyPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IFJvb21zXG4gKlxuICogR2V0IGEgbGlzdCBvZiByb29tc1xuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBhbW91bnQgb2Ygcm9vbXMgdG8gbG9hZCwgYmV0d2VlbiAxIGFuZCAxMDAsIGRlZmF1bHRzIHRvIDIwXG4gKiBAcGFyYW0gc3RhcnRpbmdBZnRlciAtIEEgY3Vyc29yIHVzZWQgZm9yIHBhZ2luYXRpb24sIGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgcmVzcG9uc2Ugb2YgdGhlIHByZXZpb3VzIHBhZ2VcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgaWQgb2YgdGhlIHVzZXIgdG8gZmlsdGVyXG4gKiBAcGFyYW0gZ3JvdXBJZHMgLSBUaGUgZ3JvdXAgdG8gZmlsdGVyXG4gKiBAcGFyYW0gbWV0YWRhdGEgLSBUaGUgbWV0YWRhdGEgdG8gZmlsdGVyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSb29tcyh7XG4gIGxpbWl0LFxuICBzdGFydGluZ0FmdGVyLFxuICB1c2VySWQsXG4gIGdyb3VwSWRzLFxuICBtZXRhZGF0YSxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXRSb29tc1Jlc3BvbnNlPj4ge1xuICBsZXQgdXJsID0gYC92Mi9yb29tcz9gO1xuXG4gIGlmIChsaW1pdCkge1xuICAgIHVybCArPSBgJmxpbWl0PSR7bGltaXR9YDtcbiAgfVxuXG4gIGlmIChzdGFydGluZ0FmdGVyKSB7XG4gICAgdXJsICs9IGAmc3RhcnRpbmdBZnRlcj0ke3N0YXJ0aW5nQWZ0ZXJ9YDtcbiAgfVxuXG4gIGlmICh1c2VySWQpIHtcbiAgICB1cmwgKz0gYCZ1c2VySWQ9JHt1c2VySWR9YDtcbiAgfVxuXG4gIGlmIChncm91cElkcyAmJiBncm91cElkcy5sZW5ndGggPiAwKSB7XG4gICAgdXJsICs9IGAmZ3JvdXBJZHM9JHtncm91cElkc31gO1xuICB9XG5cbiAgaWYgKG1ldGFkYXRhKSB7XG4gICAgT2JqZWN0LmVudHJpZXMobWV0YWRhdGEpLmZvckVhY2goKFtrZXksIHZhbF0pID0+IHtcbiAgICAgIHVybCArPSBgJm1ldGFkYXRhLiR7a2V5fT0ke3ZhbH1gO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxHZXRSb29tc1Jlc3BvbnNlPih1cmwpO1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImdldFJvb21zIiwibGltaXQiLCJzdGFydGluZ0FmdGVyIiwidXNlcklkIiwiZ3JvdXBJZHMiLCJtZXRhZGF0YSIsInVybCIsImxlbmd0aCIsIk9iamVjdCIsImVudHJpZXMiLCJmb3JFYWNoIiwia2V5IiwidmFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getRooms.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/getStorage.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/getStorage.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getStorage\": () => (/* binding */ getStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Get Storage\n *\n * Get a room's storage as a JS object\n * Note that this returns an object using the Liveblocks data structure\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n */ async function getStorage({ roomId  }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    const { data , error  } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url);\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data ?? {}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvZ2V0U3RvcmFnZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQU05Qzs7Ozs7Ozs7Q0FRQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLE9BQU0sRUFDQSxFQUErQztJQUNyRCxNQUFNQyxNQUFNLENBQUMsVUFBVSxFQUFFRCxPQUFPLFFBQVEsQ0FBQztJQUV6QyxNQUFNLEVBQUVFLEtBQUksRUFBRUMsTUFBSyxFQUFFLEdBQUcsTUFBTUwsMERBQWtCQSxDQUFxQkc7SUFFckUsSUFBSUUsT0FBTztRQUNULE9BQU87WUFBRUE7UUFBTTtJQUNqQixDQUFDO0lBRUQsT0FBTztRQUFFRCxNQUFNQSxRQUFRLENBQUM7SUFBRTtBQUM1QixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9saXZlYmxvY2tzL2dldFN0b3JhZ2UudHM/ZGJlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGZXRjaEFwaVJlc3VsdCwgR2V0U3RvcmFnZVJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBmZXRjaExpdmVibG9ja3NBcGkgfSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgcm9vbUlkOiBzdHJpbmc7XG59XG5cbi8qKlxuICogR2V0IFN0b3JhZ2VcbiAqXG4gKiBHZXQgYSByb29tJ3Mgc3RvcmFnZSBhcyBhIEpTIG9iamVjdFxuICogTm90ZSB0aGF0IHRoaXMgcmV0dXJucyBhbiBvYmplY3QgdXNpbmcgdGhlIExpdmVibG9ja3MgZGF0YSBzdHJ1Y3R1cmVcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gcm9vbUlkIC0gVGhlIGlkIG9mIHRoZSByb29tXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdG9yYWdlKHtcbiAgcm9vbUlkLFxufTogUHJvcHMpOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PEdldFN0b3JhZ2VSZXNwb25zZT4+IHtcbiAgY29uc3QgdXJsID0gYC92Mi9yb29tcy8ke3Jvb21JZH0vc3RvcmFnZWA7XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgZmV0Y2hMaXZlYmxvY2tzQXBpPEdldFN0b3JhZ2VSZXNwb25zZT4odXJsKTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YTogZGF0YSA/PyB7fSB9O1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImdldFN0b3JhZ2UiLCJyb29tSWQiLCJ1cmwiLCJkYXRhIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/getStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/index.ts":
/*!****************************************!*\
  !*** ./lib/server/liveblocks/index.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _authorize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./authorize */ \"(api)/./lib/server/liveblocks/authorize.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _authorize__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _authorize__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _createRoom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./createRoom */ \"(api)/./lib/server/liveblocks/createRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _createRoom__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _createRoom__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _deleteStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./deleteStorage */ \"(api)/./lib/server/liveblocks/deleteStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _deleteStorage__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _deleteStorage__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./getActiveUsers */ \"(api)/./lib/server/liveblocks/getActiveUsers.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getActiveUsers__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getActiveUsersInRooms */ \"(api)/./lib/server/liveblocks/getActiveUsersInRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getActiveUsersInRooms__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getNextRooms__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getNextRooms */ \"(api)/./lib/server/liveblocks/getNextRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getNextRooms__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getNextRooms__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRoom__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./getRoom */ \"(api)/./lib/server/liveblocks/getRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRoom__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRoom__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRooms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./getRooms */ \"(api)/./lib/server/liveblocks/getRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRooms__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRooms__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getStorage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./getStorage */ \"(api)/./lib/server/liveblocks/getStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getStorage__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getStorage__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _initializeStorage__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./initializeStorage */ \"(api)/./lib/server/liveblocks/initializeStorage.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _initializeStorage__WEBPACK_IMPORTED_MODULE_9__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _initializeStorage__WEBPACK_IMPORTED_MODULE_9__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _updateRoom__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./updateRoom */ \"(api)/./lib/server/liveblocks/updateRoom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _updateRoom__WEBPACK_IMPORTED_MODULE_10__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _updateRoom__WEBPACK_IMPORTED_MODULE_10__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRCO0FBQ0M7QUFDRztBQUNDO0FBQ087QUFDVDtBQUNMO0FBQ0M7QUFDRTtBQUNPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5kZXgudHM/OWQ2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9hdXRob3JpemVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NyZWF0ZVJvb21cIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RlbGV0ZVN0b3JhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldEFjdGl2ZVVzZXJzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXRBY3RpdmVVc2Vyc0luUm9vbXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldE5leHRSb29tc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0Um9vbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZ2V0Um9vbXNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFN0b3JhZ2VcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2luaXRpYWxpemVTdG9yYWdlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91cGRhdGVSb29tXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/initializeStorage.ts":
/*!****************************************************!*\
  !*** ./lib/server/liveblocks/initializeStorage.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"initializeStorage\": () => (/* binding */ initializeStorage)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Initialize Storage\n *\n * Initialize a room's storage and return the value as a JS object\n * The room must already exist and have an empty storage\n * Uses Liveblocks API\n *\n * @param roomId - The id of the room\n * @param storage - The Liveblocks format storage object to initialize the storage\n */ async function initializeStorage({ roomId , storage  }) {\n    const url = `/v2/rooms/${roomId}/storage`;\n    const payload = storage ? JSON.stringify(storage) : undefined;\n    const { data , error  } = await (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: payload\n    });\n    if (error) {\n        return {\n            error\n        };\n    }\n    return {\n        data: data ?? {}\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvaW5pdGlhbGl6ZVN0b3JhZ2UudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEM7QUFPOUM7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZUMsa0JBQWtCLEVBQ3RDQyxPQUFNLEVBQ05DLFFBQU8sRUFDRCxFQUErQztJQUNyRCxNQUFNQyxNQUFNLENBQUMsVUFBVSxFQUFFRixPQUFPLFFBQVEsQ0FBQztJQUV6QyxNQUFNRyxVQUFVRixVQUFVRyxLQUFLQyxTQUFTLENBQUNKLFdBQVdLLFNBQVM7SUFFN0QsTUFBTSxFQUFFQyxLQUFJLEVBQUVDLE1BQUssRUFBRSxHQUFHLE1BQU1WLDBEQUFrQkEsQ0FBcUJJLEtBQUs7UUFDeEVPLFFBQVE7UUFDUkMsTUFBTVA7SUFDUjtJQUVBLElBQUlLLE9BQU87UUFDVCxPQUFPO1lBQUVBO1FBQU07SUFDakIsQ0FBQztJQUVELE9BQU87UUFBRUQsTUFBTUEsUUFBUSxDQUFDO0lBQUU7QUFDNUIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy9pbml0aWFsaXplU3RvcmFnZS50cz85YWZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZldGNoQXBpUmVzdWx0LCBHZXRTdG9yYWdlUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICByb29tSWQ6IHN0cmluZztcbiAgc3RvcmFnZT86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufVxuXG4vKipcbiAqIEluaXRpYWxpemUgU3RvcmFnZVxuICpcbiAqIEluaXRpYWxpemUgYSByb29tJ3Mgc3RvcmFnZSBhbmQgcmV0dXJuIHRoZSB2YWx1ZSBhcyBhIEpTIG9iamVjdFxuICogVGhlIHJvb20gbXVzdCBhbHJlYWR5IGV4aXN0IGFuZCBoYXZlIGFuIGVtcHR5IHN0b3JhZ2VcbiAqIFVzZXMgTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBAcGFyYW0gcm9vbUlkIC0gVGhlIGlkIG9mIHRoZSByb29tXG4gKiBAcGFyYW0gc3RvcmFnZSAtIFRoZSBMaXZlYmxvY2tzIGZvcm1hdCBzdG9yYWdlIG9iamVjdCB0byBpbml0aWFsaXplIHRoZSBzdG9yYWdlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplU3RvcmFnZSh7XG4gIHJvb21JZCxcbiAgc3RvcmFnZSxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxHZXRTdG9yYWdlUmVzcG9uc2U+PiB7XG4gIGNvbnN0IHVybCA9IGAvdjIvcm9vbXMvJHtyb29tSWR9L3N0b3JhZ2VgO1xuXG4gIGNvbnN0IHBheWxvYWQgPSBzdG9yYWdlID8gSlNPTi5zdHJpbmdpZnkoc3RvcmFnZSkgOiB1bmRlZmluZWQ7XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgZmV0Y2hMaXZlYmxvY2tzQXBpPEdldFN0b3JhZ2VSZXNwb25zZT4odXJsLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5OiBwYXlsb2FkLFxuICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG5cbiAgcmV0dXJuIHsgZGF0YTogZGF0YSA/PyB7fSB9O1xufVxuIl0sIm5hbWVzIjpbImZldGNoTGl2ZWJsb2Nrc0FwaSIsImluaXRpYWxpemVTdG9yYWdlIiwicm9vbUlkIiwic3RvcmFnZSIsInVybCIsInBheWxvYWQiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwiZGF0YSIsImVycm9yIiwibWV0aG9kIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/initializeStorage.ts\n");

/***/ }),

/***/ "(api)/./lib/server/liveblocks/updateRoom.ts":
/*!*********************************************!*\
  !*** ./lib/server/liveblocks/updateRoom.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"updateRoom\": () => (/* binding */ updateRoom)\n/* harmony export */ });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils */ \"(api)/./lib/server/utils/index.ts\");\n\n/**\n * Update Room\n *\n * Get the room by the room's id\n * Uses Liveblocks API\n *\n * @param roomId - The id/name of the room\n * @param metadata - The room's metadata object\n * @param usersAccesses - The room's user accesses\n * @param groupsAccesses - The room's group accesses\n * @param defaultAccesses - The default access value\n */ async function updateRoom({ roomId , metadata , usersAccesses , groupsAccesses , defaultAccesses  }) {\n    const url = `/v2/rooms/${roomId}`;\n    let payload = {};\n    if (metadata) {\n        payload = {\n            ...payload,\n            metadata\n        };\n    }\n    if (usersAccesses) {\n        payload = {\n            ...payload,\n            usersAccesses\n        };\n    }\n    if (groupsAccesses) {\n        payload = {\n            ...payload,\n            groupsAccesses\n        };\n    }\n    if (defaultAccesses) {\n        payload = {\n            ...payload,\n            defaultAccesses\n        };\n    }\n    return (0,_utils__WEBPACK_IMPORTED_MODULE_0__.fetchLiveblocksApi)(url, {\n        method: \"POST\",\n        body: JSON.stringify(payload)\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL2xpdmVibG9ja3MvdXBkYXRlUm9vbS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4QztBQVU5Qzs7Ozs7Ozs7Ozs7Q0FXQyxHQUNNLGVBQWVDLFdBQVcsRUFDL0JDLE9BQU0sRUFDTkMsU0FBUSxFQUNSQyxjQUFhLEVBQ2JDLGVBQWMsRUFDZEMsZ0JBQWUsRUFDVCxFQUFpQztJQUN2QyxNQUFNQyxNQUFNLENBQUMsVUFBVSxFQUFFTCxPQUFPLENBQUM7SUFFakMsSUFBSU0sVUFBVSxDQUFDO0lBRWYsSUFBSUwsVUFBVTtRQUNaSyxVQUFVO1lBQUUsR0FBR0EsT0FBTztZQUFFTDtRQUFTO0lBQ25DLENBQUM7SUFFRCxJQUFJQyxlQUFlO1FBQ2pCSSxVQUFVO1lBQUUsR0FBR0EsT0FBTztZQUFFSjtRQUFjO0lBQ3hDLENBQUM7SUFFRCxJQUFJQyxnQkFBZ0I7UUFDbEJHLFVBQVU7WUFBRSxHQUFHQSxPQUFPO1lBQUVIO1FBQWU7SUFDekMsQ0FBQztJQUVELElBQUlDLGlCQUFpQjtRQUNuQkUsVUFBVTtZQUFFLEdBQUdBLE9BQU87WUFBRUY7UUFBZ0I7SUFDMUMsQ0FBQztJQUVELE9BQU9OLDBEQUFrQkEsQ0FBT08sS0FBSztRQUNuQ0UsUUFBUTtRQUNSQyxNQUFNQyxLQUFLQyxTQUFTLENBQUNKO0lBQ3ZCO0FBQ0YsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbGl2ZWJsb2Nrcy91cGRhdGVSb29tLnRzP2I3NzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hBcGlSZXN1bHQsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IGZldGNoTGl2ZWJsb2Nrc0FwaSB9IGZyb20gXCIuLi91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkZWZhdWx0QWNjZXNzZXM/OiBSb29tW1wiZGVmYXVsdEFjY2Vzc2VzXCJdO1xuICBncm91cHNBY2Nlc3Nlcz86IFJvb21bXCJncm91cHNBY2Nlc3Nlc1wiXTtcbiAgbWV0YWRhdGE/OiBSb29tW1wibWV0YWRhdGFcIl07XG4gIHJvb21JZDogUm9vbVtcImlkXCJdO1xuICB1c2Vyc0FjY2Vzc2VzPzogUm9vbVtcInVzZXJzQWNjZXNzZXNcIl07XG59XG5cbi8qKlxuICogVXBkYXRlIFJvb21cbiAqXG4gKiBHZXQgdGhlIHJvb20gYnkgdGhlIHJvb20ncyBpZFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSByb29tSWQgLSBUaGUgaWQvbmFtZSBvZiB0aGUgcm9vbVxuICogQHBhcmFtIG1ldGFkYXRhIC0gVGhlIHJvb20ncyBtZXRhZGF0YSBvYmplY3RcbiAqIEBwYXJhbSB1c2Vyc0FjY2Vzc2VzIC0gVGhlIHJvb20ncyB1c2VyIGFjY2Vzc2VzXG4gKiBAcGFyYW0gZ3JvdXBzQWNjZXNzZXMgLSBUaGUgcm9vbSdzIGdyb3VwIGFjY2Vzc2VzXG4gKiBAcGFyYW0gZGVmYXVsdEFjY2Vzc2VzIC0gVGhlIGRlZmF1bHQgYWNjZXNzIHZhbHVlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVSb29tKHtcbiAgcm9vbUlkLFxuICBtZXRhZGF0YSxcbiAgdXNlcnNBY2Nlc3NlcyxcbiAgZ3JvdXBzQWNjZXNzZXMsXG4gIGRlZmF1bHRBY2Nlc3Nlcyxcbn06IFByb3BzKTogUHJvbWlzZTxGZXRjaEFwaVJlc3VsdDxSb29tPj4ge1xuICBjb25zdCB1cmwgPSBgL3YyL3Jvb21zLyR7cm9vbUlkfWA7XG5cbiAgbGV0IHBheWxvYWQgPSB7fTtcblxuICBpZiAobWV0YWRhdGEpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCBtZXRhZGF0YSB9O1xuICB9XG5cbiAgaWYgKHVzZXJzQWNjZXNzZXMpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCB1c2Vyc0FjY2Vzc2VzIH07XG4gIH1cblxuICBpZiAoZ3JvdXBzQWNjZXNzZXMpIHtcbiAgICBwYXlsb2FkID0geyAuLi5wYXlsb2FkLCBncm91cHNBY2Nlc3NlcyB9O1xuICB9XG5cbiAgaWYgKGRlZmF1bHRBY2Nlc3Nlcykge1xuICAgIHBheWxvYWQgPSB7IC4uLnBheWxvYWQsIGRlZmF1bHRBY2Nlc3NlcyB9O1xuICB9XG5cbiAgcmV0dXJuIGZldGNoTGl2ZWJsb2Nrc0FwaTxSb29tPih1cmwsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBheWxvYWQpLFxuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJmZXRjaExpdmVibG9ja3NBcGkiLCJ1cGRhdGVSb29tIiwicm9vbUlkIiwibWV0YWRhdGEiLCJ1c2Vyc0FjY2Vzc2VzIiwiZ3JvdXBzQWNjZXNzZXMiLCJkZWZhdWx0QWNjZXNzZXMiLCJ1cmwiLCJwYXlsb2FkIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/liveblocks/updateRoom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/notify/index.ts":
/*!************************************!*\
  !*** ./lib/server/notify/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _notify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./notify */ \"(api)/./lib/server/notify/notify.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _notify__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _notify__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL25vdGlmeS9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvbm90aWZ5L2luZGV4LnRzPzQ5MDIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vbm90aWZ5XCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/notify/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/notify/notify.ts":
/*!*************************************!*\
  !*** ./lib/server/notify/notify.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"notify\": () => (/* binding */ notify)\n/* harmony export */ });\nconst DEFAULT_SENDER = \"noreply@example.com\";\n/**\n * Simulate sending an email to a newly invited user\n * For example with SendGrid:\n * https://github.com/sendgrid/sendgrid-nodejs/tree/main/packages/mail\n * @param to - The email receiver\n * @param [from] - The email sender\n * @param subject - The title of the email\n * @param [text] - The text content of the email\n * @param [html] - The HTML content of the email\n */ async function notify({ to , from =DEFAULT_SENDER , subject , text , html  }) {\n    const msg = {\n        to,\n        from,\n        subject,\n        text,\n        html\n    };\n    // Send email message\n    // @sendgrid/mail example:\n    /*\n  try {\n    await sgMail.send(msg);\n  } catch (error) {\n    console.error(error);\n\n    if (error.response) {\n      console.error(error.response.body)\n    }\n  }\n  */ return true;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL25vdGlmeS9ub3RpZnkudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQWdCQSxNQUFNQSxpQkFBaUI7QUFFdkI7Ozs7Ozs7OztDQVNDLEdBQ00sZUFBZUMsT0FBTyxFQUMzQkMsR0FBRSxFQUNGQyxNQUFPSCxlQUFjLEVBQ3JCSSxRQUFPLEVBQ1BDLEtBQUksRUFDSkMsS0FBSSxFQUNRLEVBQW9CO0lBQ2hDLE1BQU1DLE1BQU07UUFBRUw7UUFBSUM7UUFBTUM7UUFBU0M7UUFBTUM7SUFBSztJQUU1QyxxQkFBcUI7SUFDckIsMEJBQTBCO0lBQzFCOzs7Ozs7Ozs7O0VBVUEsR0FFQSxPQUFPLElBQUk7QUFDYixDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci9ub3RpZnkvbm90aWZ5LnRzP2NlMmYiXSwic291cmNlc0NvbnRlbnQiOlsidHlwZSBOb3RpZnlDb250ZW50ID1cbiAgfCB7XG4gICAgICBodG1sOiBzdHJpbmc7XG4gICAgICB0ZXh0PzogbmV2ZXI7XG4gICAgfVxuICB8IHtcbiAgICAgIGh0bWw/OiBuZXZlcjtcbiAgICAgIHRleHQ6IHN0cmluZztcbiAgICB9O1xuXG50eXBlIE5vdGlmeVByb3BzID0gTm90aWZ5Q29udGVudCAmIHtcbiAgZnJvbT86IHN0cmluZztcbiAgc3ViamVjdDogc3RyaW5nO1xuICB0bzogc3RyaW5nO1xufTtcblxuY29uc3QgREVGQVVMVF9TRU5ERVIgPSBcIm5vcmVwbHlAZXhhbXBsZS5jb21cIjtcblxuLyoqXG4gKiBTaW11bGF0ZSBzZW5kaW5nIGFuIGVtYWlsIHRvIGEgbmV3bHkgaW52aXRlZCB1c2VyXG4gKiBGb3IgZXhhbXBsZSB3aXRoIFNlbmRHcmlkOlxuICogaHR0cHM6Ly9naXRodWIuY29tL3NlbmRncmlkL3NlbmRncmlkLW5vZGVqcy90cmVlL21haW4vcGFja2FnZXMvbWFpbFxuICogQHBhcmFtIHRvIC0gVGhlIGVtYWlsIHJlY2VpdmVyXG4gKiBAcGFyYW0gW2Zyb21dIC0gVGhlIGVtYWlsIHNlbmRlclxuICogQHBhcmFtIHN1YmplY3QgLSBUaGUgdGl0bGUgb2YgdGhlIGVtYWlsXG4gKiBAcGFyYW0gW3RleHRdIC0gVGhlIHRleHQgY29udGVudCBvZiB0aGUgZW1haWxcbiAqIEBwYXJhbSBbaHRtbF0gLSBUaGUgSFRNTCBjb250ZW50IG9mIHRoZSBlbWFpbFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbm90aWZ5KHtcbiAgdG8sXG4gIGZyb20gPSBERUZBVUxUX1NFTkRFUixcbiAgc3ViamVjdCxcbiAgdGV4dCxcbiAgaHRtbCxcbn06IE5vdGlmeVByb3BzKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGNvbnN0IG1zZyA9IHsgdG8sIGZyb20sIHN1YmplY3QsIHRleHQsIGh0bWwgfTtcblxuICAvLyBTZW5kIGVtYWlsIG1lc3NhZ2VcbiAgLy8gQHNlbmRncmlkL21haWwgZXhhbXBsZTpcbiAgLypcbiAgdHJ5IHtcbiAgICBhd2FpdCBzZ01haWwuc2VuZChtc2cpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXG4gICAgaWYgKGVycm9yLnJlc3BvbnNlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yLnJlc3BvbnNlLmJvZHkpXG4gICAgfVxuICB9XG4gICovXG5cbiAgcmV0dXJuIHRydWU7XG59XG4iXSwibmFtZXMiOlsiREVGQVVMVF9TRU5ERVIiLCJub3RpZnkiLCJ0byIsImZyb20iLCJzdWJqZWN0IiwidGV4dCIsImh0bWwiLCJtc2ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/notify/notify.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocumentGroups.ts":
/*!*************************************************!*\
  !*** ./lib/server/utils/buildDocumentGroups.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buildDocumentGroups\": () => (/* binding */ buildDocumentGroups)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n\n/**\n * Convert a Liveblocks room result into a list of DocumentGroups\n *\n * @param result - Liveblocks getRoomById() result\n */ async function buildDocumentGroups(result) {\n    const groups = [];\n    for (const [id, accessValue] of Object.entries(result.groupsAccesses)){\n        const group = await (0,_database__WEBPACK_IMPORTED_MODULE_0__.getGroup)(id);\n        if (group) {\n            groups.push({\n                ...group,\n                access: (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_1__.roomAccessesToDocumentAccess)(accessValue, false)\n            });\n        }\n    }\n    return groups;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRHcm91cHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ3VDO0FBQzRCO0FBRW5FOzs7O0NBSUMsR0FDTSxlQUFlRSxvQkFBb0JDLE1BQVksRUFBRTtJQUN0RCxNQUFNQyxTQUEwQixFQUFFO0lBRWxDLEtBQUssTUFBTSxDQUFDQyxJQUFJQyxZQUFZLElBQUlDLE9BQU9DLE9BQU8sQ0FBQ0wsT0FBT00sY0FBYyxFQUFHO1FBQ3JFLE1BQU1DLFFBQVEsTUFBTVYsbURBQVFBLENBQUNLO1FBRTdCLElBQUlLLE9BQU87WUFDVE4sT0FBT08sSUFBSSxDQUFDO2dCQUNWLEdBQUdELEtBQUs7Z0JBQ1JFLFFBQVFYLGdGQUE0QkEsQ0FBQ0ssYUFBYSxLQUFLO1lBQ3pEO1FBQ0YsQ0FBQztJQUNIO0lBRUEsT0FBT0Y7QUFDVCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9idWlsZERvY3VtZW50R3JvdXBzLnRzP2E5Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRHcm91cCwgUm9vbSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuaW1wb3J0IHsgZ2V0R3JvdXAgfSBmcm9tIFwiLi4vZGF0YWJhc2VcIjtcbmltcG9ydCB7IHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MgfSBmcm9tIFwiLi9jb252ZXJ0QWNjZXNzVHlwZVwiO1xuXG4vKipcbiAqIENvbnZlcnQgYSBMaXZlYmxvY2tzIHJvb20gcmVzdWx0IGludG8gYSBsaXN0IG9mIERvY3VtZW50R3JvdXBzXG4gKlxuICogQHBhcmFtIHJlc3VsdCAtIExpdmVibG9ja3MgZ2V0Um9vbUJ5SWQoKSByZXN1bHRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkRG9jdW1lbnRHcm91cHMocmVzdWx0OiBSb29tKSB7XG4gIGNvbnN0IGdyb3VwczogRG9jdW1lbnRHcm91cFtdID0gW107XG5cbiAgZm9yIChjb25zdCBbaWQsIGFjY2Vzc1ZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZXN1bHQuZ3JvdXBzQWNjZXNzZXMpKSB7XG4gICAgY29uc3QgZ3JvdXAgPSBhd2FpdCBnZXRHcm91cChpZCk7XG5cbiAgICBpZiAoZ3JvdXApIHtcbiAgICAgIGdyb3Vwcy5wdXNoKHtcbiAgICAgICAgLi4uZ3JvdXAsXG4gICAgICAgIGFjY2Vzczogcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyhhY2Nlc3NWYWx1ZSwgZmFsc2UpLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGdyb3Vwcztcbn1cbiJdLCJuYW1lcyI6WyJnZXRHcm91cCIsInJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MiLCJidWlsZERvY3VtZW50R3JvdXBzIiwicmVzdWx0IiwiZ3JvdXBzIiwiaWQiLCJhY2Nlc3NWYWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJncm91cHNBY2Nlc3NlcyIsImdyb3VwIiwicHVzaCIsImFjY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocumentGroups.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocumentUsers.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/buildDocumentUsers.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buildDocumentUsers\": () => (/* binding */ buildDocumentUsers)\n/* harmony export */ });\n/* harmony import */ var _database__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../database */ \"(api)/./lib/server/database/index.ts\");\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n\n/**\n * Convert a Liveblocks room result into a list of DocumentUsers\n *\n * @param result - Liveblocks getRoomById() result\n * @param userId - The current user's id\n */ async function buildDocumentUsers(result, userId) {\n    const users = [];\n    for (const [id, accessValue] of Object.entries(result.usersAccesses)){\n        const user = await (0,_database__WEBPACK_IMPORTED_MODULE_0__.getUser)(id);\n        if (user) {\n            users.push({\n                ...user,\n                access: (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_1__.roomAccessesToDocumentAccess)(accessValue, true),\n                isCurrentUser: id === userId\n            });\n        }\n    }\n    return users;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRVc2Vycy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFDc0M7QUFDNkI7QUFFbkU7Ozs7O0NBS0MsR0FDTSxlQUFlRSxtQkFBbUJDLE1BQVksRUFBRUMsTUFBYyxFQUFFO0lBQ3JFLE1BQU1DLFFBQXdCLEVBQUU7SUFFaEMsS0FBSyxNQUFNLENBQUNDLElBQUlDLFlBQVksSUFBSUMsT0FBT0MsT0FBTyxDQUFDTixPQUFPTyxhQUFhLEVBQUc7UUFDcEUsTUFBTUMsT0FBTyxNQUFNWCxrREFBT0EsQ0FBQ007UUFFM0IsSUFBSUssTUFBTTtZQUNSTixNQUFNTyxJQUFJLENBQUM7Z0JBQ1QsR0FBR0QsSUFBSTtnQkFDUEUsUUFBUVosZ0ZBQTRCQSxDQUFDTSxhQUFhLElBQUk7Z0JBQ3RETyxlQUFlUixPQUFPRjtZQUN4QjtRQUNGLENBQUM7SUFDSDtJQUVBLE9BQU9DO0FBQ1QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvYnVpbGREb2N1bWVudFVzZXJzLnRzPzc0Y2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRG9jdW1lbnRVc2VyLCBSb29tIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRVc2VyIH0gZnJvbSBcIi4uL2RhdGFiYXNlXCI7XG5pbXBvcnQgeyByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzIH0gZnJvbSBcIi4vY29udmVydEFjY2Vzc1R5cGVcIjtcblxuLyoqXG4gKiBDb252ZXJ0IGEgTGl2ZWJsb2NrcyByb29tIHJlc3VsdCBpbnRvIGEgbGlzdCBvZiBEb2N1bWVudFVzZXJzXG4gKlxuICogQHBhcmFtIHJlc3VsdCAtIExpdmVibG9ja3MgZ2V0Um9vbUJ5SWQoKSByZXN1bHRcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgY3VycmVudCB1c2VyJ3MgaWRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkRG9jdW1lbnRVc2VycyhyZXN1bHQ6IFJvb20sIHVzZXJJZDogc3RyaW5nKSB7XG4gIGNvbnN0IHVzZXJzOiBEb2N1bWVudFVzZXJbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgW2lkLCBhY2Nlc3NWYWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmVzdWx0LnVzZXJzQWNjZXNzZXMpKSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGdldFVzZXIoaWQpO1xuXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIHVzZXJzLnB1c2goe1xuICAgICAgICAuLi51c2VyLFxuICAgICAgICBhY2Nlc3M6IHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MoYWNjZXNzVmFsdWUsIHRydWUpLFxuICAgICAgICBpc0N1cnJlbnRVc2VyOiBpZCA9PT0gdXNlcklkLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVzZXJzO1xufVxuIl0sIm5hbWVzIjpbImdldFVzZXIiLCJyb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzIiwiYnVpbGREb2N1bWVudFVzZXJzIiwicmVzdWx0IiwidXNlcklkIiwidXNlcnMiLCJpZCIsImFjY2Vzc1ZhbHVlIiwiT2JqZWN0IiwiZW50cmllcyIsInVzZXJzQWNjZXNzZXMiLCJ1c2VyIiwicHVzaCIsImFjY2VzcyIsImlzQ3VycmVudFVzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocumentUsers.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/buildDocuments.ts":
/*!********************************************!*\
  !*** ./lib/server/utils/buildDocuments.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"buildDocument\": () => (/* binding */ buildDocument),\n/* harmony export */   \"buildDocuments\": () => (/* binding */ buildDocuments)\n/* harmony export */ });\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n\n/**\n * Convert Liveblocks rooms into our custom document format\n *\n * @param rooms - Liveblocks rooms\n */ function buildDocuments(rooms) {\n    if (!rooms) return [];\n    const documents = rooms.map((x)=>{\n        return buildDocument(x);\n    });\n    return documents;\n}\nfunction buildDocument(room) {\n    let name = \"Untitled\";\n    let owner = \"\";\n    let draft = false;\n    // Get document info from metadata\n    const metadata = room.metadata;\n    if (metadata.name) {\n        name = metadata.name;\n    }\n    if (metadata.owner) {\n        owner = metadata.owner;\n    }\n    if (metadata.draft === \"yes\") {\n        draft = true;\n    }\n    // Get default, group, and user access from metadata\n    const defaultAccess = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(room.defaultAccesses);\n    const groups = {};\n    Object.entries(room.groupsAccesses).map(([id, accessValue])=>{\n        if (accessValue) {\n            groups[id] = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(accessValue);\n        }\n    });\n    const users = {};\n    Object.entries(room.usersAccesses).map(([id, accessValue])=>{\n        if (accessValue) {\n            users[id] = (0,_convertAccessType__WEBPACK_IMPORTED_MODULE_0__.roomAccessesToDocumentAccess)(accessValue);\n        }\n    });\n    // Return our custom Document format\n    const document = {\n        id: room.id,\n        created: (room.createdAt ? new Date(room.createdAt) : new Date()).toString(),\n        lastConnection: new Date(room.lastConnectionAt).toString(),\n        type: metadata.type,\n        name,\n        owner,\n        draft,\n        accesses: {\n            default: defaultAccess,\n            groups: groups,\n            users: users\n        }\n    };\n    return document;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUNtRTtBQUVuRTs7OztDQUlDLEdBQ00sU0FBU0MsZUFBZUMsS0FBYSxFQUFjO0lBQ3hELElBQUksQ0FBQ0EsT0FBTyxPQUFPLEVBQUU7SUFFckIsTUFBTUMsWUFBd0JELE1BQU1FLEdBQUcsQ0FBQyxDQUFDQyxJQUFNO1FBQzdDLE9BQU9DLGNBQWNEO0lBQ3ZCO0lBRUEsT0FBT0Y7QUFDVCxDQUFDO0FBRU0sU0FBU0csY0FBY0MsSUFBVSxFQUFZO0lBQ2xELElBQUlDLE9BQXlCO0lBQzdCLElBQUlDLFFBQTJCO0lBQy9CLElBQUlDLFFBQTJCLEtBQUs7SUFFcEMsa0NBQWtDO0lBQ2xDLE1BQU1DLFdBQWlDSixLQUFLSSxRQUFRO0lBRXBELElBQUlBLFNBQVNILElBQUksRUFBRTtRQUNqQkEsT0FBT0csU0FBU0gsSUFBSTtJQUN0QixDQUFDO0lBRUQsSUFBSUcsU0FBU0YsS0FBSyxFQUFFO1FBQ2xCQSxRQUFRRSxTQUFTRixLQUFLO0lBQ3hCLENBQUM7SUFFRCxJQUFJRSxTQUFTRCxLQUFLLEtBQUssT0FBTztRQUM1QkEsUUFBUSxJQUFJO0lBQ2QsQ0FBQztJQUVELG9EQUFvRDtJQUNwRCxNQUFNRSxnQkFDSlosZ0ZBQTRCQSxDQUFDTyxLQUFLTSxlQUFlO0lBRW5ELE1BQU1DLFNBQXlDLENBQUM7SUFDaERDLE9BQU9DLE9BQU8sQ0FBQ1QsS0FBS1UsY0FBYyxFQUFFYixHQUFHLENBQUMsQ0FBQyxDQUFDYyxJQUFJQyxZQUFZLEdBQUs7UUFDN0QsSUFBSUEsYUFBYTtZQUNmTCxNQUFNLENBQUNJLEdBQUcsR0FBR2xCLGdGQUE0QkEsQ0FBQ21CO1FBQzVDLENBQUM7SUFDSDtJQUVBLE1BQU1DLFFBQXVDLENBQUM7SUFDOUNMLE9BQU9DLE9BQU8sQ0FBQ1QsS0FBS2MsYUFBYSxFQUFFakIsR0FBRyxDQUFDLENBQUMsQ0FBQ2MsSUFBSUMsWUFBWSxHQUFLO1FBQzVELElBQUlBLGFBQWE7WUFDZkMsS0FBSyxDQUFDRixHQUFHLEdBQUdsQixnRkFBNEJBLENBQUNtQjtRQUMzQyxDQUFDO0lBQ0g7SUFFQSxvQ0FBb0M7SUFDcEMsTUFBTUcsV0FBcUI7UUFDekJKLElBQUlYLEtBQUtXLEVBQUU7UUFDWEssU0FBUyxDQUFDaEIsS0FBS2lCLFNBQVMsR0FDcEIsSUFBSUMsS0FBS2xCLEtBQUtpQixTQUFTLElBQ3ZCLElBQUlDLE1BQU0sRUFDWkMsUUFBUTtRQUNWQyxnQkFBZ0IsSUFBSUYsS0FBS2xCLEtBQUtxQixnQkFBZ0IsRUFBRUYsUUFBUTtRQUN4REcsTUFBTWxCLFNBQVNrQixJQUFJO1FBQ25CckI7UUFDQUM7UUFDQUM7UUFDQW9CLFVBQVU7WUFDUkMsU0FBU25CO1lBQ1RFLFFBQVFBO1lBQ1JNLE9BQU9BO1FBQ1Q7SUFDRjtJQUVBLE9BQU9FO0FBQ1QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvYnVpbGREb2N1bWVudHMudHM/Y2ZmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb2N1bWVudCwgRG9jdW1lbnRSb29tTWV0YWRhdGEsIFJvb20gfSBmcm9tIFwiLi4vLi4vLi4vdHlwZXNcIjtcbmltcG9ydCB7IHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MgfSBmcm9tIFwiLi9jb252ZXJ0QWNjZXNzVHlwZVwiO1xuXG4vKipcbiAqIENvbnZlcnQgTGl2ZWJsb2NrcyByb29tcyBpbnRvIG91ciBjdXN0b20gZG9jdW1lbnQgZm9ybWF0XG4gKlxuICogQHBhcmFtIHJvb21zIC0gTGl2ZWJsb2NrcyByb29tc1xuICovXG5leHBvcnQgZnVuY3Rpb24gYnVpbGREb2N1bWVudHMocm9vbXM6IFJvb21bXSk6IERvY3VtZW50W10ge1xuICBpZiAoIXJvb21zKSByZXR1cm4gW107XG5cbiAgY29uc3QgZG9jdW1lbnRzOiBEb2N1bWVudFtdID0gcm9vbXMubWFwKCh4KSA9PiB7XG4gICAgcmV0dXJuIGJ1aWxkRG9jdW1lbnQoeCk7XG4gIH0pO1xuXG4gIHJldHVybiBkb2N1bWVudHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZERvY3VtZW50KHJvb206IFJvb20pOiBEb2N1bWVudCB7XG4gIGxldCBuYW1lOiBEb2N1bWVudFtcIm5hbWVcIl0gPSBcIlVudGl0bGVkXCI7XG4gIGxldCBvd25lcjogRG9jdW1lbnRbXCJvd25lclwiXSA9IFwiXCI7XG4gIGxldCBkcmFmdDogRG9jdW1lbnRbXCJkcmFmdFwiXSA9IGZhbHNlO1xuXG4gIC8vIEdldCBkb2N1bWVudCBpbmZvIGZyb20gbWV0YWRhdGFcbiAgY29uc3QgbWV0YWRhdGE6IERvY3VtZW50Um9vbU1ldGFkYXRhID0gcm9vbS5tZXRhZGF0YTtcblxuICBpZiAobWV0YWRhdGEubmFtZSkge1xuICAgIG5hbWUgPSBtZXRhZGF0YS5uYW1lO1xuICB9XG5cbiAgaWYgKG1ldGFkYXRhLm93bmVyKSB7XG4gICAgb3duZXIgPSBtZXRhZGF0YS5vd25lcjtcbiAgfVxuXG4gIGlmIChtZXRhZGF0YS5kcmFmdCA9PT0gXCJ5ZXNcIikge1xuICAgIGRyYWZ0ID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIEdldCBkZWZhdWx0LCBncm91cCwgYW5kIHVzZXIgYWNjZXNzIGZyb20gbWV0YWRhdGFcbiAgY29uc3QgZGVmYXVsdEFjY2VzczogRG9jdW1lbnRbXCJhY2Nlc3Nlc1wiXVtcImRlZmF1bHRcIl0gPVxuICAgIHJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3Mocm9vbS5kZWZhdWx0QWNjZXNzZXMpO1xuXG4gIGNvbnN0IGdyb3VwczogRG9jdW1lbnRbXCJhY2Nlc3Nlc1wiXVtcImdyb3Vwc1wiXSA9IHt9O1xuICBPYmplY3QuZW50cmllcyhyb29tLmdyb3Vwc0FjY2Vzc2VzKS5tYXAoKFtpZCwgYWNjZXNzVmFsdWVdKSA9PiB7XG4gICAgaWYgKGFjY2Vzc1ZhbHVlKSB7XG4gICAgICBncm91cHNbaWRdID0gcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyhhY2Nlc3NWYWx1ZSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1c2VyczogRG9jdW1lbnRbXCJhY2Nlc3Nlc1wiXVtcInVzZXJzXCJdID0ge307XG4gIE9iamVjdC5lbnRyaWVzKHJvb20udXNlcnNBY2Nlc3NlcykubWFwKChbaWQsIGFjY2Vzc1ZhbHVlXSkgPT4ge1xuICAgIGlmIChhY2Nlc3NWYWx1ZSkge1xuICAgICAgdXNlcnNbaWRdID0gcm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyhhY2Nlc3NWYWx1ZSk7XG4gICAgfVxuICB9KTtcblxuICAvLyBSZXR1cm4gb3VyIGN1c3RvbSBEb2N1bWVudCBmb3JtYXRcbiAgY29uc3QgZG9jdW1lbnQ6IERvY3VtZW50ID0ge1xuICAgIGlkOiByb29tLmlkLFxuICAgIGNyZWF0ZWQ6IChyb29tLmNyZWF0ZWRBdFxuICAgICAgPyBuZXcgRGF0ZShyb29tLmNyZWF0ZWRBdClcbiAgICAgIDogbmV3IERhdGUoKVxuICAgICkudG9TdHJpbmcoKSxcbiAgICBsYXN0Q29ubmVjdGlvbjogbmV3IERhdGUocm9vbS5sYXN0Q29ubmVjdGlvbkF0KS50b1N0cmluZygpLFxuICAgIHR5cGU6IG1ldGFkYXRhLnR5cGUsXG4gICAgbmFtZSxcbiAgICBvd25lcixcbiAgICBkcmFmdCxcbiAgICBhY2Nlc3Nlczoge1xuICAgICAgZGVmYXVsdDogZGVmYXVsdEFjY2VzcyxcbiAgICAgIGdyb3VwczogZ3JvdXBzLFxuICAgICAgdXNlcnM6IHVzZXJzLFxuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIGRvY3VtZW50O1xufVxuIl0sIm5hbWVzIjpbInJvb21BY2Nlc3Nlc1RvRG9jdW1lbnRBY2Nlc3MiLCJidWlsZERvY3VtZW50cyIsInJvb21zIiwiZG9jdW1lbnRzIiwibWFwIiwieCIsImJ1aWxkRG9jdW1lbnQiLCJyb29tIiwibmFtZSIsIm93bmVyIiwiZHJhZnQiLCJtZXRhZGF0YSIsImRlZmF1bHRBY2Nlc3MiLCJkZWZhdWx0QWNjZXNzZXMiLCJncm91cHMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZ3JvdXBzQWNjZXNzZXMiLCJpZCIsImFjY2Vzc1ZhbHVlIiwidXNlcnMiLCJ1c2Vyc0FjY2Vzc2VzIiwiZG9jdW1lbnQiLCJjcmVhdGVkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvU3RyaW5nIiwibGFzdENvbm5lY3Rpb24iLCJsYXN0Q29ubmVjdGlvbkF0IiwidHlwZSIsImFjY2Vzc2VzIiwiZGVmYXVsdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/buildDocuments.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/convertAccessType.ts":
/*!***********************************************!*\
  !*** ./lib/server/utils/convertAccessType.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"documentAccessToRoomAccesses\": () => (/* binding */ documentAccessToRoomAccesses),\n/* harmony export */   \"roomAccessesToDocumentAccess\": () => (/* binding */ roomAccessesToDocumentAccess)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n\n/**\n * Convert from Liveblocks room accesses to a custom document access format\n * If the user was set on userAccesses, give FULL permissions to edit invited users\n * @param roomAccesses - The room access(es) to check\n * @param setOnUserAccesses - If the user was set with userAccesses or not\n */ function roomAccessesToDocumentAccess(roomAccesses, setOnUserAccesses = false) {\n    if (!roomAccesses) {\n        return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.NONE;\n    }\n    if (!Array.isArray(roomAccesses)) {\n        roomAccesses = [\n            roomAccesses\n        ];\n    }\n    if (roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite)) {\n        return setOnUserAccesses ? _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.FULL : _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.EDIT;\n    }\n    if (roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead) && roomAccesses.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomPresenceWrite)) {\n        return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.READONLY;\n    }\n    return _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.NONE;\n}\n/**\n * Convert from a custom document access format to native Liveblocks room accesses\n * @param documentAccess\n */ function documentAccessToRoomAccesses(documentAccess) {\n    if (documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.FULL || documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.EDIT) {\n        return [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomWrite\n        ];\n    }\n    if (documentAccess === _types__WEBPACK_IMPORTED_MODULE_0__.DocumentAccess.READONLY) {\n        return [\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomRead,\n            _types__WEBPACK_IMPORTED_MODULE_0__.RoomAccess.RoomPresenceWrite\n        ];\n    }\n    return [];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2NvbnZlcnRBY2Nlc3NUeXBlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE0RDtBQUU1RDs7Ozs7Q0FLQyxHQUNNLFNBQVNFLDZCQUNkQyxZQUE4QyxFQUM5Q0Msb0JBQW9CLEtBQUssRUFDVDtJQUNoQixJQUFJLENBQUNELGNBQWM7UUFDakIsT0FBT0gsdURBQW1CO0lBQzVCLENBQUM7SUFFRCxJQUFJLENBQUNNLE1BQU1DLE9BQU8sQ0FBQ0osZUFBZTtRQUNoQ0EsZUFBZTtZQUFDQTtTQUFhO0lBQy9CLENBQUM7SUFFRCxJQUFJQSxhQUFhSyxRQUFRLENBQUNQLHdEQUFvQixHQUFHO1FBQy9DLE9BQU9HLG9CQUFvQkosdURBQW1CLEdBQUdBLHVEQUFtQjtJQUN0RSxDQUFDO0lBRUQsSUFDRUcsYUFBYUssUUFBUSxDQUFDUCx1REFBbUIsS0FDekNFLGFBQWFLLFFBQVEsQ0FBQ1AsZ0VBQTRCLEdBQ2xEO1FBQ0EsT0FBT0QsMkRBQXVCO0lBQ2hDLENBQUM7SUFFRCxPQUFPQSx1REFBbUI7QUFDNUIsQ0FBQztBQUVEOzs7Q0FHQyxHQUNNLFNBQVNlLDZCQUNkQyxjQUE4QixFQUNoQjtJQUNkLElBQ0VBLG1CQUFtQmhCLHVEQUFtQixJQUN0Q2dCLG1CQUFtQmhCLHVEQUFtQixFQUN0QztRQUNBLE9BQU87WUFBQ0Msd0RBQW9CO1NBQUM7SUFDL0IsQ0FBQztJQUVELElBQUllLG1CQUFtQmhCLDJEQUF1QixFQUFFO1FBQzlDLE9BQU87WUFBQ0MsdURBQW1CO1lBQUVBLGdFQUE0QjtTQUFDO0lBQzVELENBQUM7SUFFRCxPQUFPLEVBQUU7QUFDWCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9jb252ZXJ0QWNjZXNzVHlwZS50cz9lYWI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50QWNjZXNzLCBSb29tQWNjZXNzIH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbi8qKlxuICogQ29udmVydCBmcm9tIExpdmVibG9ja3Mgcm9vbSBhY2Nlc3NlcyB0byBhIGN1c3RvbSBkb2N1bWVudCBhY2Nlc3MgZm9ybWF0XG4gKiBJZiB0aGUgdXNlciB3YXMgc2V0IG9uIHVzZXJBY2Nlc3NlcywgZ2l2ZSBGVUxMIHBlcm1pc3Npb25zIHRvIGVkaXQgaW52aXRlZCB1c2Vyc1xuICogQHBhcmFtIHJvb21BY2Nlc3NlcyAtIFRoZSByb29tIGFjY2VzcyhlcykgdG8gY2hlY2tcbiAqIEBwYXJhbSBzZXRPblVzZXJBY2Nlc3NlcyAtIElmIHRoZSB1c2VyIHdhcyBzZXQgd2l0aCB1c2VyQWNjZXNzZXMgb3Igbm90XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb29tQWNjZXNzZXNUb0RvY3VtZW50QWNjZXNzKFxuICByb29tQWNjZXNzZXM6IFJvb21BY2Nlc3MgfCBSb29tQWNjZXNzW10gfCBudWxsLFxuICBzZXRPblVzZXJBY2Nlc3NlcyA9IGZhbHNlXG4pOiBEb2N1bWVudEFjY2VzcyB7XG4gIGlmICghcm9vbUFjY2Vzc2VzKSB7XG4gICAgcmV0dXJuIERvY3VtZW50QWNjZXNzLk5PTkU7XG4gIH1cblxuICBpZiAoIUFycmF5LmlzQXJyYXkocm9vbUFjY2Vzc2VzKSkge1xuICAgIHJvb21BY2Nlc3NlcyA9IFtyb29tQWNjZXNzZXNdO1xuICB9XG5cbiAgaWYgKHJvb21BY2Nlc3Nlcy5pbmNsdWRlcyhSb29tQWNjZXNzLlJvb21Xcml0ZSkpIHtcbiAgICByZXR1cm4gc2V0T25Vc2VyQWNjZXNzZXMgPyBEb2N1bWVudEFjY2Vzcy5GVUxMIDogRG9jdW1lbnRBY2Nlc3MuRURJVDtcbiAgfVxuXG4gIGlmIChcbiAgICByb29tQWNjZXNzZXMuaW5jbHVkZXMoUm9vbUFjY2Vzcy5Sb29tUmVhZCkgJiZcbiAgICByb29tQWNjZXNzZXMuaW5jbHVkZXMoUm9vbUFjY2Vzcy5Sb29tUHJlc2VuY2VXcml0ZSlcbiAgKSB7XG4gICAgcmV0dXJuIERvY3VtZW50QWNjZXNzLlJFQURPTkxZO1xuICB9XG5cbiAgcmV0dXJuIERvY3VtZW50QWNjZXNzLk5PTkU7XG59XG5cbi8qKlxuICogQ29udmVydCBmcm9tIGEgY3VzdG9tIGRvY3VtZW50IGFjY2VzcyBmb3JtYXQgdG8gbmF0aXZlIExpdmVibG9ja3Mgcm9vbSBhY2Nlc3Nlc1xuICogQHBhcmFtIGRvY3VtZW50QWNjZXNzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzKFxuICBkb2N1bWVudEFjY2VzczogRG9jdW1lbnRBY2Nlc3Ncbik6IFJvb21BY2Nlc3NbXSB7XG4gIGlmIChcbiAgICBkb2N1bWVudEFjY2VzcyA9PT0gRG9jdW1lbnRBY2Nlc3MuRlVMTCB8fFxuICAgIGRvY3VtZW50QWNjZXNzID09PSBEb2N1bWVudEFjY2Vzcy5FRElUXG4gICkge1xuICAgIHJldHVybiBbUm9vbUFjY2Vzcy5Sb29tV3JpdGVdO1xuICB9XG5cbiAgaWYgKGRvY3VtZW50QWNjZXNzID09PSBEb2N1bWVudEFjY2Vzcy5SRUFET05MWSkge1xuICAgIHJldHVybiBbUm9vbUFjY2Vzcy5Sb29tUmVhZCwgUm9vbUFjY2Vzcy5Sb29tUHJlc2VuY2VXcml0ZV07XG4gIH1cblxuICByZXR1cm4gW107XG59XG4iXSwibmFtZXMiOlsiRG9jdW1lbnRBY2Nlc3MiLCJSb29tQWNjZXNzIiwicm9vbUFjY2Vzc2VzVG9Eb2N1bWVudEFjY2VzcyIsInJvb21BY2Nlc3NlcyIsInNldE9uVXNlckFjY2Vzc2VzIiwiTk9ORSIsIkFycmF5IiwiaXNBcnJheSIsImluY2x1ZGVzIiwiUm9vbVdyaXRlIiwiRlVMTCIsIkVESVQiLCJSb29tUmVhZCIsIlJvb21QcmVzZW5jZVdyaXRlIiwiUkVBRE9OTFkiLCJkb2N1bWVudEFjY2Vzc1RvUm9vbUFjY2Vzc2VzIiwiZG9jdW1lbnRBY2Nlc3MiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/convertAccessType.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/fetchLiveblocksApi.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/fetchLiveblocksApi.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"fetchLiveblocksApi\": () => (/* binding */ fetchLiveblocksApi)\n/* harmony export */ });\n/* harmony import */ var _liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../liveblocks.server.config */ \"(api)/./liveblocks.server.config.ts\");\n\n/**\n * Fetch Liveblocks API\n *\n * Similar to using normal fetch with the Liveblocks API, with more error checking\n * Add `API_BASE_URL` to `urlEnd`, and `Authorization` header with `SECRET_API_KEY`\n * Uses Liveblocks API\n *\n * @param urlEnd - The part of the URL to attach to the host\n * @param fetchOptions - Fetch options to be used\n */ async function fetchLiveblocksApi(urlEnd, fetchOptions) {\n    if (!_liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.SECRET_API_KEY) {\n        return {\n            error: {\n                code: 403,\n                message: \"No API key supplied\",\n                suggestion: \"Try adding your LIVEBLOCKS_SECRET_KEY to your .env.local file\"\n            }\n        };\n    }\n    const url = `${_liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${urlEnd}`;\n    try {\n        const response = await fetch(url, {\n            headers: new Headers({\n                Authorization: `Bearer ${_liveblocks_server_config__WEBPACK_IMPORTED_MODULE_0__.SECRET_API_KEY}`\n            }),\n            ...fetchOptions\n        });\n        let body;\n        try {\n            body = await response.json();\n        } catch  {\n            body = {};\n        }\n        if (!response.ok) {\n            if (body.error?.code && body.error?.message && body.error?.suggestion) {\n                console.error(body.error);\n                return {\n                    error: body.error\n                };\n            }\n            const customError = customLiveblocksErrors[body.error];\n            if (customError) {\n                console.error(customError);\n                return {\n                    error: customError\n                };\n            }\n            const error = {\n                code: 500,\n                message: `Error when calling ${url}: ${body?.error ?? response.statusText}`,\n                suggestion: \"Please try again\"\n            };\n            console.log(error);\n            return {\n                error\n            };\n        }\n        return {\n            data: body\n        };\n    } catch (err) {\n        if (err?.code && err?.message && err?.suggestion) {\n            console.error(err);\n            return {\n                error: err\n            };\n        }\n        const customError1 = customLiveblocksErrors[err];\n        if (customError1) {\n            console.error(customError1);\n            return {\n                error: customError1\n            };\n        }\n        const error1 = {\n            code: 500,\n            message: `Error when calling ${url}`,\n            suggestion: \"Please try again\"\n        };\n        console.error(error1);\n        console.error(err);\n        return {\n            error: error1\n        };\n    }\n}\nconst customLiveblocksErrors = {\n    ROOM_NOT_FOUND: {\n        code: 404,\n        message: \"Document not found\",\n        suggestion: \"Please check the URL is correct or the document exists\"\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2ZldGNoTGl2ZWJsb2Nrc0FwaS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUcyQztBQUczQzs7Ozs7Ozs7O0NBU0MsR0FDTSxlQUFlRSxtQkFDcEJDLE1BQWMsRUFDZEMsWUFBMEIsRUFDRTtJQUM1QixJQUFJLENBQUNILHFFQUFjQSxFQUFFO1FBQ25CLE9BQU87WUFDTEksT0FBTztnQkFDTEMsTUFBTTtnQkFDTkMsU0FBUztnQkFDVEMsWUFDRTtZQUNKO1FBQ0Y7SUFDRixDQUFDO0lBRUQsTUFBTUMsTUFBTSxDQUFDLEVBQUVULG1FQUFZQSxDQUFDLEVBQUVHLE9BQU8sQ0FBQztJQUV0QyxJQUFJO1FBQ0YsTUFBTU8sV0FBVyxNQUFNQyxNQUFNRixLQUFLO1lBQ2hDRyxTQUFTLElBQUlDLFFBQVE7Z0JBQ25CQyxlQUFlLENBQUMsT0FBTyxFQUFFYixxRUFBY0EsQ0FBQyxDQUFDO1lBQzNDO1lBQ0EsR0FBR0csWUFBWTtRQUNqQjtRQUVBLElBQUlXO1FBQ0osSUFBSTtZQUNGQSxPQUFPLE1BQU1MLFNBQVNNLElBQUk7UUFDNUIsRUFBRSxPQUFNO1lBQ05ELE9BQU8sQ0FBQztRQUNWO1FBRUEsSUFBSSxDQUFDTCxTQUFTTyxFQUFFLEVBQUU7WUFDaEIsSUFBSUYsS0FBS1YsS0FBSyxFQUFFQyxRQUFRUyxLQUFLVixLQUFLLEVBQUVFLFdBQVdRLEtBQUtWLEtBQUssRUFBRUcsWUFBWTtnQkFDckVVLFFBQVFiLEtBQUssQ0FBQ1UsS0FBS1YsS0FBSztnQkFDeEIsT0FBTztvQkFBRUEsT0FBT1UsS0FBS1YsS0FBSztnQkFBQztZQUM3QixDQUFDO1lBRUQsTUFBTWMsY0FBY0Msc0JBQXNCLENBQUNMLEtBQUtWLEtBQUssQ0FBQztZQUN0RCxJQUFJYyxhQUFhO2dCQUNmRCxRQUFRYixLQUFLLENBQUNjO2dCQUNkLE9BQU87b0JBQUVkLE9BQU9jO2dCQUFZO1lBQzlCLENBQUM7WUFFRCxNQUFNZCxRQUFRO2dCQUNaQyxNQUFNO2dCQUNOQyxTQUFTLENBQUMsbUJBQW1CLEVBQUVFLElBQUksRUFBRSxFQUNuQ00sTUFBTVYsU0FBU0ssU0FBU1csVUFBVSxDQUNuQyxDQUFDO2dCQUNGYixZQUFZO1lBQ2Q7WUFDQVUsUUFBUUksR0FBRyxDQUFDakI7WUFDWixPQUFPO2dCQUFFQTtZQUFNO1FBQ2pCLENBQUM7UUFFRCxPQUFPO1lBQUVrQixNQUFNUjtRQUFLO0lBQ3RCLEVBQUUsT0FBT1MsS0FBVTtRQUNqQixJQUFJQSxLQUFLbEIsUUFBUWtCLEtBQUtqQixXQUFXaUIsS0FBS2hCLFlBQVk7WUFDaERVLFFBQVFiLEtBQUssQ0FBQ21CO1lBQ2QsT0FBTztnQkFBRW5CLE9BQU9tQjtZQUFpQjtRQUNuQyxDQUFDO1FBRUQsTUFBTUwsZUFBY0Msc0JBQXNCLENBQUNJLElBQUk7UUFDL0MsSUFBSUwsY0FBYTtZQUNmRCxRQUFRYixLQUFLLENBQUNjO1lBQ2QsT0FBTztnQkFBRWQsT0FBT2M7WUFBWTtRQUM5QixDQUFDO1FBRUQsTUFBTWQsU0FBbUI7WUFDdkJDLE1BQU07WUFDTkMsU0FBUyxDQUFDLG1CQUFtQixFQUFFRSxJQUFJLENBQUM7WUFDcENELFlBQVk7UUFDZDtRQUNBVSxRQUFRYixLQUFLLENBQUNBO1FBQ2RhLFFBQVFiLEtBQUssQ0FBQ21CO1FBQ2QsT0FBTztZQUFFbkIsT0FBQUE7UUFBTTtJQUNqQjtBQUNGLENBQUM7QUFFRCxNQUFNZSx5QkFBb0Q7SUFDeERLLGdCQUFnQjtRQUNkbkIsTUFBTTtRQUNOQyxTQUFTO1FBQ1RDLFlBQVk7SUFDZDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9mZXRjaExpdmVibG9ja3NBcGkudHM/M2UyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBUElfQkFTRV9VUkwsXG4gIFNFQ1JFVF9BUElfS0VZLFxufSBmcm9tIFwiLi4vLi4vLi4vbGl2ZWJsb2Nrcy5zZXJ2ZXIuY29uZmlnXCI7XG5pbXBvcnQgeyBFcnJvckRhdGEsIEZldGNoQXBpUmVzdWx0IH0gZnJvbSBcIi4uLy4uLy4uL3R5cGVzXCI7XG5cbi8qKlxuICogRmV0Y2ggTGl2ZWJsb2NrcyBBUElcbiAqXG4gKiBTaW1pbGFyIHRvIHVzaW5nIG5vcm1hbCBmZXRjaCB3aXRoIHRoZSBMaXZlYmxvY2tzIEFQSSwgd2l0aCBtb3JlIGVycm9yIGNoZWNraW5nXG4gKiBBZGQgYEFQSV9CQVNFX1VSTGAgdG8gYHVybEVuZGAsIGFuZCBgQXV0aG9yaXphdGlvbmAgaGVhZGVyIHdpdGggYFNFQ1JFVF9BUElfS0VZYFxuICogVXNlcyBMaXZlYmxvY2tzIEFQSVxuICpcbiAqIEBwYXJhbSB1cmxFbmQgLSBUaGUgcGFydCBvZiB0aGUgVVJMIHRvIGF0dGFjaCB0byB0aGUgaG9zdFxuICogQHBhcmFtIGZldGNoT3B0aW9ucyAtIEZldGNoIG9wdGlvbnMgdG8gYmUgdXNlZFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hMaXZlYmxvY2tzQXBpPFQgPSB1bmtub3duPihcbiAgdXJsRW5kOiBzdHJpbmcsXG4gIGZldGNoT3B0aW9ucz86IFJlcXVlc3RJbml0XG4pOiBQcm9taXNlPEZldGNoQXBpUmVzdWx0PFQ+PiB7XG4gIGlmICghU0VDUkVUX0FQSV9LRVkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZXJyb3I6IHtcbiAgICAgICAgY29kZTogNDAzLFxuICAgICAgICBtZXNzYWdlOiBcIk5vIEFQSSBrZXkgc3VwcGxpZWRcIixcbiAgICAgICAgc3VnZ2VzdGlvbjpcbiAgICAgICAgICBcIlRyeSBhZGRpbmcgeW91ciBMSVZFQkxPQ0tTX1NFQ1JFVF9LRVkgdG8geW91ciAuZW52LmxvY2FsIGZpbGVcIixcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHVybCA9IGAke0FQSV9CQVNFX1VSTH0ke3VybEVuZH1gO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke1NFQ1JFVF9BUElfS0VZfWAsXG4gICAgICB9KSxcbiAgICAgIC4uLmZldGNoT3B0aW9ucyxcbiAgICB9KTtcblxuICAgIGxldCBib2R5O1xuICAgIHRyeSB7XG4gICAgICBib2R5ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgYm9keSA9IHt9O1xuICAgIH1cblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGlmIChib2R5LmVycm9yPy5jb2RlICYmIGJvZHkuZXJyb3I/Lm1lc3NhZ2UgJiYgYm9keS5lcnJvcj8uc3VnZ2VzdGlvbikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGJvZHkuZXJyb3IpO1xuICAgICAgICByZXR1cm4geyBlcnJvcjogYm9keS5lcnJvciB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdXN0b21FcnJvciA9IGN1c3RvbUxpdmVibG9ja3NFcnJvcnNbYm9keS5lcnJvcl07XG4gICAgICBpZiAoY3VzdG9tRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihjdXN0b21FcnJvcik7XG4gICAgICAgIHJldHVybiB7IGVycm9yOiBjdXN0b21FcnJvciB9O1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJvciA9IHtcbiAgICAgICAgY29kZTogNTAwLFxuICAgICAgICBtZXNzYWdlOiBgRXJyb3Igd2hlbiBjYWxsaW5nICR7dXJsfTogJHtcbiAgICAgICAgICBib2R5Py5lcnJvciA/PyByZXNwb25zZS5zdGF0dXNUZXh0XG4gICAgICAgIH1gLFxuICAgICAgICBzdWdnZXN0aW9uOiBcIlBsZWFzZSB0cnkgYWdhaW5cIixcbiAgICAgIH07XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgIH1cblxuICAgIHJldHVybiB7IGRhdGE6IGJvZHkgfTtcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICBpZiAoZXJyPy5jb2RlICYmIGVycj8ubWVzc2FnZSAmJiBlcnI/LnN1Z2dlc3Rpb24pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIHJldHVybiB7IGVycm9yOiBlcnIgYXMgRXJyb3JEYXRhIH07XG4gICAgfVxuXG4gICAgY29uc3QgY3VzdG9tRXJyb3IgPSBjdXN0b21MaXZlYmxvY2tzRXJyb3JzW2Vycl07XG4gICAgaWYgKGN1c3RvbUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGN1c3RvbUVycm9yKTtcbiAgICAgIHJldHVybiB7IGVycm9yOiBjdXN0b21FcnJvciB9O1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yOiBFcnJvckRhdGEgPSB7XG4gICAgICBjb2RlOiA1MDAsXG4gICAgICBtZXNzYWdlOiBgRXJyb3Igd2hlbiBjYWxsaW5nICR7dXJsfWAsXG4gICAgICBzdWdnZXN0aW9uOiBcIlBsZWFzZSB0cnkgYWdhaW5cIixcbiAgICB9O1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9XG59XG5cbmNvbnN0IGN1c3RvbUxpdmVibG9ja3NFcnJvcnM6IFJlY29yZDxzdHJpbmcsIEVycm9yRGF0YT4gPSB7XG4gIFJPT01fTk9UX0ZPVU5EOiB7XG4gICAgY29kZTogNDA0LFxuICAgIG1lc3NhZ2U6IFwiRG9jdW1lbnQgbm90IGZvdW5kXCIsXG4gICAgc3VnZ2VzdGlvbjogXCJQbGVhc2UgY2hlY2sgdGhlIFVSTCBpcyBjb3JyZWN0IG9yIHRoZSBkb2N1bWVudCBleGlzdHNcIixcbiAgfSxcbn07XG4iXSwibmFtZXMiOlsiQVBJX0JBU0VfVVJMIiwiU0VDUkVUX0FQSV9LRVkiLCJmZXRjaExpdmVibG9ja3NBcGkiLCJ1cmxFbmQiLCJmZXRjaE9wdGlvbnMiLCJlcnJvciIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsInVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwiSGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJib2R5IiwianNvbiIsIm9rIiwiY29uc29sZSIsImN1c3RvbUVycm9yIiwiY3VzdG9tTGl2ZWJsb2Nrc0Vycm9ycyIsInN0YXR1c1RleHQiLCJsb2ciLCJkYXRhIiwiZXJyIiwiUk9PTV9OT1RfRk9VTkQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/fetchLiveblocksApi.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/getDraftsGroupName.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/getDraftsGroupName.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DRAFTS_PREFIX\": () => (/* binding */ DRAFTS_PREFIX),\n/* harmony export */   \"getDraftsGroupName\": () => (/* binding */ getDraftsGroupName)\n/* harmony export */ });\nconst DRAFTS_PREFIX = \"__drafts-group__\";\n/**\n * Drafts are stored as a group that uses the user's id\n * @param userId\n */ function getDraftsGroupName(userId) {\n    return `${DRAFTS_PREFIX}${userId}`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2dldERyYWZ0c0dyb3VwTmFtZS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLGdCQUFnQixtQkFBbUI7QUFFaEQ7OztDQUdDLEdBQ00sU0FBU0MsbUJBQW1CQyxNQUFjLEVBQUU7SUFDakQsT0FBTyxDQUFDLEVBQUVGLGNBQWMsRUFBRUUsT0FBTyxDQUFDO0FBQ3BDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2dldERyYWZ0c0dyb3VwTmFtZS50cz85MzNjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBEUkFGVFNfUFJFRklYID0gXCJfX2RyYWZ0cy1ncm91cF9fXCI7XG5cbi8qKlxuICogRHJhZnRzIGFyZSBzdG9yZWQgYXMgYSBncm91cCB0aGF0IHVzZXMgdGhlIHVzZXIncyBpZFxuICogQHBhcmFtIHVzZXJJZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RHJhZnRzR3JvdXBOYW1lKHVzZXJJZDogc3RyaW5nKSB7XG4gIHJldHVybiBgJHtEUkFGVFNfUFJFRklYfSR7dXNlcklkfWA7XG59XG4iXSwibmFtZXMiOlsiRFJBRlRTX1BSRUZJWCIsImdldERyYWZ0c0dyb3VwTmFtZSIsInVzZXJJZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/getDraftsGroupName.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/getRandom.ts":
/*!***************************************!*\
  !*** ./lib/server/utils/getRandom.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getRandom\": () => (/* binding */ getRandom)\n/* harmony export */ });\nfunction hashCode(string) {\n    let hash = 0;\n    if (string.length > 0) {\n        let index = 0;\n        while(index < string.length){\n            hash = (hash << 5) - hash + string.charCodeAt(index++) | 0;\n        }\n    }\n    return hash;\n}\nfunction getRandom(array, seed) {\n    const index = seed ? Math.abs(hashCode(seed)) % array.length : Math.floor(Math.random() * array.length);\n    return array[index];\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2dldFJhbmRvbS50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsU0FBU0EsU0FBU0MsTUFBYyxFQUFFO0lBQ2hDLElBQUlDLE9BQU87SUFFWCxJQUFJRCxPQUFPRSxNQUFNLEdBQUcsR0FBRztRQUNyQixJQUFJQyxRQUFRO1FBRVosTUFBT0EsUUFBUUgsT0FBT0UsTUFBTSxDQUFFO1lBQzVCRCxPQUFPLENBQUVBLFFBQVEsS0FBS0EsT0FBT0QsT0FBT0ksVUFBVSxDQUFDRCxXQUFZO1FBQzdEO0lBQ0YsQ0FBQztJQUVELE9BQU9GO0FBQ1Q7QUFFTyxTQUFTSSxVQUFhQyxLQUFVLEVBQUVDLElBQWEsRUFBSztJQUN6RCxNQUFNSixRQUFRSSxPQUNWQyxLQUFLQyxHQUFHLENBQUNWLFNBQVNRLFNBQVNELE1BQU1KLE1BQU0sR0FDdkNNLEtBQUtFLEtBQUssQ0FBQ0YsS0FBS0csTUFBTSxLQUFLTCxNQUFNSixNQUFNLENBQUM7SUFFNUMsT0FBT0ksS0FBSyxDQUFDSCxNQUFNO0FBQ3JCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9saWIvc2VydmVyL3V0aWxzL2dldFJhbmRvbS50cz9kM2E3Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGhhc2hDb2RlKHN0cmluZzogc3RyaW5nKSB7XG4gIGxldCBoYXNoID0gMDtcblxuICBpZiAoc3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICBsZXQgaW5kZXggPSAwO1xuXG4gICAgd2hpbGUgKGluZGV4IDwgc3RyaW5nLmxlbmd0aCkge1xuICAgICAgaGFzaCA9ICgoaGFzaCA8PCA1KSAtIGhhc2ggKyBzdHJpbmcuY2hhckNvZGVBdChpbmRleCsrKSkgfCAwO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBoYXNoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UmFuZG9tPFQ+KGFycmF5OiBUW10sIHNlZWQ/OiBzdHJpbmcpOiBUIHtcbiAgY29uc3QgaW5kZXggPSBzZWVkXG4gICAgPyBNYXRoLmFicyhoYXNoQ29kZShzZWVkKSkgJSBhcnJheS5sZW5ndGhcbiAgICA6IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFycmF5Lmxlbmd0aCk7XG5cbiAgcmV0dXJuIGFycmF5W2luZGV4XTtcbn1cbiJdLCJuYW1lcyI6WyJoYXNoQ29kZSIsInN0cmluZyIsImhhc2giLCJsZW5ndGgiLCJpbmRleCIsImNoYXJDb2RlQXQiLCJnZXRSYW5kb20iLCJhcnJheSIsInNlZWQiLCJNYXRoIiwiYWJzIiwiZmxvb3IiLCJyYW5kb20iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/getRandom.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/index.ts":
/*!***********************************!*\
  !*** ./lib/server/utils/index.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _buildDocuments__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./buildDocuments */ \"(api)/./lib/server/utils/buildDocuments.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocuments__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocuments__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./buildDocumentGroups */ \"(api)/./lib/server/utils/buildDocumentGroups.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocumentGroups__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./buildDocumentUsers */ \"(api)/./lib/server/utils/buildDocumentUsers.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _buildDocumentUsers__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _convertAccessType__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./convertAccessType */ \"(api)/./lib/server/utils/convertAccessType.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _convertAccessType__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _convertAccessType__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./getDraftsGroupName */ \"(api)/./lib/server/utils/getDraftsGroupName.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getDraftsGroupName__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _getRandom__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./getRandom */ \"(api)/./lib/server/utils/getRandom.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _getRandom__WEBPACK_IMPORTED_MODULE_5__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _getRandom__WEBPACK_IMPORTED_MODULE_5__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./fetchLiveblocksApi */ \"(api)/./lib/server/utils/fetchLiveblocksApi.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _fetchLiveblocksApi__WEBPACK_IMPORTED_MODULE_6__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./isUserDocumentOwner */ \"(api)/./lib/server/utils/isUserDocumentOwner.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _isUserDocumentOwner__WEBPACK_IMPORTED_MODULE_7__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./userAllowedInRooms */ \"(api)/./lib/server/utils/userAllowedInRooms.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _userAllowedInRooms__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBaUM7QUFDSztBQUNEO0FBQ0Q7QUFDQztBQUNUO0FBQ1M7QUFDQztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGliL3NlcnZlci91dGlscy9pbmRleC50cz8zZWVhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2J1aWxkRG9jdW1lbnRzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idWlsZERvY3VtZW50R3JvdXBzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9idWlsZERvY3VtZW50VXNlcnNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NvbnZlcnRBY2Nlc3NUeXBlXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9nZXREcmFmdHNHcm91cE5hbWVcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2dldFJhbmRvbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZmV0Y2hMaXZlYmxvY2tzQXBpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9pc1VzZXJEb2N1bWVudE93bmVyXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91c2VyQWxsb3dlZEluUm9vbXNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/index.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/isUserDocumentOwner.ts":
/*!*************************************************!*\
  !*** ./lib/server/utils/isUserDocumentOwner.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"isUserDocumentOwner\": () => (/* binding */ isUserDocumentOwner)\n/* harmony export */ });\n/**\n * Returns true if owner is set on room, and owner is equal to userId\n *\n * @param room - The room to test\n * @param userId - The user's id to check\n */ function isUserDocumentOwner({ room , userId  }) {\n    if (!room?.metadata?.owner) {\n        return false;\n    }\n    const owner = Array.isArray(room.metadata.owner) ? room.metadata.owner[0] : room.metadata.owner;\n    return owner === userId;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL2lzVXNlckRvY3VtZW50T3duZXIudHMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQU9BOzs7OztDQUtDLEdBQ00sU0FBU0Esb0JBQW9CLEVBQ2xDQyxLQUFJLEVBQ0pDLE9BQU0sRUFDbUIsRUFBVztJQUNwQyxJQUFJLENBQUNELE1BQU1FLFVBQVVDLE9BQU87UUFDMUIsT0FBTyxLQUFLO0lBQ2QsQ0FBQztJQUVELE1BQU1BLFFBQVFDLE1BQU1DLE9BQU8sQ0FBQ0wsS0FBS0UsUUFBUSxDQUFDQyxLQUFLLElBQzNDSCxLQUFLRSxRQUFRLENBQUNDLEtBQUssQ0FBQyxFQUFFLEdBQ3RCSCxLQUFLRSxRQUFRLENBQUNDLEtBQUs7SUFFdkIsT0FBT0EsVUFBVUY7QUFDbkIsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvaXNVc2VyRG9jdW1lbnRPd25lci50cz9hZGNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERvY3VtZW50VXNlciwgUm9vbSB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5pbnRlcmZhY2UgSXNVc2VyRG9jdW1lbnRPd25lclByb3BzIHtcbiAgcm9vbTogUm9vbTtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb3duZXIgaXMgc2V0IG9uIHJvb20sIGFuZCBvd25lciBpcyBlcXVhbCB0byB1c2VySWRcbiAqXG4gKiBAcGFyYW0gcm9vbSAtIFRoZSByb29tIHRvIHRlc3RcbiAqIEBwYXJhbSB1c2VySWQgLSBUaGUgdXNlcidzIGlkIHRvIGNoZWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1VzZXJEb2N1bWVudE93bmVyKHtcbiAgcm9vbSxcbiAgdXNlcklkLFxufTogSXNVc2VyRG9jdW1lbnRPd25lclByb3BzKTogYm9vbGVhbiB7XG4gIGlmICghcm9vbT8ubWV0YWRhdGE/Lm93bmVyKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qgb3duZXIgPSBBcnJheS5pc0FycmF5KHJvb20ubWV0YWRhdGEub3duZXIpXG4gICAgPyByb29tLm1ldGFkYXRhLm93bmVyWzBdXG4gICAgOiByb29tLm1ldGFkYXRhLm93bmVyO1xuXG4gIHJldHVybiBvd25lciA9PT0gdXNlcklkO1xufVxuIl0sIm5hbWVzIjpbImlzVXNlckRvY3VtZW50T3duZXIiLCJyb29tIiwidXNlcklkIiwibWV0YWRhdGEiLCJvd25lciIsIkFycmF5IiwiaXNBcnJheSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/isUserDocumentOwner.ts\n");

/***/ }),

/***/ "(api)/./lib/server/utils/userAllowedInRooms.ts":
/*!************************************************!*\
  !*** ./lib/server/utils/userAllowedInRooms.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"userAllowedInRoom\": () => (/* binding */ userAllowedInRoom),\n/* harmony export */   \"userAllowedInRooms\": () => (/* binding */ userAllowedInRooms)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../types */ \"(api)/./types/index.ts\");\n\n/**\n * Returns true if a user has any of the allowed accesses in every room\n * @param accessesAllowed - Each of these permission types is checked\n * @param userId - The user's id to check\n * @param groupIds - An array of group names the user is part of\n * @param rooms - A list of rooms returned from Liveblocks APIs\n * @param [checkAccessLevels] - Check permission on only these access levels\n */ function userAllowedInRooms({ accessesAllowed , userId , groupIds , rooms , checkAccessLevels  }) {\n    return rooms.every((room)=>userAllowedInRoom({\n            accessesAllowed,\n            userId,\n            groupIds,\n            checkAccessLevels,\n            room\n        }));\n}\n/**\n * Returns true if a user has any of the allowed accesses in the room\n * @param accessesAllowed - Each of these permission types is checked\n * @param userId - The user's id to check\n * @param groupIds - An array of group names the user is part of\n * @param room - A room returned from Liveblocks APIs\n * @param [checkAccessLevels] - Check permission on only these access levels\n */ function userAllowedInRoom({ accessesAllowed , userId , groupIds , room , checkAccessLevels =[\n    ...Object.values(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels)\n]  }) {\n    for (const access of accessesAllowed){\n        // User access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.USER)) {\n            // User is owner\n            if (room.metadata.owner === userId) {\n                return true;\n            }\n            if (room.usersAccesses?.[userId]?.includes(access)) {\n                return true;\n            }\n        }\n        // A group access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.GROUP)) {\n            for (const groupId of groupIds){\n                if (room.groupsAccesses?.[groupId]?.includes(access)) {\n                    return true;\n                }\n            }\n        }\n        // Default access is set\n        if (checkAccessLevels.includes(_types__WEBPACK_IMPORTED_MODULE_0__.RoomAccessLevels.DEFAULT) && room.defaultAccesses.includes(access)) {\n            return true;\n        }\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc2VydmVyL3V0aWxzL3VzZXJBbGxvd2VkSW5Sb29tcy50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0U7QUFpQnBFOzs7Ozs7O0NBT0MsR0FDTSxTQUFTQyxtQkFBbUIsRUFDakNDLGdCQUFlLEVBQ2ZDLE9BQU0sRUFDTkMsU0FBUSxFQUNSQyxNQUFLLEVBQ0xDLGtCQUFpQixFQUNPLEVBQUU7SUFDMUIsT0FBT0QsTUFBTUUsS0FBSyxDQUFDLENBQUNDLE9BQ2xCQyxrQkFBa0I7WUFDaEJQO1lBQ0FDO1lBQ0FDO1lBQ0FFO1lBQ0FFO1FBQ0Y7QUFFSixDQUFDO0FBRUQ7Ozs7Ozs7Q0FPQyxHQUVNLFNBQVNDLGtCQUFrQixFQUNoQ1AsZ0JBQWUsRUFDZkMsT0FBTSxFQUNOQyxTQUFRLEVBQ1JJLEtBQUksRUFDSkYsbUJBQW9CO09BQUlJLE9BQU9DLE1BQU0sQ0FBQ1gsb0RBQWdCQTtDQUFFLEdBQ2pDLEVBQUU7SUFDekIsS0FBSyxNQUFNWSxVQUFVVixnQkFBaUI7UUFDcEMscUJBQXFCO1FBQ3JCLElBQUlJLGtCQUFrQk8sUUFBUSxDQUFDYix5REFBcUIsR0FBRztZQUNyRCxnQkFBZ0I7WUFDaEIsSUFBSVEsS0FBS08sUUFBUSxDQUFDQyxLQUFLLEtBQUtiLFFBQVE7Z0JBQ2xDLE9BQU8sSUFBSTtZQUNiLENBQUM7WUFFRCxJQUFJSyxLQUFLUyxhQUFhLEVBQUUsQ0FBQ2QsT0FBTyxFQUFFVSxTQUFTRCxTQUFTO2dCQUNsRCxPQUFPLElBQUk7WUFDYixDQUFDO1FBQ0gsQ0FBQztRQUVELHdCQUF3QjtRQUN4QixJQUFJTixrQkFBa0JPLFFBQVEsQ0FBQ2IsMERBQXNCLEdBQUc7WUFDdEQsS0FBSyxNQUFNbUIsV0FBV2YsU0FBVTtnQkFDOUIsSUFBSUksS0FBS1ksY0FBYyxFQUFFLENBQUNELFFBQVEsRUFBRU4sU0FBU0QsU0FBUztvQkFDcEQsT0FBTyxJQUFJO2dCQUNiLENBQUM7WUFDSDtRQUNGLENBQUM7UUFFRCx3QkFBd0I7UUFDeEIsSUFDRU4sa0JBQWtCTyxRQUFRLENBQUNiLDREQUF3QixLQUNuRFEsS0FBS2MsZUFBZSxDQUFDVCxRQUFRLENBQUNELFNBQzlCO1lBQ0EsT0FBTyxJQUFJO1FBQ2IsQ0FBQztJQUNIO0lBRUEsT0FBTyxLQUFLO0FBQ2QsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2xpYi9zZXJ2ZXIvdXRpbHMvdXNlckFsbG93ZWRJblJvb21zLnRzPzc2ZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm9vbSwgUm9vbUFjY2VzcywgUm9vbUFjY2Vzc0xldmVscyB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG5pbnRlcmZhY2UgVXNlckFjY2Vzc1Byb3BzIHtcbiAgYWNjZXNzZXNBbGxvd2VkOiBSb29tQWNjZXNzW107XG4gIGNoZWNrQWNjZXNzTGV2ZWxzPzogUm9vbUFjY2Vzc0xldmVsc1tdO1xuICBncm91cElkczogc3RyaW5nW107XG4gIHVzZXJJZDogc3RyaW5nO1xufVxuXG50eXBlIFVzZXJBbGxvd2VkSW5Sb29tUHJvcHMgPSBVc2VyQWNjZXNzUHJvcHMgJiB7XG4gIHJvb206IFJvb207XG59O1xuXG50eXBlIFVzZXJBbGxvd2VkSW5Sb29tc1Byb3BzID0gVXNlckFjY2Vzc1Byb3BzICYge1xuICByb29tczogUm9vbVtdO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyIGhhcyBhbnkgb2YgdGhlIGFsbG93ZWQgYWNjZXNzZXMgaW4gZXZlcnkgcm9vbVxuICogQHBhcmFtIGFjY2Vzc2VzQWxsb3dlZCAtIEVhY2ggb2YgdGhlc2UgcGVybWlzc2lvbiB0eXBlcyBpcyBjaGVja2VkXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXIncyBpZCB0byBjaGVja1xuICogQHBhcmFtIGdyb3VwSWRzIC0gQW4gYXJyYXkgb2YgZ3JvdXAgbmFtZXMgdGhlIHVzZXIgaXMgcGFydCBvZlxuICogQHBhcmFtIHJvb21zIC0gQSBsaXN0IG9mIHJvb21zIHJldHVybmVkIGZyb20gTGl2ZWJsb2NrcyBBUElzXG4gKiBAcGFyYW0gW2NoZWNrQWNjZXNzTGV2ZWxzXSAtIENoZWNrIHBlcm1pc3Npb24gb24gb25seSB0aGVzZSBhY2Nlc3MgbGV2ZWxzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1c2VyQWxsb3dlZEluUm9vbXMoe1xuICBhY2Nlc3Nlc0FsbG93ZWQsXG4gIHVzZXJJZCxcbiAgZ3JvdXBJZHMsXG4gIHJvb21zLFxuICBjaGVja0FjY2Vzc0xldmVscyxcbn06IFVzZXJBbGxvd2VkSW5Sb29tc1Byb3BzKSB7XG4gIHJldHVybiByb29tcy5ldmVyeSgocm9vbSkgPT5cbiAgICB1c2VyQWxsb3dlZEluUm9vbSh7XG4gICAgICBhY2Nlc3Nlc0FsbG93ZWQsXG4gICAgICB1c2VySWQsXG4gICAgICBncm91cElkcyxcbiAgICAgIGNoZWNrQWNjZXNzTGV2ZWxzLFxuICAgICAgcm9vbSxcbiAgICB9KVxuICApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIHVzZXIgaGFzIGFueSBvZiB0aGUgYWxsb3dlZCBhY2Nlc3NlcyBpbiB0aGUgcm9vbVxuICogQHBhcmFtIGFjY2Vzc2VzQWxsb3dlZCAtIEVhY2ggb2YgdGhlc2UgcGVybWlzc2lvbiB0eXBlcyBpcyBjaGVja2VkXG4gKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXIncyBpZCB0byBjaGVja1xuICogQHBhcmFtIGdyb3VwSWRzIC0gQW4gYXJyYXkgb2YgZ3JvdXAgbmFtZXMgdGhlIHVzZXIgaXMgcGFydCBvZlxuICogQHBhcmFtIHJvb20gLSBBIHJvb20gcmV0dXJuZWQgZnJvbSBMaXZlYmxvY2tzIEFQSXNcbiAqIEBwYXJhbSBbY2hlY2tBY2Nlc3NMZXZlbHNdIC0gQ2hlY2sgcGVybWlzc2lvbiBvbiBvbmx5IHRoZXNlIGFjY2VzcyBsZXZlbHNcbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlckFsbG93ZWRJblJvb20oe1xuICBhY2Nlc3Nlc0FsbG93ZWQsXG4gIHVzZXJJZCxcbiAgZ3JvdXBJZHMsXG4gIHJvb20sXG4gIGNoZWNrQWNjZXNzTGV2ZWxzID0gWy4uLk9iamVjdC52YWx1ZXMoUm9vbUFjY2Vzc0xldmVscyldLFxufTogVXNlckFsbG93ZWRJblJvb21Qcm9wcykge1xuICBmb3IgKGNvbnN0IGFjY2VzcyBvZiBhY2Nlc3Nlc0FsbG93ZWQpIHtcbiAgICAvLyBVc2VyIGFjY2VzcyBpcyBzZXRcbiAgICBpZiAoY2hlY2tBY2Nlc3NMZXZlbHMuaW5jbHVkZXMoUm9vbUFjY2Vzc0xldmVscy5VU0VSKSkge1xuICAgICAgLy8gVXNlciBpcyBvd25lclxuICAgICAgaWYgKHJvb20ubWV0YWRhdGEub3duZXIgPT09IHVzZXJJZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHJvb20udXNlcnNBY2Nlc3Nlcz8uW3VzZXJJZF0/LmluY2x1ZGVzKGFjY2VzcykpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQSBncm91cCBhY2Nlc3MgaXMgc2V0XG4gICAgaWYgKGNoZWNrQWNjZXNzTGV2ZWxzLmluY2x1ZGVzKFJvb21BY2Nlc3NMZXZlbHMuR1JPVVApKSB7XG4gICAgICBmb3IgKGNvbnN0IGdyb3VwSWQgb2YgZ3JvdXBJZHMpIHtcbiAgICAgICAgaWYgKHJvb20uZ3JvdXBzQWNjZXNzZXM/Lltncm91cElkXT8uaW5jbHVkZXMoYWNjZXNzKSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRGVmYXVsdCBhY2Nlc3MgaXMgc2V0XG4gICAgaWYgKFxuICAgICAgY2hlY2tBY2Nlc3NMZXZlbHMuaW5jbHVkZXMoUm9vbUFjY2Vzc0xldmVscy5ERUZBVUxUKSAmJlxuICAgICAgcm9vbS5kZWZhdWx0QWNjZXNzZXMuaW5jbHVkZXMoYWNjZXNzKVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuIl0sIm5hbWVzIjpbIlJvb21BY2Nlc3NMZXZlbHMiLCJ1c2VyQWxsb3dlZEluUm9vbXMiLCJhY2Nlc3Nlc0FsbG93ZWQiLCJ1c2VySWQiLCJncm91cElkcyIsInJvb21zIiwiY2hlY2tBY2Nlc3NMZXZlbHMiLCJldmVyeSIsInJvb20iLCJ1c2VyQWxsb3dlZEluUm9vbSIsIk9iamVjdCIsInZhbHVlcyIsImFjY2VzcyIsImluY2x1ZGVzIiwiVVNFUiIsIm1ldGFkYXRhIiwib3duZXIiLCJ1c2Vyc0FjY2Vzc2VzIiwiR1JPVVAiLCJncm91cElkIiwiZ3JvdXBzQWNjZXNzZXMiLCJERUZBVUxUIiwiZGVmYXVsdEFjY2Vzc2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/server/utils/userAllowedInRooms.ts\n");

/***/ }),

/***/ "(api)/./liveblocks.server.config.ts":
/*!*************************************!*\
  !*** ./liveblocks.server.config.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"API_BASE_URL\": () => (/* binding */ API_BASE_URL),\n/* harmony export */   \"SECRET_API_KEY\": () => (/* binding */ SECRET_API_KEY)\n/* harmony export */ });\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/react */ \"next-auth/react\");\n/* harmony import */ var next_auth_react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_react__WEBPACK_IMPORTED_MODULE_0__);\n// Liveblocks API base url\n\nconst API_BASE_URL = \"https://api.liveblocks.io\";\n// Your Liveblocks secret key\nconst SECRET_API_KEY = process.env.LIVEBLOCKS_SECRET_KEY;\n// ============================================================================\nif (!SECRET_API_KEY) {\n    throw new Error(`You must add your Liveblocks secret key to .env.local to use the starter kit \n\nExample .env.local file:\nLIVEBLOCKS_SECRET_KEY=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n\nYou can find your secret keys on https://liveblocks.io/dashboard/apikeys \nFollow the full starter kit guide on https://liveblocks.io/docs/guides/nextjs-starter-kit\n \n`);\n}\nif (false) {}\n(async ()=>{\n    const providers = await (0,next_auth_react__WEBPACK_IMPORTED_MODULE_0__.getProviders)();\n    if (providers?.github) {\n        if (!process.env.GITHUB_CLIENT_ID || !process.env.GITHUB_CLIENT_SECRET) {\n            console.log(`Your GitHub secrets are missing from .env.local\n      \nExample .env.local file:\nGITHUB_CLIENT_ID=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nGITHUB_CLIENT_SECRET=sk_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n      \nFollow the full starter kit guide to learn how to get them:\nhttps://liveblocks.io/docs/guides/nextjs-starter-kit#github-authentication\n      `);\n        }\n    }\n    if (providers?.auth0) {\n        if (!process.env.AUTH0_CLIENT_ID || !process.env.AUTH0_CLIENT_SECRET || !process.env.AUTH0_ISSUER_BASE_URL) {\n            throw new Error(`Your Auth0 secrets are missing from .env.local\n      \nExample .env.local file:\nAUTH0_CLIENT_ID=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_CLIENT_SECRET=XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\nAUTH0_ISSUER_BASE_URL=https://XXXXXXXXXXXXXXXXXX.com\n      \nFollow the full starter kit guide to learn how to get them:\nhttps://liveblocks.io/docs/guides/nextjs-starter-kit#auth0-authentication\n      `);\n        }\n    }\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saXZlYmxvY2tzLnNlcnZlci5jb25maWcudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDBCQUEwQjtBQUNxQjtBQUV4QyxNQUFNQyxlQUFlLDRCQUE0QjtBQUV4RCw2QkFBNkI7QUFDdEIsTUFBTUMsaUJBQWlCQyxRQUFRQyxHQUFHLENBQUNDLHFCQUFxQixDQUFDO0FBRWhFLCtFQUErRTtBQUMvRSxJQUFJLENBQUNILGdCQUFnQjtJQUNuQixNQUFNLElBQUlJLE1BQU0sQ0FBQzs7Ozs7Ozs7QUFRbkIsQ0FBQyxFQUFFO0FBQ0gsQ0FBQztBQUVELElBQUksS0FBNkIsRUFBRSxFQU9sQztBQUVBLFdBQVk7SUFDWCxNQUFNSSxZQUFZLE1BQU1WLDZEQUFZQTtJQUVwQyxJQUFJVSxXQUFXQyxRQUFRO1FBQ3JCLElBQUksQ0FBQ1IsUUFBUUMsR0FBRyxDQUFDUSxnQkFBZ0IsSUFBSSxDQUFDVCxRQUFRQyxHQUFHLENBQUNTLG9CQUFvQixFQUFFO1lBQ3RFTixRQUFRQyxHQUFHLENBQUMsQ0FBQzs7Ozs7Ozs7TUFRYixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7SUFFRCxJQUFJRSxXQUFXSSxPQUFPO1FBQ3BCLElBQ0UsQ0FBQ1gsUUFBUUMsR0FBRyxDQUFDVyxlQUFlLElBQzVCLENBQUNaLFFBQVFDLEdBQUcsQ0FBQ1ksbUJBQW1CLElBQ2hDLENBQUNiLFFBQVFDLEdBQUcsQ0FBQ2EscUJBQXFCLEVBQ2xDO1lBQ0EsTUFBTSxJQUFJWCxNQUFNLENBQUM7Ozs7Ozs7OztNQVNqQixDQUFDLEVBQUU7UUFDTCxDQUFDO0lBQ0gsQ0FBQztBQUNIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbGl2ZWJsb2Nrcy5zZXJ2ZXIuY29uZmlnLnRzPzdmYzAiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gTGl2ZWJsb2NrcyBBUEkgYmFzZSB1cmxcbmltcG9ydCB7IGdldFByb3ZpZGVycyB9IGZyb20gXCJuZXh0LWF1dGgvcmVhY3RcIjtcblxuZXhwb3J0IGNvbnN0IEFQSV9CQVNFX1VSTCA9IFwiaHR0cHM6Ly9hcGkubGl2ZWJsb2Nrcy5pb1wiO1xuXG4vLyBZb3VyIExpdmVibG9ja3Mgc2VjcmV0IGtleVxuZXhwb3J0IGNvbnN0IFNFQ1JFVF9BUElfS0VZID0gcHJvY2Vzcy5lbnYuTElWRUJMT0NLU19TRUNSRVRfS0VZO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5pZiAoIVNFQ1JFVF9BUElfS0VZKSB7XG4gIHRocm93IG5ldyBFcnJvcihgWW91IG11c3QgYWRkIHlvdXIgTGl2ZWJsb2NrcyBzZWNyZXQga2V5IHRvIC5lbnYubG9jYWwgdG8gdXNlIHRoZSBzdGFydGVyIGtpdCBcblxuRXhhbXBsZSAuZW52LmxvY2FsIGZpbGU6XG5MSVZFQkxPQ0tTX1NFQ1JFVF9LRVk9c2tfWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFxuXG5Zb3UgY2FuIGZpbmQgeW91ciBzZWNyZXQga2V5cyBvbiBodHRwczovL2xpdmVibG9ja3MuaW8vZGFzaGJvYXJkL2FwaWtleXMgXG5Gb2xsb3cgdGhlIGZ1bGwgc3RhcnRlciBraXQgZ3VpZGUgb24gaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvZ3VpZGVzL25leHRqcy1zdGFydGVyLWtpdFxuIFxuYCk7XG59XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gIGNvbnNvbGUubG9nKCk7XG4gIGNvbnNvbGUuZXJyb3IoXG4gICAgXCJEQU5HRVI6IFlvdSdyZSB1c2luZyBkYXRhIGZyb20gL2xpdmVibG9ja3Muc2VydmVyLmNvbmZpZy50cyBvbiB0aGUgY2xpZW50XCJcbiAgKTtcbiAgY29uc29sZS5lcnJvcihcIlRoaXMgbWF5IGV4cG9zZSB5b3VyIHNlY3JldCBrZXkocylcIik7XG4gIGNvbnNvbGUubG9nKCk7XG59XG5cbihhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHByb3ZpZGVycyA9IGF3YWl0IGdldFByb3ZpZGVycygpO1xuXG4gIGlmIChwcm92aWRlcnM/LmdpdGh1Yikge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9JRCB8fCAhcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9TRUNSRVQpIHtcbiAgICAgIGNvbnNvbGUubG9nKGBZb3VyIEdpdEh1YiBzZWNyZXRzIGFyZSBtaXNzaW5nIGZyb20gLmVudi5sb2NhbFxuICAgICAgXG5FeGFtcGxlIC5lbnYubG9jYWwgZmlsZTpcbkdJVEhVQl9DTElFTlRfSUQ9c2tfWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFxuR0lUSFVCX0NMSUVOVF9TRUNSRVQ9c2tfWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFxuICAgICAgXG5Gb2xsb3cgdGhlIGZ1bGwgc3RhcnRlciBraXQgZ3VpZGUgdG8gbGVhcm4gaG93IHRvIGdldCB0aGVtOlxuaHR0cHM6Ly9saXZlYmxvY2tzLmlvL2RvY3MvZ3VpZGVzL25leHRqcy1zdGFydGVyLWtpdCNnaXRodWItYXV0aGVudGljYXRpb25cbiAgICAgIGApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwcm92aWRlcnM/LmF1dGgwKSB7XG4gICAgaWYgKFxuICAgICAgIXByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9JRCB8fFxuICAgICAgIXByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9TRUNSRVQgfHxcbiAgICAgICFwcm9jZXNzLmVudi5BVVRIMF9JU1NVRVJfQkFTRV9VUkxcbiAgICApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgWW91ciBBdXRoMCBzZWNyZXRzIGFyZSBtaXNzaW5nIGZyb20gLmVudi5sb2NhbFxuICAgICAgXG5FeGFtcGxlIC5lbnYubG9jYWwgZmlsZTpcbkFVVEgwX0NMSUVOVF9JRD1YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFxuQVVUSDBfQ0xJRU5UX1NFQ1JFVD1YWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYXG5BVVRIMF9JU1NVRVJfQkFTRV9VUkw9aHR0cHM6Ly9YWFhYWFhYWFhYWFhYWFhYWFguY29tXG4gICAgICBcbkZvbGxvdyB0aGUgZnVsbCBzdGFydGVyIGtpdCBndWlkZSB0byBsZWFybiBob3cgdG8gZ2V0IHRoZW06XG5odHRwczovL2xpdmVibG9ja3MuaW8vZG9jcy9ndWlkZXMvbmV4dGpzLXN0YXJ0ZXIta2l0I2F1dGgwLWF1dGhlbnRpY2F0aW9uXG4gICAgICBgKTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iXSwibmFtZXMiOlsiZ2V0UHJvdmlkZXJzIiwiQVBJX0JBU0VfVVJMIiwiU0VDUkVUX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTElWRUJMT0NLU19TRUNSRVRfS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJwcm92aWRlcnMiLCJnaXRodWIiLCJHSVRIVUJfQ0xJRU5UX0lEIiwiR0lUSFVCX0NMSUVOVF9TRUNSRVQiLCJhdXRoMCIsIkFVVEgwX0NMSUVOVF9JRCIsIkFVVEgwX0NMSUVOVF9TRUNSRVQiLCJBVVRIMF9JU1NVRVJfQkFTRV9VUkwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./liveblocks.server.config.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"NEXTAUTH_SECRET\": () => (/* binding */ NEXTAUTH_SECRET),\n/* harmony export */   \"authOptions\": () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/server */ \"(api)/./lib/server/index.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_server__WEBPACK_IMPORTED_MODULE_2__]);\n_lib_server__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Your NextAuth secret (generate a new one for production)\n// More info: https://next-auth.js.org/configuration/options#secret\nconst NEXTAUTH_SECRET = process.env.NEXTAUTH_SECRET;\nconst authOptions = {\n    secret: NEXTAUTH_SECRET,\n    callbacks: {\n        // Get extra user info from your database to pass to front-end\n        // For front end, update next-auth.d.ts with session type\n        async session ({ session  }) {\n            const userInfo = await (0,_lib_server__WEBPACK_IMPORTED_MODULE_2__.getUser)(session.user.email);\n            if (!userInfo) {\n                throw new Error(\"User not found\");\n            }\n            session.user.info = userInfo;\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/signin\"\n    },\n    // Configure one or more authentication providers\n    // More info: https://next-auth.js.org/providers/\n    providers: [\n        // CredentialsProvider is used for the demo auth system\n        // Replace this with a real provider, e.g. GitHub, Auth0\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"Credentials\",\n            credentials: {\n                email: {\n                    label: \"email\",\n                    type: \"text\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials) {\n                    return null;\n                }\n                const user = await (0,_lib_server__WEBPACK_IMPORTED_MODULE_2__.getUser)(credentials.email);\n                if (!user) {\n                    throw new Error(\"User not found\");\n                }\n                return {\n                    id: user.id,\n                    name: user.name,\n                    email: user.id,\n                    image: user.avatar\n                };\n            }\n        })\n    ]\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWlDO0FBQ2lDO0FBQ3BCO0FBRzlDLDJEQUEyRDtBQUMzRCxtRUFBbUU7QUFDNUQsTUFBTUcsa0JBQWtCQyxRQUFRQyxHQUFHLENBQUNGLGVBQWUsQ0FBQztBQUVwRCxNQUFNRyxjQUFjO0lBQ3pCQyxRQUFRSjtJQUNSSyxXQUFXO1FBQ1QsOERBQThEO1FBQzlELHlEQUF5RDtRQUN6RCxNQUFNQyxTQUFRLEVBQUVBLFFBQU8sRUFBb0IsRUFBRTtZQUMzQyxNQUFNQyxXQUF3QixNQUFNUixvREFBT0EsQ0FBQ08sUUFBUUUsSUFBSSxDQUFDQyxLQUFLO1lBRTlELElBQUksQ0FBQ0YsVUFBVTtnQkFDYixNQUFNLElBQUlHLE1BQU0sa0JBQWtCO1lBQ3BDLENBQUM7WUFFREosUUFBUUUsSUFBSSxDQUFDRyxJQUFJLEdBQUdKO1lBQ3BCLE9BQU9EO1FBQ1Q7SUFDRjtJQUNBTSxPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUVBLGlEQUFpRDtJQUNqRCxpREFBaUQ7SUFDakRDLFdBQVc7UUFDVCx1REFBdUQ7UUFDdkQsd0RBQXdEO1FBQ3hEaEIsc0VBQW1CQSxDQUFDO1lBQ2xCaUIsTUFBTTtZQUNOQyxhQUFhO2dCQUNYUCxPQUFPO29CQUNMUSxPQUFPO29CQUNQQyxNQUFNO2dCQUNSO1lBQ0Y7WUFDQSxNQUFNQyxXQUFVSCxXQUFXLEVBQUU7Z0JBQzNCLElBQUksQ0FBQ0EsYUFBYTtvQkFDaEIsT0FBTyxJQUFJO2dCQUNiLENBQUM7Z0JBRUQsTUFBTVIsT0FBb0IsTUFBTVQsb0RBQU9BLENBQUNpQixZQUFZUCxLQUFLO2dCQUV6RCxJQUFJLENBQUNELE1BQU07b0JBQ1QsTUFBTSxJQUFJRSxNQUFNLGtCQUFrQjtnQkFDcEMsQ0FBQztnQkFFRCxPQUFPO29CQUNMVSxJQUFJWixLQUFLWSxFQUFFO29CQUNYTCxNQUFNUCxLQUFLTyxJQUFJO29CQUNmTixPQUFPRCxLQUFLWSxFQUFFO29CQUNkQyxPQUFPYixLQUFLYyxNQUFNO2dCQUNwQjtZQUNGO1FBQ0Y7S0FzQkQ7QUFDSCxFQUFFO0FBRUYsaUVBQWV6QixnREFBUUEsQ0FBQ00sWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0udHM/MmU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTmV4dEF1dGggZnJvbSBcIm5leHQtYXV0aFwiO1xuaW1wb3J0IENyZWRlbnRpYWxzUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvY3JlZGVudGlhbHNcIjtcbmltcG9ydCB7IGdldFVzZXIgfSBmcm9tIFwiLi4vLi4vLi4vbGliL3NlcnZlclwiO1xuaW1wb3J0IHsgVXNlciB9IGZyb20gXCIuLi8uLi8uLi90eXBlc1wiO1xuXG4vLyBZb3VyIE5leHRBdXRoIHNlY3JldCAoZ2VuZXJhdGUgYSBuZXcgb25lIGZvciBwcm9kdWN0aW9uKVxuLy8gTW9yZSBpbmZvOiBodHRwczovL25leHQtYXV0aC5qcy5vcmcvY29uZmlndXJhdGlvbi9vcHRpb25zI3NlY3JldFxuZXhwb3J0IGNvbnN0IE5FWFRBVVRIX1NFQ1JFVCA9IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVDtcblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zID0ge1xuICBzZWNyZXQ6IE5FWFRBVVRIX1NFQ1JFVCxcbiAgY2FsbGJhY2tzOiB7XG4gICAgLy8gR2V0IGV4dHJhIHVzZXIgaW5mbyBmcm9tIHlvdXIgZGF0YWJhc2UgdG8gcGFzcyB0byBmcm9udC1lbmRcbiAgICAvLyBGb3IgZnJvbnQgZW5kLCB1cGRhdGUgbmV4dC1hdXRoLmQudHMgd2l0aCBzZXNzaW9uIHR5cGVcbiAgICBhc3luYyBzZXNzaW9uKHsgc2Vzc2lvbiB9OiB7IHNlc3Npb246IGFueSB9KSB7XG4gICAgICBjb25zdCB1c2VySW5mbzogVXNlciB8IG51bGwgPSBhd2FpdCBnZXRVc2VyKHNlc3Npb24udXNlci5lbWFpbCk7XG5cbiAgICAgIGlmICghdXNlckluZm8pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlciBub3QgZm91bmRcIik7XG4gICAgICB9XG5cbiAgICAgIHNlc3Npb24udXNlci5pbmZvID0gdXNlckluZm87XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvc2lnbmluXCIsXG4gIH0sXG5cbiAgLy8gQ29uZmlndXJlIG9uZSBvciBtb3JlIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyc1xuICAvLyBNb3JlIGluZm86IGh0dHBzOi8vbmV4dC1hdXRoLmpzLm9yZy9wcm92aWRlcnMvXG4gIHByb3ZpZGVyczogW1xuICAgIC8vIENyZWRlbnRpYWxzUHJvdmlkZXIgaXMgdXNlZCBmb3IgdGhlIGRlbW8gYXV0aCBzeXN0ZW1cbiAgICAvLyBSZXBsYWNlIHRoaXMgd2l0aCBhIHJlYWwgcHJvdmlkZXIsIGUuZy4gR2l0SHViLCBBdXRoMFxuICAgIENyZWRlbnRpYWxzUHJvdmlkZXIoe1xuICAgICAgbmFtZTogXCJDcmVkZW50aWFsc1wiLFxuICAgICAgY3JlZGVudGlhbHM6IHtcbiAgICAgICAgZW1haWw6IHtcbiAgICAgICAgICBsYWJlbDogXCJlbWFpbFwiLFxuICAgICAgICAgIHR5cGU6IFwidGV4dFwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB1c2VyOiBVc2VyIHwgbnVsbCA9IGF3YWl0IGdldFVzZXIoY3JlZGVudGlhbHMuZW1haWwpO1xuXG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZXIgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXIuaWQsXG4gICAgICAgICAgaW1hZ2U6IHVzZXIuYXZhdGFyLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9KSxcblxuICAgIC8qXG4gICAgLy8gVXNlIEdpdEh1YiBhdXRoZW50aWNhdGlvblxuICAgIC8vIGltcG9ydCBHaXRodWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIjtcbiAgICBHaXRodWJQcm92aWRlcih7XG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR0lUSFVCX0NMSUVOVF9JRCBhcyBzdHJpbmcsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdJVEhVQl9DTElFTlRfU0VDUkVUIGFzIHN0cmluZyxcbiAgICB9KSxcbiAgICAqL1xuXG4gICAgLypcbiAgICAvLyBVc2UgQXV0aDAgYXV0aGVudGljYXRpb25cbiAgICAvLyBpbXBvcnQgQXV0aDBQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9hdXRoMFwiO1xuICAgIEF1dGgwUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9JRCBhcyBzdHJpbmcsXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkFVVEgwX0NMSUVOVF9TRUNSRVQgYXMgc3RyaW5nLFxuICAgICAgaXNzdWVyOiBwcm9jZXNzLmVudi5BVVRIMF9JU1NVRVJfQkFTRV9VUkwsXG4gICAgfSksXG4gICAgKi9cblxuICAgIC8vIC4uLmFkZCBtb3JlIHByb3ZpZGVycyBoZXJlXG4gIF0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBOZXh0QXV0aChhdXRoT3B0aW9ucyk7XG4iXSwibmFtZXMiOlsiTmV4dEF1dGgiLCJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiZ2V0VXNlciIsIk5FWFRBVVRIX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJhdXRoT3B0aW9ucyIsInNlY3JldCIsImNhbGxiYWNrcyIsInNlc3Npb24iLCJ1c2VySW5mbyIsInVzZXIiLCJlbWFpbCIsIkVycm9yIiwiaW5mbyIsInBhZ2VzIiwic2lnbkluIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwibGFiZWwiLCJ0eXBlIiwiYXV0aG9yaXplIiwiaWQiLCJpbWFnZSIsImF2YXRhciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./types/api.ts":
/*!**********************!*\
  !*** ./types/api.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9hcGkudHMuanMiLCJtYXBwaW5ncyI6IjtBQThFTSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2FwaS50cz9lZmMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudEFjY2VzcyxcbiAgRG9jdW1lbnRUeXBlLFxuICBEb2N1bWVudEdyb3VwLFxuICBEb2N1bWVudFVzZXIsXG59IGZyb20gXCIuL2RvY3VtZW50XCI7XG5pbXBvcnQgeyBSb29tQWN0aXZlVXNlciwgUm9vbSB9IGZyb20gXCIuL3Jvb21cIjtcblxuLyoqXG4gKiBUaGVzZSB0eXBlcyBhcmUgdXNlZCB0byB1bmlmeSB0aGUgY2xpZW50L3NlcnZlciBBUEkgZW5kcG9pbnRzXG4gKi9cblxuZXhwb3J0IHR5cGUgR2V0RG9jdW1lbnRzUmVzcG9uc2UgPSB7XG4gIGRvY3VtZW50czogRG9jdW1lbnRbXTtcbiAgbmV4dFBhZ2U6IHN0cmluZyB8IG51bGw7XG59O1xuXG5leHBvcnQgdHlwZSBHZXRTdG9yYWdlUmVzcG9uc2UgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcblxuZXhwb3J0IHR5cGUgQ3JlYXRlRG9jdW1lbnRSZXF1ZXN0ID0ge1xuICBuYW1lOiBEb2N1bWVudFtcIm5hbWVcIl07XG4gIHR5cGU6IERvY3VtZW50VHlwZTtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZ3JvdXBJZHM/OiBzdHJpbmc7IC8vIENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIGdyb3VwSWRzXG4gIGRyYWZ0PzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZURvY3VtZW50UmVxdWVzdCA9IHtcbiAgZG9jdW1lbnREYXRhOiBQYXJ0aWFsPFJvb20+O1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRG9jdW1lbnRTY29wZSA9IHtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZUdyb3VwUmVxdWVzdCA9IHtcbiAgZ3JvdXBJZDogRG9jdW1lbnRHcm91cFtcImlkXCJdO1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xufTtcblxuZXhwb3J0IHR5cGUgUmVtb3ZlR3JvdXBSZXF1ZXN0ID0ge1xuICBncm91cElkOiBEb2N1bWVudEdyb3VwW1wiaWRcIl07XG59O1xuXG5leHBvcnQgdHlwZSBVcGRhdGVVc2VyUmVxdWVzdCA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZVVzZXJSZXF1ZXN0ID0ge1xuICB1c2VySWQ6IERvY3VtZW50VXNlcltcImlkXCJdO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0Um9vbXNSZXNwb25zZSA9IHtcbiAgbmV4dFBhZ2U6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IFJvb21bXTtcbn07XG5cbmV4cG9ydCB0eXBlIExpdmVVc2Vyc1Jlc3BvbnNlID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xuICB1c2VyczogUm9vbUFjdGl2ZVVzZXJbXTtcbn07XG5cbmV4cG9ydCB0eXBlIEVycm9yRGF0YSA9IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb2RlPzogbnVtYmVyO1xuICBzdWdnZXN0aW9uPzogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRmV0Y2hBcGlSZXN1bHQ8VCA9IHVua25vd24+ID1cbiAgfCB7XG4gICAgICBkYXRhOiBUO1xuICAgICAgZXJyb3I/OiBuZXZlcjtcbiAgICB9XG4gIHwge1xuICAgICAgZXJyb3I6IEVycm9yRGF0YTtcbiAgICAgIGRhdGE/OiBuZXZlcjtcbiAgICB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./types/api.ts\n");

/***/ }),

/***/ "(api)/./types/data.ts":
/*!***********************!*\
  !*** ./types/data.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/**\n * These types are used in `/data`\n */ \n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9kYXRhLnRzLmpzIiwibWFwcGluZ3MiOiI7QUFBQTs7Q0FFQyxHQWFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vdHlwZXMvZGF0YS50cz9mMTcxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVGhlc2UgdHlwZXMgYXJlIHVzZWQgaW4gYC9kYXRhYFxuICovXG5cbmV4cG9ydCB0eXBlIFVzZXIgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgYXZhdGFyPzogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xuICBncm91cElkczogc3RyaW5nW107XG59O1xuXG5leHBvcnQgdHlwZSBHcm91cCA9IHtcbiAgaWQ6IHN0cmluZztcbiAgbmFtZTogc3RyaW5nO1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./types/data.ts\n");

/***/ }),

/***/ "(api)/./types/document.ts":
/*!***************************!*\
  !*** ./types/document.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DocumentAccess\": () => (/* binding */ DocumentAccess)\n/* harmony export */ });\nvar DocumentAccess;\n(function(DocumentAccess) {\n    DocumentAccess[// Can edit, read, and modify invited users\n    \"FULL\"] = \"full\";\n    DocumentAccess[// Can edit and read the document\n    \"EDIT\"] = \"edit\";\n    DocumentAccess[// Can only read the document\n    \"READONLY\"] = \"readonly\";\n    DocumentAccess[// Can't view the document\n    \"NONE\"] = \"none\";\n})(DocumentAccess || (DocumentAccess = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9kb2N1bWVudC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsSUE2Q087VUFBS0EsY0FBYztJQUFkQSxlQUNWLDJDQUEyQztJQUMzQ0MsVUFBTztJQUZHRCxlQUlWLGlDQUFpQztJQUNqQ0UsVUFBTztJQUxHRixlQU9WLDZCQUE2QjtJQUM3QkcsY0FBVztJQVJESCxlQVVWLDBCQUEwQjtJQUMxQkksVUFBTztHQVhHSixtQkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90eXBlcy9kb2N1bWVudC50cz9lMzc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVzZXIsIEdyb3VwIH0gZnJvbSBcIi4vZGF0YVwiO1xuaW1wb3J0IHsgUm9vbU1ldGFkYXRhIH0gZnJvbSBcIi4vcm9vbVwiO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIG1haW4gdHlwZSBvZiB5b3VyIERvY3VtZW50cy5cbiAqIE1ha2Ugc3VyZSB0byBlZGl0IC9saWIvc2VydmVyL3V0aWxzL2J1aWxkRG9jdW1lbnRzLnRzIHdoZW4gYWRkaW5nIG5ld1xuICogcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IHR5cGUgRG9jdW1lbnQgPSB7XG4gIC8vIEVxdWl2YWxlbnQgdG8gTGl2ZWJsb2NrcyByb29tIGlkXG4gIGlkOiBzdHJpbmc7XG5cbiAgLy8gVGhlIGRvY3VtZW50J3MgbmFtZVxuICBuYW1lOiBzdHJpbmc7XG5cbiAgLy8gQXJyYXlzIGNvbnRhaW5pbmcgYWNjZXNzIGxldmVsc1xuICBhY2Nlc3NlczogRG9jdW1lbnRBY2Nlc3NlcztcblxuICAvLyBUaGUgdXNlciBpZiBvZiB0aGUgZG9jdW1lbnQncyBjcmVhdG9yXG4gIG93bmVyOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcblxuICAvLyBXaGVuIHRoZSBkb2N1bWVudCB3YXMgY3JlYXRlZCAoRGF0ZS50b1N0cmluZygpKVxuICBjcmVhdGVkOiBzdHJpbmc7XG5cbiAgLy8gV2hlbiB0aGUgbGFzdCB1c2VyIGNvbm5lY3RlZCAoRGF0ZS50b1N0cmluZygpKVxuICBsYXN0Q29ubmVjdGlvbjogc3RyaW5nO1xuXG4gIC8vIElmIHRoZSByb29tIGlzIGEgZHJhZnQgKHdoaWNoIGhhcyBubyBncm91cHMgb3IgcHVibGljIGFjY2Vzcykgb3Igbm90XG4gIGRyYWZ0OiBib29sZWFuO1xuXG4gIC8vIFRoZSB0eXBlIG9mIGRvY3VtZW50IGUuZy4gXCJjYW52YXNcIlxuICB0eXBlOiBEb2N1bWVudFR5cGU7XG59O1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudFR5cGUgPSBcInRleHRcIiB8IFwid2hpdGVib2FyZFwiIHwgXCJzcHJlYWRzaGVldFwiO1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudEdyb3VwID0gR3JvdXAgJiB7XG4gIGFjY2VzczogRG9jdW1lbnRBY2Nlc3M7XG59O1xuXG5leHBvcnQgdHlwZSBEb2N1bWVudFVzZXIgPSBVc2VyICYge1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xuICBpc0N1cnJlbnRVc2VyOiBib29sZWFuO1xufTtcblxuZXhwb3J0IGVudW0gRG9jdW1lbnRBY2Nlc3Mge1xuICAvLyBDYW4gZWRpdCwgcmVhZCwgYW5kIG1vZGlmeSBpbnZpdGVkIHVzZXJzXG4gIEZVTEwgPSBcImZ1bGxcIixcblxuICAvLyBDYW4gZWRpdCBhbmQgcmVhZCB0aGUgZG9jdW1lbnRcbiAgRURJVCA9IFwiZWRpdFwiLFxuXG4gIC8vIENhbiBvbmx5IHJlYWQgdGhlIGRvY3VtZW50XG4gIFJFQURPTkxZID0gXCJyZWFkb25seVwiLFxuXG4gIC8vIENhbid0IHZpZXcgdGhlIGRvY3VtZW50XG4gIE5PTkUgPSBcIm5vbmVcIixcbn1cblxuZXhwb3J0IHR5cGUgRG9jdW1lbnRBY2Nlc3NlcyA9IHtcbiAgZGVmYXVsdDogRG9jdW1lbnRBY2Nlc3M7XG4gIGdyb3VwczogUmVjb3JkPERvY3VtZW50R3JvdXBbXCJpZFwiXSwgRG9jdW1lbnRBY2Nlc3M+O1xuICB1c2VyczogUmVjb3JkPERvY3VtZW50VXNlcltcImlkXCJdLCBEb2N1bWVudEFjY2Vzcz47XG59O1xuXG4vLyBSb29tIG1ldGFkYXRhIHVzZWQgd2hlbiBjcmVhdGluZyBhIG5ldyBkb2N1bWVudFxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudFJvb21NZXRhZGF0YSBleHRlbmRzIFJvb21NZXRhZGF0YSB7XG4gIG5hbWU6IERvY3VtZW50W1wibmFtZVwiXTtcbiAgdHlwZTogRG9jdW1lbnRUeXBlO1xuICBvd25lcjogVXNlcltcImlkXCJdO1xuICBkcmFmdDogXCJ5ZXNcIiB8IFwibm9cIjtcbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudEFjY2VzcyIsIkZVTEwiLCJFRElUIiwiUkVBRE9OTFkiLCJOT05FIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./types/document.ts\n");

/***/ }),

/***/ "(api)/./types/functions.ts":
/*!****************************!*\
  !*** ./types/functions.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9mdW5jdGlvbnMudHMuanMiLCJtYXBwaW5ncyI6IjtBQW9GRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2Z1bmN0aW9ucy50cz9jM2RhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIERvY3VtZW50LFxuICBEb2N1bWVudEFjY2VzcyxcbiAgRG9jdW1lbnRHcm91cCxcbiAgRG9jdW1lbnRUeXBlLFxuICBEb2N1bWVudFVzZXIsXG59IGZyb20gXCIuL2RvY3VtZW50XCI7XG5cbi8qKlxuICogVGhlc2UgdHlwZXMgYXJlIHRoZSBwcm9wZXJ0aWVzIHVzZWQgaW46XG4gKiBgL2xpYi9jbGllbnQvZG9jdW1lbnRzL2BcbiAqIGAvbGliL3NlcnZlci9kb2N1bWVudHMvYFxuICovXG5cbmV4cG9ydCB0eXBlIENyZWF0ZURvY3VtZW50UHJvcHMgPSB7XG4gIG5hbWU6IERvY3VtZW50W1wibmFtZVwiXTtcbiAgdHlwZTogRG9jdW1lbnRUeXBlO1xuICB1c2VySWQ6IERvY3VtZW50VXNlcltcImlkXCJdO1xuICBncm91cElkcz86IERvY3VtZW50R3JvdXBbXCJpZFwiXVtdO1xuICBkcmFmdD86IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBHZXREb2N1bWVudFByb3BzID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRG9jdW1lbnRQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgZG9jdW1lbnREYXRhOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufTtcblxuZXhwb3J0IHR5cGUgVXBkYXRlRGVmYXVsdEFjY2Vzc1Byb3BzID0ge1xuICBkb2N1bWVudElkOiBEb2N1bWVudFtcImlkXCJdO1xuICBhY2Nlc3M6IERvY3VtZW50QWNjZXNzO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0RG9jdW1lbnRHcm91cHNQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZUdyb3VwQWNjZXNzUHJvcHMgPSB7XG4gIGdyb3VwSWQ6IERvY3VtZW50R3JvdXBbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZUdyb3VwQWNjZXNzUHJvcHMgPSB7XG4gIGdyb3VwSWQ6IERvY3VtZW50R3JvdXBbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIEdldERvY3VtZW50VXNlcnNQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIFVwZGF0ZVVzZXJBY2Nlc3NQcm9wcyA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbiAgYWNjZXNzOiBEb2N1bWVudEFjY2Vzcztcbn07XG5cbmV4cG9ydCB0eXBlIFJlbW92ZVVzZXJBY2Nlc3NQcm9wcyA9IHtcbiAgdXNlcklkOiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG5cbmV4cG9ydCB0eXBlIEdldERvY3VtZW50c1Byb3BzID0ge1xuICBncm91cElkcz86IERvY3VtZW50R3JvdXBbXCJpZFwiXVtdO1xuICB1c2VySWQ/OiBEb2N1bWVudFVzZXJbXCJpZFwiXTtcbiAgZG9jdW1lbnRUeXBlPzogRG9jdW1lbnRUeXBlO1xuICBkcmFmdHM/OiBib29sZWFuO1xuICBsaW1pdD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIEdldExpdmVVc2Vyc1Byb3BzID0ge1xuICBkb2N1bWVudElkczogRG9jdW1lbnRbXCJpZFwiXVtdO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0TmV4dERvY3VtZW50c1Byb3BzID0ge1xuICBuZXh0UGFnZTogc3RyaW5nO1xufTtcblxuZXhwb3J0IHR5cGUgRGVsZXRlRG9jdW1lbnRQcm9wcyA9IHtcbiAgZG9jdW1lbnRJZDogRG9jdW1lbnRbXCJpZFwiXTtcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./types/functions.ts\n");

/***/ }),

/***/ "(api)/./types/index.ts":
/*!************************!*\
  !*** ./types/index.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./api */ \"(api)/./types/api.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _api__WEBPACK_IMPORTED_MODULE_0__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _api__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _data__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./data */ \"(api)/./types/data.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _data__WEBPACK_IMPORTED_MODULE_1__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _data__WEBPACK_IMPORTED_MODULE_1__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _document__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./document */ \"(api)/./types/document.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _document__WEBPACK_IMPORTED_MODULE_2__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _document__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _room__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./room */ \"(api)/./types/room.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _room__WEBPACK_IMPORTED_MODULE_3__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _room__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functions */ \"(api)/./types/functions.ts\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _functions__WEBPACK_IMPORTED_MODULE_4__) if(__WEBPACK_IMPORT_KEY__ !== \"default\") __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _functions__WEBPACK_IMPORTED_MODULE_4__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBc0I7QUFDQztBQUNJO0FBQ0o7QUFDSyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3R5cGVzL2luZGV4LnRzP2RmMmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vYXBpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kYXRhXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9kb2N1bWVudFwiO1xuZXhwb3J0ICogZnJvbSBcIi4vcm9vbVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vZnVuY3Rpb25zXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./types/index.ts\n");

/***/ }),

/***/ "(api)/./types/room.ts":
/*!***********************!*\
  !*** ./types/room.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"RoomAccess\": () => (/* binding */ RoomAccess),\n/* harmony export */   \"RoomAccessLevels\": () => (/* binding */ RoomAccessLevels)\n/* harmony export */ });\nvar RoomAccess;\n(function(RoomAccess) {\n    RoomAccess[\"RoomWrite\"] = \"room:write\";\n    RoomAccess[\"RoomRead\"] = \"room:read\";\n    RoomAccess[\"RoomPresenceWrite\"] = \"room:presence:write\";\n})(RoomAccess || (RoomAccess = {}));\nvar RoomAccessLevels;\n(function(RoomAccessLevels) {\n    RoomAccessLevels[\"USER\"] = \"user\";\n    RoomAccessLevels[\"GROUP\"] = \"group\";\n    RoomAccessLevels[\"DEFAULT\"] = \"default\";\n})(RoomAccessLevels || (RoomAccessLevels = {}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi90eXBlcy9yb29tLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFvQk87VUFBS0EsVUFBVTtJQUFWQSxXQUNWQyxlQUFZO0lBREZELFdBRVZFLGNBQVc7SUFGREYsV0FHVkcsdUJBQW9CO0dBSFZILGVBQUFBO0lBTUw7VUFBS0ksZ0JBQWdCO0lBQWhCQSxpQkFDVkMsVUFBTztJQURHRCxpQkFFVkUsV0FBUTtJQUZFRixpQkFHVkcsYUFBVTtHQUhBSCxxQkFBQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi90eXBlcy9yb29tLnRzPzEwNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXNlckluZm8gfSBmcm9tIFwiLi4vbGl2ZWJsb2Nrcy5jb25maWdcIjtcbmltcG9ydCB7IERvY3VtZW50Um9vbU1ldGFkYXRhIH0gZnJvbSBcIi4vZG9jdW1lbnRcIjtcblxuLyoqXG4gKiBUaGVzZSB0eXBlcyBhcmUgdXNlZCBpbiB0aGUgTGl2ZWJsb2NrcyBBUElcbiAqIGh0dHBzOi8vbGl2ZWJsb2Nrcy5pby9kb2NzL2FwaS1yZWZlcmVuY2UvcmVzdC1hcGktZW5kcG9pbnRzXG4gKi9cblxuZXhwb3J0IHR5cGUgUm9vbSA9IHtcbiAgdHlwZTogXCJyb29tXCI7XG4gIGlkOiBzdHJpbmc7XG4gIG1ldGFkYXRhOiBEb2N1bWVudFJvb21NZXRhZGF0YTtcbiAgZGVmYXVsdEFjY2Vzc2VzOiBSb29tQWNjZXNzW107XG4gIGdyb3Vwc0FjY2Vzc2VzOiBSb29tQWNjZXNzZXM7XG4gIHVzZXJzQWNjZXNzZXM6IFJvb21BY2Nlc3NlcztcbiAgZHJhZnQ6IFwieWVzXCIgfCBcIm5vXCI7XG4gIGNyZWF0ZWRBdD86IHN0cmluZztcbiAgbGFzdENvbm5lY3Rpb25BdDogc3RyaW5nO1xufTtcblxuZXhwb3J0IGVudW0gUm9vbUFjY2VzcyB7XG4gIFJvb21Xcml0ZSA9IFwicm9vbTp3cml0ZVwiLFxuICBSb29tUmVhZCA9IFwicm9vbTpyZWFkXCIsXG4gIFJvb21QcmVzZW5jZVdyaXRlID0gXCJyb29tOnByZXNlbmNlOndyaXRlXCIsXG59XG5cbmV4cG9ydCBlbnVtIFJvb21BY2Nlc3NMZXZlbHMge1xuICBVU0VSID0gXCJ1c2VyXCIsXG4gIEdST1VQID0gXCJncm91cFwiLFxuICBERUZBVUxUID0gXCJkZWZhdWx0XCIsXG59XG5cbmV4cG9ydCB0eXBlIFJvb21NZXRhZGF0YSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdPjtcblxuZXhwb3J0IHR5cGUgUm9vbUFjY2Vzc2VzID0gUmVjb3JkPHN0cmluZywgUm9vbUFjY2Vzc1tdIHwgbnVsbD47XG5cbmV4cG9ydCB0eXBlIFJvb21BY3RpdmVVc2VyID0ge1xuICB0eXBlOiBcInVzZXJcIjtcbiAgaWQ6IHN0cmluZztcbiAgY29ubmVjdGlvbklkOiBudW1iZXI7XG4gIGluZm86IFVzZXJJbmZvO1xufTtcbiJdLCJuYW1lcyI6WyJSb29tQWNjZXNzIiwiUm9vbVdyaXRlIiwiUm9vbVJlYWQiLCJSb29tUHJlc2VuY2VXcml0ZSIsIlJvb21BY2Nlc3NMZXZlbHMiLCJVU0VSIiwiR1JPVVAiLCJERUZBVUxUIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./types/room.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/auth/[...nextauth].ts"));
module.exports = __webpack_exports__;

})();